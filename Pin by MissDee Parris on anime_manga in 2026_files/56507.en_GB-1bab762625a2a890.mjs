(self.modernJsonp=self.modernJsonp||[]).push([["56507"],{87524(e,t,s){s.d(t,{e:()=>o}),s(859471),s(586733),s(676692);var a=s(987628);s(769272),s(601185),s(971289),s(562615);let{Provider:r,getMaybe:o}=(0,a.A)("fingerprintContext",{fingerprintData:{current:{sardineSessionKey:null,arkoseSessionToken:null,arkoseEnforcement:null,sardineContext:null,submitTriggeredTime:null,experimentGroup:"control"}},setupFingerprintSdks:e=>{e?.()},isLoadingFingerprintContext:!1})},353090(e,t,s){s.r(t),s.d(t,{default:()=>u});var a=s(61163),r=s(859471),o=s(19821),n=s(538329),i=s(131094),l=s(343520),c=s(562615);let d=`
.passwordStrengthMeter__a11yMessage:not(:focus):not(:active) {
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}
`,h=({score:e})=>{let{color:t,percentage:s}=(()=>{let t,s;switch(e){case 1:t="var(--comp-progressbar-color-background-bar-warning)",s="23%";break;case 2:case 3:t="var(--comp-progressbar-color-background-bar-default)",s="57%";break;case 4:t="var(--comp-progressbar-color-background-bar-success)",s="100%";break;default:t="var(--comp-progressbar-color-background-bar-error)",s="13%"}return{color:t,percentage:s}})();return(0,c.jsx)(o.az,{"aria-labelledby":"password-strength-message","aria-valuemax":4,"aria-valuemin":0,"aria-valuenow":e,dangerouslySetInlineStyle:{__style:{backgroundColor:"var(--comp-progressbar-color-background-bar-unfilled)"}},height:8,role:"meter",rounding:"pill",width:"100%",children:(0,c.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{backgroundColor:t,transition:".5s"}},"data-test-id":"password-strength-progress",height:"8px",rounding:"pill",width:s})})},_=({id:e,password:t})=>{(0,r.useEffect)(()=>{(0,a.A)("PasswordStrengthMeter","/app/packages/gestalt-compliant/PasswordStrengthMeter.tsx")},[]);let s=(0,n.A)(),_=(0,l.Tg)(t),p=(0,l.uf)({score:_,i18n:s}),[u,g]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{!u&&t.length>0&&g(!0)},[u,t]),(0,c.jsxs)(o.az,{"aria-atomic":!0,children:[u&&(0,c.jsxs)(o.az,{marginBottom:1,children:[(0,c.jsx)(o.az,{marginBottom:3,children:(0,c.jsx)(h,{score:_})}),(0,c.jsx)(o.KJ,{color:"subtle",id:"password-strength-message",size:"100",weight:"bold",children:p}),(0,c.jsxs)("span",{"aria-live":"polite",className:"passwordStrengthMeter__a11yMessage",children:[(0,c.jsx)(i.A,{unsafeCSS:d}),(()=>{switch(_){case 1:return s.bt("Your password’s strength is OK but it could be stronger.", "Your password’s strength is OK, but it could be stronger.", "passwordStrengthMeter.a11y.message.score1", undefined, true);case 2:case 3:return s.bt("Your password strength looks pretty good. ", "Your password strength looks pretty good. ", "passwordStrengthMeter.a11y.message.score2", undefined, true);case 4:return s.bt("This is a strong password. Perfect!", "This is a strong password. Perfect!", "passwordStrengthMeter.a11y.message.score4", undefined, true);default:return s.bt("Make your password more complicated to continue.", "Make your password more complicated to continue.", "passwordStrengthMeter.a11y.message.score0", undefined, true)}})()]})]}),(0,c.jsx)(o.KJ,{color:"subtle",id:`${e}-helperText`,size:"100",children:s.bt("Use 8 or more letters, numbers and symbols", "Use 8 or more letters, numbers and symbols", "passwordStrengthMeter.description", undefined, true)})]})};var p=s(79906);let u=({password:e})=>{(0,r.useEffect)(()=>{(0,a.A)("PasswordStrengthWrapper","/app/packages/PasswordStrengthWrapper.tsx")},[]);let t=(0,n.A)(),[s,i]=(0,r.useState)(!1),[l,d]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{!l&&e.length>0&&d(!0)},[l,e]),(0,c.jsxs)(o.az,{marginTop:l?6:2,children:[(0,c.jsx)(o.az,{marginBottom:2,paddingX:3,children:(0,c.jsx)(_,{id:"password",password:e})}),(0,c.jsx)(o.so,{alignItems:"start",children:(0,c.jsx)(o.vx,{color:"transparent",dataTestId:"view-reporting-button",href:"",iconEnd:"circle-information",onClick:({dangerouslyDisableOnNavigation:e,event:t})=>{e(),t.preventDefault(),i(!0)},text:t.bt("Password tips", "Password tips", "PasswordStrengthWrapper.passwordTips.button", undefined, true)})}),(0,c.jsx)(p.Ay,{accessibilityModalLabel:t.bt("Password tips modal", "Password tips modal", "PasswordStrengthWrapper.passwordTips.modal.accessibilityLabel", undefined, true),align:"start",isOpen:s,layerZIndex:new o.rk(10002),onDismiss:()=>i(!1),role:"dialog",size:"md",zIndex:new o.rk(10002),children:(0,c.jsxs)(o.az,{marginBottom:5,marginTop:5,paddingX:4,children:[(0,c.jsx)(o.az,{marginBottom:5,children:(0,c.jsx)(o._Y,{align:"start",size:"300",children:t.bt("Password tips", "Password tips", "PasswordStrengthWrapper.passwordTips.modal.headerTitle", undefined, true)})}),(0,c.jsx)(o.az,{marginBottom:3,paddingX:1,children:(0,c.jsx)(o.KJ,{size:"200",children:t.bt("A strong password helps keep your account safe. Use at least 8 letters, numbers and symbols.", "A strong password helps keep your account safe. Use at least 8 letters, numbers and symbols.", "PasswordStrengthWrapper.passwordTips.modal.body1", undefined, true)})}),(0,c.jsx)(o.az,{marginBottom:5,children:(0,c.jsxs)(o.B8,{label:(0,c.jsx)(o.KJ,{size:"200",weight:"bold",children:t.bt("What to avoid", "What to avoid", "PasswordStrengthWrapper.passwordTips.modal.subhead", undefined, true)}),size:"200",spacing:"condensed",type:"unordered",children:[(0,c.jsx)(o.B8.Item,{text:t.bt("Common passwords, words and names", "Common passwords, words and names", "PasswordStrengthWrapper.passwordTips.modal.subhead.item1", undefined, true)}),(0,c.jsx)(o.B8.Item,{text:t.bt("Recent dates or dates associated with you", "Recent dates or dates associated with you", "PasswordStrengthWrapper.passwordTips.modal.subhead.item2", undefined, true)}),(0,c.jsx)(o.B8.Item,{text:t.bt("Simple patterns and repeated text", "Simple patterns and repeated text", "PasswordStrengthWrapper.passwordTips.modal.subhead.item3", undefined, true)})]})}),(0,c.jsx)(o.$n,{color:"primary",fullWidth:!0,onClick:()=>i(!1),size:"lg",text:t.bt("OK", "Okay", "PasswordStrengthWrapper.passwordTips.modal.okayButton", undefined, true)})]})})]})}},706652(e,t,s){s.d(t,{A:()=>a});let a=e=>Math.floor(new Date(e).getTime()/1e3)},440181(e,t,s){s.d(t,{A:()=>a});function a(e,t){let s=e.split("@")[0],a="";return(a=(a=s.includes(".")?s.replace("."," "):s.includes("_")?s.replace("_"," "):s).replace(/[0-9]/g,""),"GB"===t)?"User_"+a.split("").sort(()=>.5-Math.random()).join(""):a.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())}},543231(e,t,s){s.d(t,{A:()=>O});var a=s(61163),r=s(859471),o=s(318271),n=s(106386),i=s(979638),l=s(600954),c=s(586733),d=s(35458),h=s(743372),_=s(457315),p=s(257300),u=s(567176),g=s(538329),m=s(706466),f=s(562615);let w=({view_type:e,view_parameter:t})=>{let s=(0,h.A)(),[a,o]=(0,r.useState)(),[n,i]=(0,r.useState)(!1),l=(0,r.useCallback)(async({recipient:a,channel:r,onSuccess:n,onFailure:l,onFinally:c})=>{i(!0),o(void 0);try{await (0,p.A)({url:"/v3/verifications/send/",method:"POST",data:{recipient:a,channel:r}}),s({view_type:e,view_parameter:t,event_type:17507,aux_data:{recipient:a}}),n?.()}catch(r){o((0,_.A)(r,"message")??""),s({view_type:e,view_parameter:t,event_type:17508,aux_data:{recipient:a,status_code:(0,_.A)(r,"httpStatus"),api_error_code:(0,_.A)(r,"api_error_code")}}),l?.()}finally{i(!1),c?.()}},[s,t,e]);return{clearError:(0,r.useCallback)(()=>{o(void 0)},[]),error:a,isFetching:n,sendVerification:l}},b=d.z.object({resource_response:d.z.object({data:d.z.object({progress_token:d.z.string().nullable()})})}),x=()=>{let{showToast:e}=(0,m.CG)(),t=(0,g.A)();return{showNewCodeSentToast:(0,r.useCallback)(()=>{e(({hideToast:e})=>(0,f.jsx)(u.A,{onHide:e,text:t.bt("Sent! Check your emails.", "Sent! Check your email.", "Email.Verification.NewCodeSent.Toast", undefined, true)}))},[t,e])}},y=()=>{let{showToast:e}=(0,m.CG)(),t=(0,g.A)();return{showEmailConfirmedToast:(0,r.useCallback)(()=>{e(({hideToast:e})=>(0,f.jsx)(u.A,{onHide:e,text:t.bt("Email address confirmed", "Email confirmed", "Email.Verification.EmailConfirmed.Toast", undefined, true)}))},[t,e])}};var v=s(19821),T=s(348681),A=s(971289),P=s(756658);function S({heading:e,description:t,isLoading:s,onClearError:o,onSendNewCode:n,onSubmit:i,recipient:l,verificationError:d,viewType:h}){(0,r.useEffect)(()=>{(0,a.A)("VerificationCodeForm","/app/packages/one-time-passcode/VerificationCodeForm.tsx")},[]);let _={view_type:h,view_parameter:4095,aux_data:{recipient:l}};(0,T.r)(_);let{logContextEvent:p}=(0,c.o)(),u=(0,A.qJ)(),m=(0,g.A)(),[w,b]=(0,r.useState)("");return(0,f.jsxs)(r.Fragment,{children:[s&&(0,f.jsx)(P.A,{}),(0,f.jsxs)(v.so,{"data-test-id":"verification-code-form",direction:"column",gap:{row:0,column:2},children:[(0,f.jsx)(v._Y,{accessibilityLevel:2,align:u?"start":"center",size:u?"700":"600",children:e}),(0,f.jsx)(v.KJ,{align:u?"start":"center",color:"subtle",size:"300",children:t}),(0,f.jsx)(v.az,{marginTop:u?8:3,children:(0,f.jsx)(v.oz,{autoComplete:"off",dataTestId:"verification-code-form-input",errorMessage:d,id:"code",onChange:({event:e})=>{d&&o?.(),b(e.target.value)},size:"lg"})}),(0,f.jsx)(v.az,{marginTop:u?8:6,children:(0,f.jsx)(v.KJ,{align:"center",children:(0,f.jsx)(v.$n,{color:"transparent",onClick:()=>{p({..._,event_type:u?101:102,element:16033}),n()},size:"lg",text:m.bt("Send new code", "Send new code", "profile.Settings.Verification.Code.SendAgain", undefined, true)})})}),(0,f.jsx)(v.az,{dangerouslySetInlineStyle:{__style:{marginTop:u?"32px":"110px"}},display:"flex",justifyContent:u?"end":"center",children:(0,f.jsx)(v.$n,{color:"primary",dataTestId:"verification-code-form-submit-button",disabled:6!==w.length,fullWidth:!u,onClick:()=>{p({..._,event_type:u?101:102,element:12019}),i({otp:w})},size:"lg",text:m.bt("Continue", "Continue", "profile.Settings.Verification.Code.Continue", undefined, true)})})]})]})}var z=s(218358),k=s(199961),j=s(871481),C=s(809936);function I({passcode:e,recipient:t,viewType:s,...o}){(0,r.useEffect)(()=>{(0,a.A)("EmailUpdateVerification","/app/packages/one-time-passcode/EmailUpdateVerification.tsx")},[]);let d={view_type:s,view_parameter:4095,aux_data:{recipient:t}},h=(0,A.qJ)(),_=(0,i.Zp)(),p=(0,n.wA)(),u=(0,j.Eo)(),[g]=(0,l.ok)(),m=g.get("previous_url"),{logContextEvent:b}=(0,c.o)(),{showNewCodeSentToast:v}=x(),{showEmailConfirmedToast:T}=y(),{handleSave:P,emailUpdateWithOtp:I}=(0,C.r_)()??{},[E,M]=(0,r.useState)(!1),[O,U]=(0,r.useState)(),{clearError:R,error:W,isFetching:F,sendVerification:B}=w(d),L=()=>{b({...d,event_type:16284}),T(),_("/settings/account-settings/")};return(0,f.jsx)(S,{...o,isLoading:E||F,onClearError:()=>{U(void 0),R()},onSendNewCode:()=>{B({recipient:t,channel:"email",onSuccess:()=>{v()}})},onSubmit:({otp:s})=>{M(!0),h?(P&&I&&(P({...I.newSaveState,otp:s},void 0,{suppressToast:!0}),m&&_(m)),M(!1)):p((0,k.uT)({field:"email",value:t,passcode:e,otp:s,onSettingSavedHn:L,showErrorHn:e=>{let{aux_data:t,...s}=d;b({...s,event_type:16285,aux_data:{...t,status_code:e?.httpStatus,api_error_code:e?.api_error_code}}),e?.message&&U(e.message)},onFinallyHn:()=>M(!1),surfaceTag:z.r.SETTINGS,userId:u?.id??""}))},recipient:t,verificationError:O||W||I?.errorMessage,viewType:s})}var E=s(168079);function M({isLoading:e=!1,progressToken:t,recipient:s,viewType:o,onClearError:n,onCodeVerified:i,verificationError:l,...c}){(0,r.useEffect)(()=>{(0,a.A)("EmailVerification","/app/packages/one-time-passcode/EmailVerification.tsx")},[]);let d={view_type:o,view_parameter:4095,aux_data:{recipient:s}},{clearError:u,error:g,isFetching:m,sendVerification:v}=w(d),{clearError:T,checkVerificationCode:A,error:P,isFetching:z}=(({view_type:e,view_parameter:t})=>{let s=(0,h.A)(),[a,o]=(0,r.useState)(),[n,i]=(0,r.useState)(!1);return{checkVerificationCode:(0,r.useCallback)(async({code:a,progress_token:r,recipient:n,onSuccess:l,onFailure:c,onFinally:d})=>{i(!0),o(void 0);try{let o=await (0,p.A)({url:"/v3/verifications/check/",method:"POST",data:{progress_token:r,code:a,recipient:n}}),i=b.parse(o);s({view_type:e,view_parameter:t,event_type:16284,aux_data:{recipient:n}}),l({progressToken:i.resource_response.data.progress_token})}catch(a){o((0,_.A)(a,"message")??""),s({view_type:e,view_parameter:t,event_type:16285,aux_data:{recipient:n,status_code:(0,_.A)(a,"httpStatus"),api_error_code:(0,_.A)(a,"api_error_code")}}),c?.()}finally{i(!1),d?.()}},[s,t,e]),clearError:(0,r.useCallback)(()=>{o(void 0)},[]),error:a,isFetching:n}})(d),{showNewCodeSentToast:k}=x(),{showEmailConfirmedToast:j}=y();(0,E.A)(()=>{v({recipient:s,channel:"email"})});let C=()=>{u(),T(),n?.()};return(0,f.jsx)(S,{...c,isLoading:e||m||z,onClearError:C,onSendNewCode:()=>{C(),v({recipient:s,channel:"email",onSuccess:()=>{k()}})},onSubmit:({otp:e})=>{C(),A({code:e,progress_token:t,recipient:s,onSuccess:e=>{i(e),j()}})},recipient:s,verificationError:l||g||P,viewType:o})}function O({verificationComponentProps:e,verificationVariant:t}){switch((0,r.useEffect)(()=>{(0,a.A)("VerificationFlow","/app/packages/one-time-passcode/VerificationFlow.tsx")},[]),t){case o.m.SIGNUP:case o.m.VERIFICATION:return(0,f.jsx)(M,{...e});case o.m.SETTINGS:return(0,f.jsx)(I,{...e});default:return null}}},318271(e,t,s){s.d(t,{m:()=>a});let a={SIGNUP:"signup",SETTINGS:"settings",VERIFICATION:"verification"}},520023(e,t,s){s.d(t,{A:()=>o});var a=s(55891),r=s(537536);let o=e=>!!(0,r.T$)()||(0,a.A)(e)},164373(e,t,s){s.d(t,{E:()=>g,l:()=>m});var a=s(427471),r=s(457315),o=s(298146),n=s(537536),i=s(81920);let l={Incentive:new Set(["smb_geotestcampaign_us_Q42024"])},c={Incentive:"SMB_100"},d=async e=>{try{let t=(await a.A.create("UserStateResource",{state:`${e}_REWARD_OFFER`}).callGet()).resource_response.data||null;return 1===t}catch{return!1}},h=async e=>{try{let t=(await a.A.create("UserStateResource",{state:`${e}_REWARD_OFFER`,value:1}).callCreate()).resource_response;if(t&&Object.keys(t).length>0)return!0;return!1}catch{return!1}},_=async e=>{try{let t=(await a.A.create("UserStateResource",{state:`${e}_REWARD_OFFER_RECEIVED`}).callGet()).resource_response.data||null;return 1===t}catch{return!1}},p=async e=>{try{let t=(await a.A.create("UserStateResource",{state:`${e}_REWARD_OFFER_RECEIVED`,value:1}).callCreate()).resource_response;if(t&&Object.keys(t).length>0)return!0;return!1}catch{return!1}},u=async(e,t)=>{if(!e||!t)return!1;if(l[t]?.has(e)){let e=c[t];return!(!e||await d(e))&&await h(e)}return!1},g=async({fallbackUtmCampaign:e,fallbackCreativeId:t}={})=>{let s=(0,n.T$)(),a=s?.utmCampaign??e,r=s?.creativeId??t;return!!a&&!!r&&u(a,r)},m=async e=>{if(!e)return;let t=c.Incentive;if(t&&await d(t)&&!await _(t))try{let s=await (0,o.A)({url:`/ads/v4/advertisers/${e}/marketing_offer/${t}/redeem`,method:"POST",data:{}});s?.resource_response&&await p(t),(0,i.GV)("pbm_rewards",{sampleRate:1,tags:{event_category:"SMB Rewards",event_name:`${t} Reward Redeemed`}})}catch(e){(0,i.GV)("pbm_rewards",{sampleRate:1,tags:{event_category:"SMB Rewards",event_name:`${t} Reward Failure`,error_message:(0,r.A)(e,"message")}})}}},446627(e,t,s){s.d(t,{A:()=>d});var a=s(35458),r=s(257300);let o=a.z.object({birthdate_validation:a.z.object({is_valid:a.z.boolean().nullable(),missing_age:a.z.boolean().nullable(),overage:a.z.boolean().nullable(),underage:a.z.boolean().nullable()}).nullable(),email_verification_required:a.z.boolean().nullable(),exists:a.z.boolean(),is_valid:a.z.boolean(),progress_token:a.z.string().nullable()});async function n({email:e,birthdate:t}){let s=await (0,r.A)({url:"/v3/register/progress_token/",method:"POST",data:{email:e,birthdate:t}}),a=o.safeParse(s.resource_response.data);if(!a.success)throw a.error;return a.data}async function i(e){let t=await (0,r.A)({url:"/v3/register/exists/",data:{email:e}});return!!t.resource_response?.data}async function l({birthday:e,email:t}){try{let s=await n({birthdate:e,email:t});return function(e){let{exists:t,progress_token:s,email_verification_required:a,birthdate_validation:r,is_valid:o}=e;return{fieldsValidationResponse:{birthdate:r?{isValid:r.is_valid??!1,isOverage:r.overage??!1,isUnderage:r.underage??!1}:null,email:{isValid:o,isOTPRequired:a??!1}},progressToken:s,userExists:t}}(s)}catch(e){return Promise.reject(e)}}async function c(e){try{return{userExists:await i(e),progressToken:null}}catch(e){return Promise.reject(e)}}let d=async function(e){let{birthday:t,checkExperiment:s,email:a,isBusiness:r=!1,isDesktop:o,submitValidation:n=!0}=e;return!function({checkExperiment:e,isBusiness:t,isDesktop:s,submitValidation:a}){return!!a&&!t&&(s?e("web_identity_otp_signup").anyEnabled:e("mweb_identity_otp_signup").anyEnabled)}({checkExperiment:s,isBusiness:r,isDesktop:o,submitValidation:n})?c(a):l({birthday:t,email:a})}},154325(e,t,s){s.d(t,{Ay:()=>p});var a=s(35458),r=s(148867),o=s(251407),n=s(752159),i=s(803489),l=s(598948);let c=a.z.string().nullable().optional().transform(e=>e??null),d=a.z.boolean().nullable().optional().transform(e=>e??null),h=a.z.object({authorization_uri:c,existing_user:d,existing_user_is_sso:d,is_sso:a.z.boolean(),redirect_uri:c,exchange_code_to_token_info_url:c,state_param:c.optional(),nonce_param:c.optional()});a.z.object({resource_response:a.z.object({data:h})});let _=a.z.object({data:h});function p(){let e="u">typeof window;return{verifySsoUser:async e=>{try{let t=await fetch("/secure/sso_info",{headers:{"Content-Type":"application/json","x-csrftoken":`${String(o.Jt(r.mh))}`},method:"POST",body:JSON.stringify({email:e})}),s=await t.json(),{data:a}=_.parse(s),{authorization_uri:n,existing_user:i,existing_user_is_sso:l,is_sso:c,redirect_uri:d,exchange_code_to_token_info_url:h}=a;return{authorizationUri:n,exchangeCodeToTokenUrl:h,existingUser:i,existingUserIsSso:l,isSso:c,redirectUri:d}}catch(e){return(0,n.PM)("coreSso.verifyUser.error",{code:e.api_error_code,message:e.message,http_status:e.http_status}),{authorizationUri:null,exchangeCodeToTokenUrl:null,existingUser:null,existingUserIsSso:null,isSso:!1,redirectUri:null}}},authenticateWithSso:({callbacks:t,exchangeCodeToTokenUrl:s,isLogin:a,modalUrl:c})=>{let d;if(!e)return void t.error?.({api_error_code:0,message:"Window is undefined"});let h=async e=>{if(!e.isTrusted)return;let c=(({origin:e,data:t})=>(e=>{let{hostname:t}=(0,l.A)(e);return t&&(t.startsWith("www.pinterest")||t.endsWith(".pinterest.com")||t.endsWith(".pinterdev.com"))})(e)?String(t):null)(e),_=(0,i.A)(c);if(_.code){if(a){t.success({authCode:_.code,state:_.state}),window.removeEventListener("message",h);return}try{(0,n.PM)("coreSso.authenticateWithSso.companyParam",{company:_.company||"undefined",hasCompany:!!_.company,state:_.state||"undefined",hasState:!!_.state});let e=await fetch("/secure/sso_exchange",{headers:{"Content-Type":"application/json","x-csrftoken":`${String(o.Jt(r.mh))}`},method:"POST",body:JSON.stringify({code:_.code,company:_.company,state:_.state,exchangeCodeToTokenUrl:s})});if(!e.ok){let t=`HTTP ${e.status}: Failed to exchange SSO code`;throw{api_error_code:void 0,message:t,http_status:e.status}}let{sso_id:a,sso_id_token:i,sso_email:l,sso_user_name:c}=(await e.json()).data;a&&i&&l&&c?t.success({ssoId:a,ssoIdToken:i,ssoEmail:l,ssoUserName:c}):((0,n.PM)("coreSso.authenticateWithSso.noTokens",{sso_id:!!a,sso_id_token:!!i,sso_email:!!l,sso_user_name:!!c}),t.error?.({api_error_code:0,message:"No tokens returned"}))}catch(e){(0,n.PM)("coreSso.authenticateWithSso.error",{code:e.api_error_code,message:e.message,http_status:e.http_status}),t.error?.(e)}finally{window.removeEventListener("message",h),d&&!d.closed&&d.close()}}};window.addEventListener("message",h),d=window.open(c,"_blank","width=600,height=600")}}}},12729(e,t,s){s.d(t,{A:()=>g});var a=s(61163),r=s(859471),o=s(19821),n=s(586733),i=s(567176),l=s(538329),c=s(542975),d=s(916716),h=s(971289),_=s(562615);let p={terms:"terms",collectionUsePersonalInfo:"collectionUsePersonalInfo",thirdPartyProvisionPersonalInfo:"thirdPartyProvisionPersonalInfo",overseasTransferPersonalInfo:"overseasTransferPersonalInfo"},u="optionalMarketingConsent";function g({isBusiness:e,isRegistering:t,onBackButtonClick:s,onSubmitHandler:g,removeSpacing:m,validationError:f}){(0,r.useEffect)(()=>{(0,a.A)("ConsentStep","/app/packages/signupConsentStep/ConsentStep.tsx")},[]);let w=(0,l.A)(),b=(0,h.qJ)(),{logContextEvent:x}=(0,n.o)(),[y,v]=(0,r.useState)([]),[T,A]=(0,r.useState)(!1),P=[{name:w.bt("Required", "Required", "consentStep.sections.required.title", undefined, true),description:w.bt("I consent to the following:", "I consent to the following:", "consentStep.sections.required.description", undefined, true),checkboxes:[{key:p.terms,text:e?w.bt("Business Terms of Service.", "Business Terms of Service.", "consentStep.sections.required.checkbox.termOfService.text.business", undefined, true):w.bt("Terms of Service.", "Terms of Service.", "consentStep.sections.required.checkbox.termOfService.text", undefined, true),learnMore:{text:w.bt("Learn more", "Learn more", "consentStep.sections.required.checkbox.termOfService.learnMore", undefined, true),url:e?"https://business.pinterest.com/business-terms-of-service":"https://policy.pinterest.com/terms-of-service"}},{key:p.collectionUsePersonalInfo,text:w.bt("Collection and use of personal information.", "Collection and Use of Personal Information.", "consentStep.sections.required.checkbox.collectionUsePersonalInfo.text", undefined, true),learnMore:{text:w.bt("Learn more", "Learn more", "consentStep.sections.required.checkbox.collectionUsePersonalInfo.learnMore", undefined, true),url:"https://policy.pinterest.com/consents#section-1-collection-and-use-of-personal-information"}},{key:p.thirdPartyProvisionPersonalInfo,text:w.bt("Third party provision of personal information.", "Third Party Provision of Personal Information.", "consentStep.sections.required.checkbox.thirdPartProvisionPersonalInfo.text", undefined, true),learnMore:{text:w.bt("Learn more", "Learn more", "consentStep.sections.required.checkbox.thirdPartProvisionPersonalInfo.learnMore", undefined, true),url:"https://policy.pinterest.com/consents#section-2-third-party-provision-of-personal-information"}},{key:p.overseasTransferPersonalInfo,text:w.bt("Overseas transfer of personal information.", "Overseas Transfer of Personal Information.", "consentStep.sections.required.checkbox.overseasTransferOfPersonalInformation.text", undefined, true),learnMore:{text:w.bt("Learn more", "Learn more", "consentStep.sections.required.checkbox.overseasTransferOfPersonalInformation.learnMore", undefined, true),url:"https://policy.pinterest.com/consents#section-3-overseas-transfer-of-personal-information"}}]},{name:w.bt("Optional", "Optional", "consentStep.sections.optional.title", undefined, true),checkboxes:[{key:u,text:w.bt("By ticking, I consent to the receipt of marketing information and the use of personal information for sending marketing communications. You can change this at any time by visiting your settings.", "By checking, I consent to the receipt of marketing information and use of personal information for sending marketing communications. You may change this at any time by visiting your settings.", "consentStep.sections.required.checkbox.optionalMarketingConsent.text", undefined, true),learnMore:{text:w.bt("Learn more", "Learn more", "consentStep.sections.required.checkbox.optionalMarketingConsent.learnMore", undefined, true),url:"https://policy.pinterest.com/consents#section-4-receipt-of-marketing-information-and-use-of-personal-information-for-sending-marketing-information"}}]}],S=P.flatMap(e=>e.checkboxes.map(e=>e.key));(0,r.useEffect)(()=>{x({event_type:13,view_type:10,view_parameter:4038}),f&&A(!0)},[f]);let z=()=>Object.values(p).every(e=>y.includes(e)),k=({checked:e,id:t})=>{let s=[];"agreeToAll"===t&&e?s=["agreeToAll",...S]:"agreeToAll"!==t&&(s=e?[...y,t]:y.filter(e=>e!==t),!e&&s.includes("agreeToAll")?s=s.filter(e=>"agreeToAll"!==e):s.length!==S.length||s.includes("agreeToAll")||(s=["agreeToAll",...s])),v(s)},j=(0,_.jsx)(o.$n,{color:"primary",dataTestId:"consent-step-next-button",disabled:!z(),fullWidth:!0,onClick:()=>{z()&&(x({element:96,event_type:b?101:102,view_type:10,view_parameter:4038}),g({kr_privacy_consent_opt_in:!0,marketing_notifs_opt_out:!y.includes(u)}))},size:"lg",text:w.bt("Next", "Next", "consentStep.button.next", undefined, true),type:"button"}),{paddingY:C,paddingX:I}=m?{paddingY:0,paddingX:0}:{paddingY:b?10:8,paddingX:10*!!b};return(0,_.jsxs)(o.az,{paddingX:I,paddingY:C,children:[t&&(0,_.jsx)(d.A,{rounding:8}),(0,_.jsxs)(o.az,{marginBottom:9,paddingX:8,children:[(0,_.jsx)(o.az,{marginBottom:4,children:(0,_.jsxs)(o.so,{direction:"column",gap:{column:4,row:0},children:[(0,_.jsx)(o.so,{justifyContent:"center",children:(0,_.jsx)(o._Y,{accessibilityLevel:2,size:"400",children:w.bt("Consents", "Consents", "consentStep.title", undefined, true)})}),(0,_.jsx)(o.KJ,{color:"subtle",size:"300",children:w.bt("Before you can create an account, you need to agree to the required terms below.", "Before you can create an account, you'll need to agree to the required terms below.", "consentStep.description", undefined, true)})]})}),(0,_.jsx)(o.az,{children:(0,_.jsxs)(o.so,{direction:"column",gap:{column:4,row:0},justifyContent:"start",children:[(0,_.jsx)(o.az,{marginBottom:4,children:(0,_.jsx)(o.Sc,{checked:y.includes("agreeToAll"),id:"agreeToAll",label:w.bt("Agree to all", "Agree to all", "consentStep.checkbox.agreeToAll.text", undefined, true),name:"agreeToAll",onChange:({checked:e})=>k({checked:e,id:"agreeToAll"})})}),(0,_.jsx)(o.so,{direction:"column",gap:{column:6,row:0},children:P.map(e=>(0,_.jsx)(o.LB,{legend:e.name,legendDisplay:"hidden",children:(0,_.jsxs)(o.so,{direction:"column",gap:{column:2,row:0},children:[(0,_.jsxs)(o.az,{children:[(0,_.jsx)(o.KJ,{align:"start",color:"subtle",size:"100",children:e.name}),e.description?(0,_.jsx)(o.az,{marginBottom:2,marginTop:2,children:(0,_.jsx)(o.KJ,{align:"start",size:"300",children:e.description})}):null]}),e.checkboxes.map((e,t)=>(0,_.jsx)(o.az,{marginTop:2*(0!==t),children:(0,_.jsxs)(o.so,{gap:{column:0,row:2},children:[(0,_.jsx)(o.Sc,{checked:y.includes(e.key),id:e.key,name:e.key,onChange:({checked:t})=>k({checked:t,id:e.key})}),(0,_.jsx)(o.JU,{htmlFor:e.key,children:(0,_.jsx)(o.KJ,{children:e.learnMore?(0,c.vQ)(`${e.text} {{ learnMoreLink }}`,{learnMoreLink:(0,_.jsx)(o.KJ,{inline:!0,weight:"bold",children:(0,_.jsx)(o.N_,{display:"inline",href:e.learnMore.url,target:"blank",underline:"always",children:e.learnMore.text})},`${e.key}-learnMore`)}):e.text})})]})},e.key))]})},e.name))})]})})]}),b?(0,_.jsxs)(o.so,{gap:{column:0,row:2},justifyContent:"end",children:[(0,_.jsx)(o.az,{width:117,children:(0,_.jsx)(o.$n,{dataTestId:"consent-step-back-button",fullWidth:!0,onClick:()=>{s&&s()},size:"lg",text:w.bt("Back", "Back", "consentStep.buttons.back", undefined, true),type:"button"})}),(0,_.jsx)(o.az,{width:94,children:j})]}):j,T&&(0,_.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{bottom:"15%",left:"50%",transform:"translateX(-50%)"}},fit:!0,paddingX:1,position:"fixed",children:(0,_.jsx)(i.A,{duration:3500,onHide:()=>A(!T),text:f})})]})}},894625(e,t,s){s.d(t,{A:()=>p});var a=s(61163),r=s(859471),o=s(19821),n=s(538329),i=s(542975),l=s(318271),c=s(543231),d=s(971289),h=s(81920),_=s(562615);function p({clearValidationError:e,onContinue:t,progressToken:s,userEmail:p,validationError:u,isLoading:g=!1}){(0,r.useEffect)(()=>{(0,a.A)("OtpStep","/app/packages/signupOtpStep/OtpStep.tsx")},[]);let m=(0,n.A)(),f=(0,d.qJ)();return(0,_.jsx)(o.az,{marginTop:5,paddingX:f?13:2,paddingY:9*!f,width:"100%",children:(0,_.jsx)(c.A,{verificationComponentProps:{description:(0,i.vQ)(m.bt("We sent a 6-digit code to {{ userEmail }} for you to confirm your account and finish sign-up", "We sent a 6-digit code to {{ userEmail }} for you to confirm your account and finish signup", "otpStep.subTitle", undefined, true),{userEmail:p}),heading:m.bt("Enter the code", "Enter the code", "otpStep.title", undefined, true),isLoading:g,onClearError:()=>{e?.()},onCodeVerified:e=>{s&&(0,h.GV)("otp_step.code_verified.with_progress_token",{tags:{has_empty_progress_token:""===e.progressToken}}),t({progressToken:e.progressToken??""})},progressToken:s,recipient:p,verificationError:u,viewType:10},verificationVariant:l.m.SIGNUP})})}},756658(e,t,s){s.d(t,{A:()=>_});var a=s(61163),r=s(859471),o=s(19821),n=s(538329),i=s(562615);let l=new o.rk(671),c=new o.K5([l]),d=()=>((0,r.useEffect)(()=>{(0,a.A)("Overlay","/app/partner/catalogsV3/common/Overlay/Overlay.tsx")},[]),(0,i.jsx)(o.az,{color:"default",height:"100%",left:!0,opacity:80,position:"absolute",top:!0,width:"100%",zIndex:c})),h=new o.K5([c]),_=({size:e})=>{(0,r.useEffect)(()=>{(0,a.A)("OverlaySpinner","/app/partner/catalogsV3/common/Overlay/OverlaySpinner.tsx")},[]);let t=(0,n.A)();return(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)(d,{}),(0,i.jsx)(o.az,{height:"100%",left:!0,position:"absolute",top:!0,width:"100%",zIndex:h,children:(0,i.jsx)(o.so,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:(0,i.jsx)(o.y$,{accessibilityLabel:t.bt("Loading icon", "Loading Icon", "Catalogs.Spinner", undefined, true),show:!0,size:e})})})]})}},809936(e,t,s){s.d(t,{pi:()=>r,r_:()=>o,w2:()=>a});let{Provider:a,get:r,getMaybe:o}=(0,s(987628).A)("UserSettingsPageContext")}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/56507.en_GB-1bab762625a2a890.mjs.map