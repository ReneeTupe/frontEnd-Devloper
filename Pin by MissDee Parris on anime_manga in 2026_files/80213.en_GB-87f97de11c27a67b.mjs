(self.modernJsonp=self.modernJsonp||[]).push([["80213"],{42011(e,t,o){o.r(t),o.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MoreIdeasPreviewStory_story",selections:[{alias:null,args:null,kind:"ScalarField",name:"referringSource",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"objects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:"images_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"474x")'}],type:"Pin",abstractKey:null}],storageKey:null}],type:"Story",abstractKey:null};i.hash="f6776ff7c6fc3ce9a1f4b72a5dbaa0c2";let n=i},930750(e,t,o){o.d(t,{A:()=>s});var i=o(481714);let n=new Set([92]),r=new Set([154]);function s(e){let t=[];return e.forEach(e=>{if("story"===e.type?n.has(e.container_type)||r.has(e.container_type)||i.c.has(e.story_type)||i.S.has(e.story_type):1){let o=t[t.length-1];Array.isArray(o)?o.push(e):t.push([e])}else t.push(e)}),t}},524023(e,t,o){o.d(t,{A:()=>l});var i=o(859471);let n=null,r=!1,s=0,a=()=>{n&&clearTimeout(n),r=!0,n=setTimeout(()=>{r=!1},100)},l=()=>{let[e,t]=(0,i.useState)(!1),o=(0,i.useRef)(null);(0,i.useEffect)(()=>(0===s&&window.addEventListener("scroll",a),s+=1,()=>{o.current&&clearTimeout(o.current),(s-=1)||window.removeEventListener("scroll",a)}),[]);let n=e=>{o.current&&clearTimeout(o.current),o.current=e&&r?setTimeout(()=>n(!0),100):setTimeout(()=>{t(e)},32)};return{isHovering:e,hoverHandlers:(0,i.useRef)({onMouseOver:()=>n(!0),onMouseLeave:()=>n(!1)}).current}}},510009(e,t,o){o.d(t,{N:()=>c,U:()=>p});var i=o(859471),n=o(987628),r=o(257300);let s={boardMap:{}};function a(e,t){if(e=e||s,"BLOCKING_ACTIONS_UPDATED"===t.type){let{payload:{boardId:o,blockingActions:i}}=t,n=null,r=null,s={};return i.forEach(({section_id:e,progress:t,id:o,created_timestamp:i})=>{let a={id:o,createdAt:i,progress:t};e?"-1"===e?n=a:s[e]=a:r=a}),{...e,boardMap:{...e.boardMap,[o]:{wholeBoard:n,unorganized:r,sectionMap:s}}}}return e}var l=o(562615);let{Provider:d,getMaybe:c}=(0,n.A)("BlockingAction");async function u(e){let t=await (0,r.A)({url:"/v3/boards/{board}/",urlParams:{board:e},data:{fields:["board.id","board.blocking_actions"]}});return new Promise((e,o)=>{let i=t&&t.resource_response&&t.resource_response.data&&t.resource_response.data.blocking_actions;i?e(i):o(Error("No blocking actions found in the response"))})}function p({children:e}){let[t,o]=(0,i.useReducer)(a,s),n=(0,i.useCallback)(e=>u(e).then(t=>(o({type:"BLOCKING_ACTIONS_UPDATED",payload:{boardId:e,blockingActions:t}}),t)),[]),r=(0,i.useMemo)(()=>({blockingActions:t,fetchBlockingActions:n}),[t,n]);return(0,l.jsx)(d,{value:r,children:e})}},564153(e,t,o){o.d(t,{A:()=>x});var i=o(706466),n=o(510009),r=o(61163),s=o(859471),a=o(19821),l=o(923142),d=o(538329),c=o(284247),u=o(971289),p=o(562615);function h(e,t,o){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class _ extends s.Component{constructor(...e){super(...e),h(this,"state",{hiding:!1,visible:!1}),h(this,"handleHide",()=>{this.setState({hiding:!0}),this.timeout=window.setTimeout(this.props.onHide,200)}),h(this,"handleMouseEnter",()=>{window.clearTimeout(this.timeout)}),h(this,"handleMouseLeave",()=>{this.timeout=window.setTimeout(this.handleHide,this.props.duration||2e3)})}componentDidMount(){this.toastText&&(window.setTimeout(()=>{this.setState({visible:!0})},100),this.timeout=window.setTimeout(this.handleHide,this.props.duration||2e3))}get toastText(){let{actionType:e,actionStatus:t,location:o}=this.props,{isSection:i,name:n}=o,r="completed"===t;switch(e){case"create_section":return r?this.props.i18n.bt("Created section", "Created section", "toast text to indicate a section has been created successfully", undefined, true):this.props.i18n.bt("Creating section", "Creating section", "toast text to indicate a section is being created", undefined, true);case"delete_pins":if(i)return r?(0,c.A)(this.props.i18n.bt("Deleted Pins from {{sectionName}}", "Deleted Pins from {{sectionName}}", "toast text to notify Pins have been deleted from a section", undefined, true),{sectionName:n}):(0,c.A)(this.props.i18n.bt("Deleting Pins from {{sectionName}}", "Deleting Pins from {{sectionName}}", "toast text to notify Pins are being deleted from a section", undefined, true),{sectionName:n});return r?(0,c.A)(this.props.i18n.bt("Deleted Pins from {{boardName}}", "Deleted Pins from {{boardName}}", "toast text to notify Pins have been deleted from a board", undefined, true),{boardName:n}):(0,c.A)(this.props.i18n.bt("Deleting Pins from {{boardName}}", "Deleting Pins from {{boardName}}", "toast text to notify Pins are being deleted from a board", undefined, true),{boardName:n});case"move_pins":if(i)return r?(0,c.A)(this.props.i18n.bt("Moved to {{sectionName}}", "Moved to {{sectionName}}", "toast text to notify pins have been moved to this section", undefined, true),{sectionName:n}):(0,c.A)(this.props.i18n.bt("Moving to {{sectionName}}", "Moving to {{sectionName}}", "toast text to notify pins are being moved to this section", undefined, true),{sectionName:n});return r?(0,c.A)(this.props.i18n.bt("Moved to {{boardName}}", "Moved to {{boardName}}", "toast text to notify pins have been moved to this board", undefined, true),{boardName:n}):(0,c.A)(this.props.i18n.bt("Moving to {{boardName}}", "Moving to {{boardName}}", "toast text to notify pins are being moved to this board", undefined, true),{boardName:n});case"merge":if(i)return r?(0,c.A)(this.props.i18n.bt("Moved to {{sectionName}}", "Moved to {{sectionName}}", "toast text to notify another section has been merged to this section", undefined, true),{sectionName:n}):(0,c.A)(this.props.i18n.bt("Moving to {{sectionName}}", "Moving to {{sectionName}}", "toast text to notify another section is being merged to this section", undefined, true),{sectionName:n});return r?(0,c.A)(this.props.i18n.bt("Moved to {{boardName}}", "Moved to {{boardName}}", "toast text to notify another board has been merged to this board", undefined, true),{boardName:n}):(0,c.A)(this.props.i18n.bt("Moving to {{boardName}}", "Moving to {{boardName}}", "toast text to notify another board is being merged to this board", undefined, true),{boardName:n});default:return null}}render(){let{actionStatus:e,deviceType:t}=this.props,{visible:o,hiding:i}=this.state,{toastText:n}=this,{marginTop:r,opacity:s,position:d,pointerEvents:c,transform:u,transition:h,visibility:_}=(0,l.A)({deviceType:t,hiding:i,visible:o});return n?(0,p.jsx)(a.az,{dangerouslySetInlineStyle:{__style:{transform:u,transition:h,visibility:_,pointerEvents:c}},marginTop:r,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,opacity:s,position:d,children:(0,p.jsx)(a.y8,{text:n,type:"completed"===e?"default":"progress"})}):null}}function m(e){(0,s.useEffect)(()=>{(0,r.A)("BoardBlockingActionToast","/app/www/BlockingActionsContext/BoardBlockingActionToast.tsx")},[]);let t=(0,u.Ay)(),o=(0,d.A)();return(0,p.jsx)(_,{...e,deviceType:t,i18n:o})}let f=["merge","move_pins","create_section"],g=0,b={},y=(e,t,o,i)=>({hideToast:n})=>(0,p.jsx)(m,{actionStatus:e,actionType:t,duration:2e3,location:{name:i?i.title??"":o.name??"",isSection:!!i},onHide:n});function x(){let{showToast:e}=(0,i.CG)(),{fetchBlockingActions:t}=(0,n.N)()??{fetchBlockingActions:e=>new Promise(e=>e([]))};return{showBlockingActionToast:({actionType:o,board:i,section:n})=>{e(y("inProgress",o,i,n)),function({check:e,checkDelay:t,checkInterval:o,onComplete:i}){let n=`timeout${g}`;g+=1;let r=()=>{let t=Date.now();e().then(e=>{let s=Date.now()-t;e?(i(),delete b[n]):b[n]=setTimeout(r,Math.max(1e3,o-s))}).catch(()=>{delete b[n]})};b[n]=setTimeout(r,t)}({check:()=>t(i.id).then(e=>!function({blockingActions:e,actionType:t,boardId:o,sectionId:i}){return e.find(e=>(function(e){switch(e){case 22:return"delete_board";case 7172:case 7173:return"merge";case 900:case 7158:case 7109:return"delete_pins";case 901:case 7108:return"move_pins";case 7100:return"create_section";case 7102:return"delete_section";default:return null}})(e.action_type??0)===t&&!(f.includes(String(e.action_type))&&e.is_origin)&&e.board_id===o&&(i?i===e.section_id:!e.section_id||"-1"===e.section_id)&&1!==e.progress)}({blockingActions:e,actionType:o,boardId:i.id,sectionId:n&&n.id})),checkDelay:2e3,checkInterval:5e3,onComplete:()=>e(y("completed",o,i,n))})}}}},427326(e,t,o){o.d(t,{Sd:()=>i,p$:()=>n,th:()=>r});let i=(e,t)=>{let o="object"==typeof t?.owner?t.owner?.id:t?.owner;return e.isAuth&&o===e.id},n=(e,t)=>!!(e.isAuth&&t.collaborated_by_me),r=(e,t)=>i(e,t)?3069:3070},424857(e,t,o){function i(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function n(e,t){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:t}}}o.d(t,{I4:()=>i,X2:()=>r,vb:()=>n});let r=(e,t)=>({type:"BOARD_SECTION_EDIT",payload:t})},349194(e,t,o){o.d(t,{A:()=>d});var i=o(257300),n=o(703672),r=o(424857),s=o(936751),a=o(513010),l=o(504252);function d(e,t,o){return d=>(0,i.A)({url:"/v3/board/sections/{source_section}/merge/{target_section}/",urlParams:{source_section:t,target_section:o},method:"POST",data:{fields:["boardsection.id","boardsection.board()","board.id","board.blocking_actions"]}}).then(i=>Promise.all([d((0,r.vb)(e,t)),d((0,n.Q5)("BoardSectionsRepinResource",{board_id:e})),d((0,s.A)(o)),d((0,a.eO)(l.A.BOARD_SECTION_PINS,o))]).then(()=>i))}},315032(e,t,o){o.d(t,{A:()=>y});var i=o(61163),n=o(859471),r=o(19821),s=o(227835),a=o(693154),l=o(538329),d=o(430705),c=o(930750),u=o(971289),p=o(870540),h=o(847753),_=o(937176),m=o(280027),f=o(8627),g=o(360320),b=o(562615);function y(e){(0,n.useEffect)(()=>{(0,i.A)("BoardExpandedSections","/app/www/save/board/BoardDefaultTabContent/BoardExpandedSections.tsx")},[]);let t=(0,u.qJ)(),o=(0,a.A)(),y=(0,l.A)(),x=(0,p.A)(),v=(0,h.H7)(o,x),{board:A,onLoadedAll:w,viewParameter:P}=e,{id:j,pin_count:S,privacy:z}=A,I=(0,m.A)(A),{data:C,isAtEnd:B,isFetching:T,isLoaded:E}=(0,d.A)({name:"ApiResource",options:{data:{fields:["pin.cacheable_id","pin.created_at","pin.description","pin.domain","pin.grid_title","pin.id","pin.is_downstream_promotion","pin.is_playable","pin.is_repin","pin.is_uploaded","pin.is_video","pin.images[170x,136x136,236x,474x,736x,orig]","pin.link","pin.price_currency","pin.price_value","pin.rich_summary()","pin.repin_count","pin.title","pin.type"]},url:`/v3/board/${j}/expanded_sections/`,redux_normalize_feed:!0,...(0,s.A)(z)&&v?{orbac_subject_id:v}:{}}});if((0,n.useEffect)(()=>{B&&w()},[B,w]),!E)return(0,b.jsx)(r.y$,{accessibilityLabel:y.bt("Board sections loading spinner", "Board sections loading spinner", " - ", undefined, true),show:!0});let D=(0,c.A)(C||[]),M={loadNext:()=>void 0,hasNext:B,isLoadingNext:T,refetch:()=>void 0};return(0,b.jsx)(r.az,{"data-test-id":"board-expanded-sections",id:"board-expanded-sections-wrapper",paddingX:t?2:1,width:"100%",children:D.map((e,o)=>{if(Array.isArray(e)){let t=`board-expanded-sections-feed-${o}`;return(0,b.jsx)(g.A,{feedItems:e,feedKey:`board-expanded-sections:${j}`,pagination:M,renderFeedItem:(e,t)=>(0,b.jsx)(f.A,{children:(0,b.jsx)(_.A,{auxData:{board_id:j,board_pin_count:S??0},parentPinKey:null,pinKey:{type:"Legacy",data:e},slotIndex:t,surface:I?"FeaturedBoardPinGrid":"BaseBoardPinGrid",viewParameter:P,viewType:164})})},t)}return"story"===e.type&&"board_expanded_section_title"===e.story_type?(0,b.jsxs)(r.az,{marginBottom:t?4:2,marginTop:t?8:4,paddingX:t?3:1,children:[(0,b.jsx)(r._Y,{size:t?"600":"400",children:e.title?.format??""}),e.description?.format?(0,b.jsx)(r.az,{marginTop:2,children:(0,b.jsx)(r.KJ,{size:t?"300":"100",children:e.description.format})}):null]},`board-expanded-sections-story-${e.id}`):null})})}},102593(e,t,o){o.d(t,{A:()=>eh});var i=o(859471),n=o(19821),r=o(586733),s=o(948641),a=o(411805),l=o(693154),d=o(971289),c=o(306783),u=o(189851),p=o(61163),h=o(538329),_=o(706114),m=o(998556),f=o(427326),g=o(562615);function b(e,t,o){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}let y=Object.freeze({}),x={custom:11566,newest:11564,oldest:11565,most_comments:11563,most_reactions:11562,by_pinner:11561};class v extends i.Component{constructor(...e){super(...e),b(this,"handleChange",({event:e,value:t})=>{let{onChange:o,viewer:i,board:n}=this.props;e.stopPropagation(),window.scrollTo({top:0,left:0,behavior:"smooth"}),((e,t,o)=>{if(!e.isAuth)return;let i=m.Ay.getItem(_.OR)||y,n=i[e.id]||{},r={...i,[e.id]:{...n,[t.id]:o}};m.Ay.setItem(_.OR,r)})(i,n,t),o&&o(t),this.props.logContextEvent({event_type:101,view_type:5,view_parameter:(0,f.th)(i,n),component:13475,element:x[t],aux_data:{board_id:n.id}})}),b(this,"logDropdownClick",()=>{let{board:e,viewer:t}=this.props;this.props.logContextEvent({event_type:101,view_type:5,view_parameter:(0,f.th)(t,e),component:13486,element:11567,aux_data:{board_id:e.id}})}),b(this,"handleKeyPress",e=>{let{charCode:t=0}=e;32===t&&(e.preventDefault(),this.logDropdownClick())})}render(){let{currentView:e}=this.props,t=[{value:"custom",label:this.props.i18n.bt("Custom", "Custom", "Option for users to filter their Pins in a custom order (as it currently is)", undefined, true)},{value:"most_reactions",label:this.props.i18n.bt("Most reactions", "Most reactions", "Option for users to filter their Pins by the most reactions", undefined, true)}];return(0,g.jsx)("div",{onClick:this.logDropdownClick,onKeyPress:this.handleKeyPress,role:"listbox",tabIndex:0,children:(0,g.jsx)(n.Bq,{id:"gbFilterSelectlist",onChange:this.handleChange,size:"lg",value:e,children:t.map(e=>(0,g.jsx)(n.Bq.Option,{...e},e.label))})})}}let A=function(e){let{logContextEvent:t}=(0,r.o)(),o=(0,h.A)();return(0,g.jsx)(v,{...e,i18n:o,logContextEvent:t})};var w=o(581530),P=o(430705);function j({selected:e}){(0,i.useEffect)(()=>{(0,p.A)("DensityIcons","/app/www/save/board/PinRepViewSelector/DensityIcons.tsx")},[]);let t=(0,h.A)();return(0,g.jsx)(n.In,{accessibilityLabel:t.bt("Dense", "Dense", "Label for selecting the dense pin density view", undefined, true),color:e?"default":"subtle",icon:"view-type-dense",size:24})}function S({selected:e}){(0,i.useEffect)(()=>{(0,p.A)("DensityIcons","/app/www/save/board/PinRepViewSelector/DensityIcons.tsx")},[]);let t=(0,h.A)();return(0,g.jsx)(n.In,{accessibilityLabel:t.bt("Normal", "Regular", "Label for selecting the regular pin density view", undefined, true),color:e?"default":"subtle",icon:"view-type-default",size:24})}var z=o(524833),I=o(530597);class C extends i.Component{constructor(...e){var t,o,i;super(...e),t="handleItemChange",o=({activeIndex:e})=>{let{viewType:t,component:o,pinView:i,logContextEvent:n}=this.props,r=0===e?"regular":"dense";(0,z.A)({boardDensity:r,component:o,viewType:t},n),(0,I.A)({density:r,surface:i}),"board"===i?this.props.updateBoardPinDensity?.(r):this.props.updateProfilePinDensity?.(r)},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[t]=o}componentDidUpdate(){let{metadata:e,pinView:t,updatedBoardPinDensity:o,updateBoardPinDensity:i,updateProfilePinDensity:n}=this.props;if(e&&e.data&&""===o){let{profile_pin_rep_view_type:o,board_pin_rep_view_type:r}=e.data;"board"===t&&(o?i?.(o):i?.("regular")),"profile"===t&&(r?n?.(r):n?.("regular"))}}render(){let{metadata:e,updatedBoardPinDensity:t}=this.props;return e&&e.data?(0,g.jsx)("div",{className:"OwnBoardSelector",children:(0,g.jsx)(n.Iz,{items:[(0,g.jsx)(S,{selected:"regular"===t}),(0,g.jsx)(j,{selected:"dense"===t})],onChange:this.handleItemChange,responsive:!0,selectedItemIndex:+("dense"===t)})}):null}}function B(e){(0,i.useEffect)(()=>{(0,p.A)("PinRepViewSelector","/app/www/save/board/PinRepViewSelector/PinRepViewSelector.tsx")},[]);let t=(0,c.WO)(),{logContextEvent:o}=(0,r.o)(),n=(0,l.A)(),s=(0,P.A)({name:"UserMetadataResource",options:{user:{id:n.isAuth?n.username:""}},noCache:!0}),a=("board"===e.pinView?t?.boardPinDensity:t?.profilePinDensity)??"";return(0,g.jsx)(C,{...e,logContextEvent:o,metadata:s,updateBoardPinDensity:t?.setBoardPinDensity,updatedBoardPinDensity:a,updateProfilePinDensity:t?.setProfilePinDensity})}function T({board:e,currentView:t,inBoardOrganizationMode:o,onContentViewChange:r,onOrganizeClick:s,pinCount:a,showSortOptions:d}){(0,i.useEffect)(()=>{(0,p.A)("BoardPinsActionBar","/app/www/save/board/BoardDefaultTabContent/BoardPinsActionBar.tsx")},[]);let c=(0,h.A)(),u=(0,l.A)();return(0,g.jsxs)(n.az,{alignItems:"center",direction:"row",display:"flex",marginEnd:-1,marginStart:-1,children:[(0,g.jsx)(n.az,{flex:"grow",paddingX:1,children:(0,g.jsx)(n._Y,{children:c.bt("Pins", "Pins", "Heading for Pins outside of board sections on board page", undefined, true)})}),d&&a<=500&&(0,g.jsx)(n.az,{paddingX:2,children:(0,g.jsx)(A,{board:e,currentView:t,onChange:r,viewer:u})}),a>=w.r$&&(0,g.jsxs)(i.Fragment,{children:[a>=w.N&&(0,g.jsx)(B,{component:13183,pinView:"board",viewType:5}),!o&&(0,g.jsx)(n.az,{paddingX:2,children:(0,g.jsx)(n.$n,{fullWidth:!0,onClick:s,text:c.bt("Organise", "Organize", "The board organization button", undefined, true)})})]})]})}var E=o(106386),D=o(227835),M=o(364107),O=o(870540),N=o(847753),k=o(257300),R=o(513010),L=o(504252),H=o(315032),$=o(857954),F=o(894124),K=o(840200),W=o(210909),V=o(385800),U=o(816495),X=o(685220);function Y(e,t,o){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function G(e){let{allowReordering:t,board:o,canEdit:i,display:r,dragDrop:s,index:a,isDragging:l,oneTapMovePinsHandler:d,onShowEditSectionModal:c,organizeMode:u,section:p}=e,h=s&&s.target;return(0,g.jsx)(n.az,{height:"100%",children:(0,g.jsx)(V.e,{children:({focused:e,hovered:n,onBlur:s,onFocus:_,onMouseEnter:m,onMouseLeave:f})=>(0,g.jsx)(U.A,{allowReordering:t,board:o,boardSection:p,canEdit:i,display:r,focused:e,hovered:n,inOrganizationMode:u,isDragging:l,isMergeTarget:!!h&&"merge"===h.action&&a===h.index,onBlur:e=>{let{currentTarget:t}=e;setTimeout(()=>{t.contains(document.activeElement)||s()},0)},oneTapMovePinsHandler:d,onFocus:_,onMouseEnter:m,onMouseLeave:f,onShowEditSectionModal:c})})})}function J(e){let{allowReordering:t,board:o,canEdit:i,dragDrop:r,handleSectionDragBegin:s,handleSectionDragEnd:l,handleSectionDragHover:d,isDragging:u,isDragWithinBounds:p,oneTapMovePinsHandler:h,onShowEditSectionModal:_,organizeMode:m,sections:f}=e,{experimentalGutter:b}=(0,a.A)(),y=(0,c.WO)()?.boardPinDensity??"",x=(0,X.k4)(y);return(0,g.jsx)(W.default,{cacheKey:`board-boardsections:${o.id}`,columnWidth:x,gutterWidth:b,items:f,layout:"flexible",minCols:2,renderItem:({data:e,itemIdx:a})=>{let c=(0,g.jsx)(G,{allowReordering:t,board:o,canEdit:i,display:"responsive",dragDrop:r,index:a,isDragging:u,oneTapMovePinsHandler:h,onShowEditSectionModal:_,organizeMode:m,section:e});return(0,g.jsx)(n.az,{height:"100%",children:t?(0,g.jsx)($.A,{index:a,onDragBegin:s,onDragEnd:l,onDragHover:d,type:$.x.Section,children:(0,g.jsx)("div",{style:{opacity:u&&!p?.5:1},children:c})}):(0,g.jsx)(n.az,{height:"100%",children:c})},e.id)}})}class q extends i.Component{constructor(...e){super(...e),Y(this,"state",{dragDrop:null,sectionIds:this.props.sections.map(e=>e.id??"")}),Y(this,"cancelHoverTimeout",()=>{let{dragHoverTimeout:e}=this;e&&clearTimeout(e.timeoutId),this.dragHoverTimeout=null}),Y(this,"dragHoverTimeout",null),Y(this,"isDragging",()=>!!this.state.dragDrop),Y(this,"handleSectionDragBegin",e=>{this.setState({dragDrop:{previewIndex:e,sourceIndex:e,target:null}})}),Y(this,"handleSectionDragHover",(e,t)=>{var o;let{dragDrop:i}=this.state,n=this.props.allowReordering;if(!t||!i)return;let{previewIndex:r}=i,s=function({hoverRelativePosition:{positionRelativeToCenter:{x:e},boundingBox:{width:t}},centerEnabled:o}){return Math.abs(e)<(o?.5*t:0)/2?"center":e<0?"left":"right"}({hoverRelativePosition:t,centerEnabled:e!==r&&n}),a={itemIndex:e,regionWithinItem:s};if(this.dragHoverTimeout&&(o=this.dragHoverTimeout.hoverLocation,a.itemIndex===o.itemIndex&&a.regionWithinItem===o.regionWithinItem))return;this.cancelHoverTimeout();let l="center"===s?"merge":"reorder",d={action:l,index:function({hoverLocation:{itemIndex:e,regionWithinItem:t},sourceIndex:o}){if("center"===t||e===o)return e;let i="left"===t;return e<o===i?e:i?e-1:e+1}({hoverLocation:a,sourceIndex:r})};if(d.index===r){i.target&&i.target.index!==d.index&&this.setState({dragDrop:{...i,target:d}});return}this.dragHoverTimeout={hoverLocation:a,timeoutId:setTimeout(()=>{this.dragHoverTimeout=null,"reorder"===l?this.setState(({dragDrop:e,sectionIds:t})=>({dragDrop:{...e,target:d,previewIndex:d.index},sectionIds:(0,M.A)(t,r,d.index)})):this.setState(({dragDrop:e})=>({dragDrop:{...e,target:d}}))},"reorder"===l?200:20)}}),Y(this,"handleSectionDragEnd",e=>{let{sections:t,onShowMergeSectionsConfirmationModal:o,onSectionReorder:i}=this.props,{dragDrop:n,sectionIds:r}=this.state,s=n&&n.target;if(this.cancelHoverTimeout(),!e||!n||!s||s.index===n.sourceIndex)return void this.setState({dragDrop:null,sectionIds:t.map(e=>e.id??"")});let{previewIndex:a,sourceIndex:l}=n,{action:d,index:c}=s;if(this.setState({dragDrop:null}),"merge"===d){let e=e=>{let o=r[e];return o&&t.find(({id:e})=>e===o)},i=e(a),n=e(c);i&&n&&o(i,n)}else i(l,c)})}componentDidUpdate(e){let{sections:t}=e,{sections:o}=this.props,i=e=>e.map(({id:e})=>e).join(",");if(t.length!==o.length&&i(t)!==i(o)){this.cancelHoverTimeout();let e=o.map(e=>e.id??"");this.setState({dragDrop:null,sectionIds:e})}}componentWillUnmount(){this.cancelHoverTimeout()}render(){let{allowReordering:e,connectDropTarget:t,isDragWithinBounds:o,sections:i}=this.props,{sectionIds:r}=this.state,s=this.isDragging(),a=i.reduce((e,t)=>t.id?{...e,[t.id]:t}:e,{}),l=(0,g.jsx)(J,{allowReordering:e,board:this.props.board,canEdit:this.props.canEdit,dragDrop:this.state.dragDrop,handleSectionDragBegin:this.handleSectionDragBegin,handleSectionDragEnd:this.handleSectionDragEnd,handleSectionDragHover:this.handleSectionDragHover,isDragging:s,isDragWithinBounds:o??!1,oneTapMovePinsHandler:this.props.oneTapMovePinsHandler,onShowEditSectionModal:this.props.onShowEditSectionModal,organizeMode:this.props.organizeMode,sections:r.map(e=>a[e]).filter(e=>!!e)});return(0,g.jsxs)(n.az,{width:"100%",children:[e&&t?t((0,g.jsx)("div",{children:l})):l,s&&(0,g.jsx)(F.A,{})]})}}let Q=(0,K.A)($.x.Section)(q);function Z(e){(0,i.useEffect)(()=>{(0,p.A)("BoardSectionList","/app/www/save/board/BoardDefaultTabContent/BoardSectionList.tsx")},[]);let t=(0,h.A)(),{allowReordering:o,fetchMore:r,isAtEnd:s,isFetching:a}=e;return(0,g.jsxs)(n.az,{width:"100%",children:[(0,g.jsx)(n.WY,{fetchMore:r,isAtEnd:s,isFetching:a}),o?(0,g.jsx)(Q,{...e}):(0,g.jsx)(q,{...e}),a&&!s&&(0,g.jsx)(n.az,{paddingY:6,position:"relative",children:(0,g.jsx)(n.y$,{accessibilityLabel:t.bt("Loading sections", "Loading sections", "loading state for board sections", undefined, true),show:!0})})]})}class ee extends i.Component{constructor(...e){var t,o,i;super(...e),t="handleSectionReorder",o=(e,t)=>{let{board:o,dispatch:i,enableReordering:n,sections:r,viewParameter:s}=this.props;if(!n)return;let a=r[e].id,l=r[t].id,d=(0,M.A)(r,e,t).map(e=>e.id),c=d.indexOf(a),u=e=>e>=0&&e<d.length,p={boardId:o.id,sourceSectionId:a,targetSectionId:l,...u(c+1)?{sectionIdAfter:d[c+1]}:{},...u(c-1)?{sectionIdBefore:d[c-1]}:{}},h={object_id_str:a,view_type:5,view_parameter:s};i(e=>{let{boardId:t,sectionIdBefore:o,sectionIdAfter:i,sourceSectionId:n,targetSectionId:r}=p;e((0,R.kl)({feedType:L.A.BOARD_SECTIONS,feedId:t,itemType:"boardsection",sourceItemId:n,targetItemId:r}));let s=Object.freeze({});return o&&(s={...s,section_before:o}),i&&(s={...s,section_after:i}),(0,k.A)({url:"/v3/board/sections/{section}/reorder/",urlParams:{section:n},method:"POST",data:s})}).then(()=>this.props.logContextEvent({event_type:7133,...h}))},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[t]=o}componentDidMount(){(0,p.A)("BoardSections","/app/www/save/board/BoardDefaultTabContent/BoardSections.tsx");let{sectionsInvalidated:e,onLoadedAll:t,sectionsResource:{isFetching:o,refresh:i,isAtEnd:n}}=this.props;e&&!o&&i(),n&&t()}componentDidUpdate(e){let{sectionsInvalidated:t,sectionsResource:o}=e,{sectionsInvalidated:i,isFetching:n,refreshData:r,sectionsResource:s}=this.props;!i||t||n||r(),!o.isAtEnd&&s.isAtEnd&&this.props.onLoadedAll()}render(){let{board:e,enableReordering:t,i18n:o,inBoardOrganizationMode:i,oneTapMovePinsHandler:r,onShowEditSectionModal:s,onShowMergeSectionsConfirmationModal:a,sections:l,sectionsResource:d,viewer:c,orbacActingAs:u}=this.props,{access:p,owner:h}=e,{isLoaded:_,isFetching:m,fetchMore:f,isAtEnd:b}=d;if(!_)return o.bt("Board sections loading spinner", "Board sections loading spinner", "BoardPage.BoardSections.loadingSpinner", undefined, true),(0,g.jsx)(n.y$,{accessibilityLabel:o.bt("Board sections loading spinner", "Board sections loading spinner", " - ", undefined, true),show:!0});let y=(p||[]).includes("write")||(0,N.Nn)(c,h?.id||"",u);return(0,g.jsx)(n.so,{alignItems:"stretch",justifyContent:"center",children:(0,g.jsx)(Z,{allowReordering:t,board:e,canEdit:y,fetchMore:f,isAtEnd:b,isFetching:m,oneTapMovePinsHandler:r,onSectionReorder:this.handleSectionReorder,onShowEditSectionModal:s,onShowMergeSectionsConfirmationModal:a,organizeMode:i,sections:l})})}}function et(e){let{logContextEvent:t}=(0,r.o)(),o=(0,h.A)(),i=(0,l.A)(),n=(0,O.A)(),s=(0,N.H7)(i,n),{board:a}=e,{id:d,privacy:c}=a,u=(0,P.A)({name:"BoardSectionsResource",options:{board_id:d,redux_normalize_feed:!0,...(0,D.A)(c)&&s?{orbac_subject_id:s}:{}}}),p=(0,E.d4)(e=>e.feeds[`${L.A.BOARD_SECTIONS}:${d}`]),_=(0,E.d4)(e=>(p||[]).reduce((t,o)=>"boardsection"===o.type&&e.boardsections[o.id]?t.concat([e.boardsections[o.id]]):t,[])),m=null===p,f=(0,E.wA)(),b=i.isAuth&&a.owner?.id===i.id||a.collaborated_by_me;return!(0,D.A)(c)||s||b?(0,g.jsx)(ee,{...e,dispatch:f,i18n:o,logContextEvent:t,orbacActingAs:n,sections:_,sectionsInvalidated:m,sectionsResource:u,viewer:i}):null}function eo(e){(0,i.useEffect)(()=>{(0,p.A)("BoardSections","/app/www/save/board/BoardDefaultTabContent/BoardSections.tsx")},[]);let t=(0,l.A)(),o=(0,O.A)(),{board:n,isBoardPreviewMode:r}=e,{access:s,featured_board_metadata:a,owner:d}=n||{},{has_expanded_sections:c}=a||{},u=(s||[]).includes("write")||(0,N.Nn)(t,d?.id||"",o);return c&&(!u||r)?(0,g.jsx)(H.A,{...e}):(0,g.jsx)(et,{...e})}var ei=o(191350),en=o(448545),er=o(47436),es=o(659664);function ea(e){let t=(0,l.A)(),o=(0,O.A)(),i=(0,N.H7)(t,o),{board:n,currentView:r,currentFilter:s,viewer:a}=e,d=(0,P.A)({name:"BoardFeedResource",options:(0,en.R)(n,a,r,s,i),noCache:n.owner.username===a.username||n.collaborated_by_me}),c=(0,E.d4)(({feeds:t,desktopStories:o})=>(0,es.A)(t[`${L.A.BOARDFEED}:${e.board.id}`],o));return(0,g.jsx)(er.A,{...e,...c,resource:d})}ea.displayName="BoardSectionlessPinGrid";var el=o(113314),ed=o(502376),ec=o(873480),eu=o(211592),ep=o(929440);function eh({actions:e,board:t,bulkEditSelectedPins:o,currentFilter:p,currentView:h,displayActionBar:_,enableReordering:m,inBoardOrganizationMode:f,inSectionOrganizationMode:b,inSelectAll:y,isBoardPreviewMode:x,isOwnBoard:v,isPinGridSorted:A,onBulkEditPinClick:P,onContentViewChange:j,oneTapMovePinsHandler:S,onShowEditSectionModal:z,onShowMergeSectionsConfirmationModal:I,refreshFilteredFeed:C,viewParameter:B}){let E=(0,u.oW)()(t.id),D=(E?E.section_count:t.section_count)||0,M=(0,c.WO)()?.boardPinDensity,{logContextEvent:O}=(0,r.o)(),[N,k]=(0,i.useState)(0===D),R=(0,s.A)(),L=(0,el.A)(t.url),H=(0,l.A)(),$=(0,d.Ay)(),{experimentalGutter:F}=(0,a.A)(),{is_collaborative:K,pin_count:W}=t,V=(t.access||[]).includes("write"),U=v||t.collaborated_by_me,X=!!("number"==typeof W&&W>=w.IT&&K&&U);return(0,g.jsxs)(n.az,{marginBottom:12,children:[(0,g.jsx)(ei.A,{setMaxWidth:!1,children:(0,g.jsxs)(n.az,{children:[D>0&&(!p||-1===p)&&(0,g.jsx)(eo,{board:t,enableReordering:m,inBoardOrganizationMode:!!f,isBoardPreviewMode:x,oneTapMovePinsHandler:S,onLoadedAll:()=>k(!0),onShowEditSectionModal:z,onShowMergeSectionsConfirmationModal:I,viewParameter:B}),_&&N&&U&&D>0&&(0,g.jsx)(T,{board:t,currentView:h,inBoardOrganizationMode:f,onContentViewChange:j,onOrganizeClick:()=>{if(R)return void R();let{onBoardOrganizeClick:t}=e;O({event_type:101,component:69,element:400,view_type:5}),t&&t(!0)},pinCount:W??0,showSortOptions:X})]})}),"desktop"===$&&N&&(0,g.jsx)(n.az,{dangerouslySetInlineStyle:{__style:{paddingBottom:"8px"}},"data-test-id":"board-feed",paddingX:0,position:"relative",children:(0,g.jsx)(ea,{board:t,bulkEditSelectedPins:o,currentFilter:p,currentView:h,denseViewSelected:V&&"dense"===M,inBoardOrganizationMode:f,inSectionOrganizationMode:b,inSelectAll:y,isOwnBoard:v,isPinGridSorted:A,onBulkEditPinClick:P,refreshFilteredFeed:C,renderBoardShopModule:(e,t=!1)=>(0,g.jsx)(n.az,{dangerouslySetInlineStyle:{__style:F?{paddingLeft:F,paddingRight:F}:{}},marginBottom:6,children:(0,g.jsx)(ed.A,{isTopVariant:t,storyId:e})}),renderFeaturedBoardsStory:e=>(0,g.jsx)(n.az,{marginBottom:6,children:(0,g.jsx)(ec.A,{isOwnBoard:v,storyId:e})}),renderFooterStory:e=>f||t.archived_by_me_at||!U?null:(0,g.jsx)(n.az,{marginBottom:6,children:(0,g.jsx)(ei.A,{children:(0,g.jsx)(ep.A,{collection:t,storyId:e,url:L})})}),renderMoreIdeas:e=>U?null:(0,g.jsx)(n.az,{marginBottom:6,children:(0,g.jsx)(eu.default,{storyId:e})}),viewer:H,viewParameter:B})})]})}},956083(e,t,o){o.d(t,{A:()=>u});var i=o(859471),n=o(106386),r=o(586733),s=o(948641),a=o(900303),l=o(538329),d=o(564153),c=o(349194);function u({board:e}){let{logContextEvent:t}=(0,r.o)(),o=(0,l.A)(),[u,p]=(0,i.useState)(null),h=(0,n.wA)(),{showBlockingActionToast:_}=(0,d.A)(),m=(0,s.A)();return{handleShowMergeSectionsConfirmationModal:(e,t)=>{m?m():p({source:e,target:t})},mergeConfirmationModalProps:u,onConfirm:()=>{if(m)return void m();if(!u)return;let{source:i,target:n}=u;p(null),t({event_type:7173,object_id_str:i.id,aux_data:{merge_flow:"dnd"}}),h((0,c.A)(e.id,i.id??"",n.id??"")).then(()=>{_({actionType:"merge",board:e,section:n})}).catch(e=>{a.A.showError(e.message||o.bt("Failed to merge sections", "Failed to merge sections", "useSectionMergeAction.errorMessage", undefined, true))})}}}},448545(e,t,o){o.d(t,{R:()=>i});function i(e,t,o,i,n){let{owner:r}=e,s=r?.id===t.id,a="react_grid_pin";return t.isPartner&&s&&(a="partner_react_grid_pin"),{board_id:e.id,board_url:e.url??"",currentFilter:i,field_set_key:a,filter_section_pins:!i||-1===i,sort:"most_reactions"===o?"most_reactions":"default",layout:e.layout??"",page_size:25,redux_normalize_feed:!0,...n?{orbac_subject_id:n}:Object.freeze({})}}},191350(e,t,o){o.d(t,{A:()=>a});var i=o(61163),n=o(859471),r=o(19821),s=o(562615);function a({children:e,setMaxWidth:t=!0}){return(0,n.useEffect)(()=>{(0,i.A)("BoardPageLayoutWrap","/app/www/save/board/BoardPageLayoutWrap.tsx")},[]),(0,s.jsx)(r.so,{alignItems:"stretch",justifyContent:"center",width:"100%",children:t?(0,s.jsx)(r.az,{maxWidth:774,paddingX:2,width:"100%",children:e}):(0,s.jsx)(r.az,{width:"100%",children:e})})}},816495(e,t,o){o.d(t,{A:()=>w});var i=o(61163),n=o(859471),r=o(19821),s=o(227835),a=o(693154),l=o(538329),d=o(870540),c=o(847753),u=o(306783),p=o(284247),h=o(562615);let _=e=>{(0,n.useEffect)(()=>{(0,i.A)("OneTapMovePill","/app/www/save/board/BoardSectionCard/OneTapMovePill.tsx")},[]);let t=(0,l.A)(),{numberOfSelectedPins:o}=e;return(0,h.jsx)(r.az,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:(0,h.jsx)(r.az,{color:"default",padding:3,rounding:"pill",children:(0,h.jsx)(r.KJ,{weight:"bold",children:(0,p.A)(t.nbt(["Move {{ count }} Pin here", "Move {{ count }} Pins here"], o, "Call to action overlay on a section to move selected Pins", true),{count:o})})})})};var m=o(685220);function f({display:e,isHovered:t,mode:o,pins:s}){(0,n.useEffect)(()=>{(0,i.A)("SectionPreviewPinList","/app/www/save/board/BoardSectionCard/SectionPreviewPinList.tsx")},[]);let a=(0,m.nc)(o),l="dense"===o,d=l?m.$_.compact:m.$_.wide,c=l?m.m.compact:m.m.wide,u=(0,m.k4)(o),p=Array.from(Array(a),(t,o)=>{let i=o===a-1,{description:n,image_large_url:l,image_large_size_pixels:p,image_medium_url:_,image_medium_size_pixels:m}=s[o]||{},f=n?n.trim():"",g=_??l;return(0,h.jsx)(r.az,{dangerouslySetInlineStyle:{__style:{paddingRight:i?void 0:1}},"data-test-id":f?"pin-with-alt-text":"pin-missing-alt-text",width:"responsive"===e?`${c/u*100}%`:c,children:(0,h.jsx)(r.az,{dangerouslySetInlineStyle:{__style:{paddingBottom:`${d/c*100}%`}},overflow:"hidden",position:"relative",width:"100%",children:(0,h.jsx)(r.az,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,h.jsx)(r.n1,{height:"responsive"===e?"100%":d,rounding:0,wash:!0,width:"responsive"===e?"100%":c,children:p&&g&&(0,h.jsx)(r._V,{alt:"",color:"transparent",fit:"cover",naturalHeight:(m?m.height:p.height)??1,naturalWidth:(m?m.width:p.width)??1,src:g})})})})},o)});return(0,h.jsx)(r.n1,{rounding:400,width:"responsive"===e?"100%":u,children:(0,h.jsxs)(r.so,{alignItems:"stretch",justifyContent:"start",children:[(0,h.jsx)(r.az,{bottom:!0,dangerouslySetInlineStyle:{__style:t?{zIndex:1,backgroundColor:"rgba(0,0,0,0.06)"}:{}},left:!0,position:"absolute",right:!0,top:!0}),p]})})}var g=o(844255),b=o(183756),y=o(542975);let x=({count:e,size:t})=>{(0,n.useEffect)(()=>{(0,i.A)("CountTexts","/app/www/save/board/CountTexts.tsx")},[]);let o=(0,l.A)(),{locale:s}=(0,g._8)(),a=(0,b.A)(),d=(0,y.vQ)(o.nbt(["{{ count }} Pin", "{{ count }} Pins"], e, "profile.ProfilePage.board.BoardCard.PinsCount", true),{count:a(s,e,{})});return(0,h.jsx)(r.az,{children:(0,h.jsx)(r.KJ,{color:"default",inline:!0,size:t,children:d})})};function v({children:e,mode:t}){return(0,h.jsx)(r._Y,{accessibilityLevel:2,lineClamp:"dense"===t?void 0:1,size:"dense"===t?"300":"400",children:e})}function A({children:e,display:t,displayEditIcon:o,href:s,mode:a,mouseCursor:d,onEditClick:c,onTouch:u,pinCount:p,title:_}){(0,n.useEffect)(()=>{(0,i.A)("SectionRep","/app/www/save/board/BoardSectionCard/SectionRep.tsx")},[]);let f=(0,l.A)(),{isRTL:b}=(0,g._8)(),y=(0,h.jsxs)(r.az,{position:"relative",width:"responsive"===t?"100%":(0,m.k4)(a),children:[e,(0,h.jsx)(r.so,{alignItems:"start",justifyContent:"between",width:"100%",children:(0,h.jsxs)(r.az,{flex:"grow",padding:2,children:[(0,h.jsx)(v,{mode:a,children:_}),(0,h.jsx)(r.az,{marginTop:1,children:(0,h.jsx)(x,{count:p,size:"100"})})]})}),s&&(0,h.jsx)(r.az,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,h.jsx)(r.$A,{fullHeight:!0,fullWidth:!0,href:s,rounding:200,children:(0,h.jsx)(r.az,{display:"visuallyHidden",height:"100%",width:"100%",children:f.bt("See Pins", "See Pins", "BoardSectionCard.SectionRep.accessibilityTextLink", undefined, true)})})}),o&&(0,h.jsx)(r.az,{bottom:!0,left:b,marginBottom:15,padding:2,position:"absolute",right:!b,children:(0,h.jsx)(r.K0,{accessibilityHaspopup:!0,accessibilityLabel:f.bt("Edit", "Edit", "BoardSectionCard.SectionRep.EditIcon", undefined, true),bgColor:"default",icon:"pencil",iconColor:"default",onClick:c,size:"sm"})})]});return u?(0,h.jsx)(r.Rp,{fullWidth:"responsive"===t,mouseCursor:d,onTap:u,rounding:400,children:y}):y}let w=e=>{let t;(0,n.useEffect)(()=>{(0,i.A)("BoardSectionCard","/app/www/save/board/BoardSectionCard/BoardSectionCard.tsx")},[]);let{board:o,boardSection:p,canEdit:m,display:g,focused:b,hovered:y,inCollageCreation:x,inOrganizationMode:v,isDragging:w,isMergeTarget:P,onBlur:j,oneTapMovePinsHandler:S,onFocus:z,onMouseEnter:I,onMouseLeave:C,onShowEditSectionModal:B}=e,T=(0,l.A)(),E=(0,a.A)(),D=(0,d.A)(),M=(0,c.H7)(E,D),O=M&&(0,s.A)(o.privacy)?`?orbac_subject_id=${M}`:"",{slug:N,title:k,preview_pins:R=[]}=p,L=(0,u.WO)()?.boardPinDensity??"",H=S&&S.numberOfSelectedPins;H&&S&&(t=()=>{S.moveToSection(p)});let $="pointer";w?$="grabbing":!H&&v&&($="grab");let F=!!m&&!w&&(y||b),K=S&&S.numberOfSelectedPins>0&&!!H&&y&&!w&&(0,h.jsx)(_,{numberOfSelectedPins:S.numberOfSelectedPins});return(0,h.jsx)(r.az,{"aria-label":T.bt("Board section", "Board section", "BoardSectionCard.ariaLabel", undefined, true),"data-test-id":`section-${p.title??""}`,onBlur:j,onFocus:z,onMouseEnter:I,onMouseLeave:C,role:"group",children:(0,h.jsx)(A,{display:g,displayEditIcon:F,href:v||x?void 0:`${o.url??""}${N??""}/${O}`,mode:L,mouseCursor:$,onEditClick:({event:e})=>{e.stopPropagation(),e.preventDefault(),B(p)},onTouch:t,pinCount:p.pin_count??0,title:k??"",children:(0,h.jsxs)(r.az,{position:"relative",children:[(0,h.jsx)(f,{display:g,isHovered:y||P||b,mode:L,pins:R??[]}),K]})})})}},685220(e,t,o){o.d(t,{$_:()=>i,k4:()=>s,m:()=>n,nc:()=>r});let i={compact:157,wide:141},n={compact:118,wide:106};function r(e){return"dense"===e?2:3}function s(e){return(("dense"===e?n.compact:n.wide)+1)*r(e)-1}},113314(e,t,o){function i(e=""){return`${e}_tools/more-ideas/`}o.d(t,{A:()=>i})},929440(e,t,o){o.d(t,{A:()=>g});var i,n=o(61163),r=o(859471),s=o(106386);o(825193);var a=o(19821),l=o(586733),d=o(535273),c=o(538329),u=o(524023),p=o(814136),h=o(562615);let _=(void 0!==i||(i=o(42011)).hash&&"f6776ff7c6fc3ce9a1f4b72a5dbaa0c2"!==i.hash&&console.error("The definition of 'MoreIdeasPreviewStory_story' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function m({pin:e}){return(0,h.jsx)(a.n1,{rounding:400,width:138,children:(0,h.jsx)(p.A,{height:207,pin:e&&"Pin"===e.__typename?{imageUrl:e.images_474x?.url??"",dominantColor:e.dominantColor??"",description:e.description??""}:null,width:138})})}function f({collection:e,storyKey:t,url:o}){(0,r.useEffect)(()=>{(0,n.A)("MoreIdeasPreviewStory","/app/www/save/board/MoreIdeasPreviewStory/MoreIdeasPreviewStory.tsx")},[]);let{logContextEvent:i}=(0,l.o)(),s=(0,c.A)(),{isHovering:p,hoverHandlers:f}=(0,u.A)(),g=(0,d.A)(_,t);if(!g)return null;let b=g.objects&&g.objects.filter(e=>"Pin"===e.__typename&&"pin"===e.type)||[];return(0,h.jsx)("div",{className:"moreIdeasOnBoard",children:(0,h.jsx)(a.$A,{fullWidth:!1,href:`${o}?ideas_referrer=${g.referringSource??""}`,onMouseEnter:f.onMouseOver,onMouseLeave:f.onMouseLeave,onTap:()=>i({event_type:101,element:10600,view_type:"boardsection"===e.type?164:5,object_id_str:e.id,view_parameter:3069}),rounding:400,children:(0,h.jsxs)(a.az,{alignItems:"start",color:p?"secondary":"default",direction:"column",display:"flex",justifyContent:"start",marginEnd:-3,paddingX:3,paddingY:2,rounding:400,width:"100%",children:[(0,h.jsx)(a.az,{padding:2,children:(0,h.jsx)(a._Y,{lineClamp:1,size:"400",children:"boardsection"===e.type?s.bt("Find some ideas for this section:", "Find some ideas for this section:", "Call-to-action text that upsells more ideas tab for an empty section", undefined, true):s.bt("Find some ideas for this board:", "Find some ideas for this board:", "Call-to-action text that upsells more ideas tab for an empty board", undefined, true)})}),(0,h.jsx)(a.az,{display:"flex",justifyContent:"between",padding:2,role:"list",width:"100%",children:[...[,,,,,].keys()].map(e=>{let t=b[e],o=t&&"Pin"===t.__typename&&t.description?t.description.trim():"";return(0,h.jsx)(a.az,{"data-test-id":o?"pin-with-alt-text":"pin-missing-alt-text",role:"listitem",children:(0,h.jsx)(m,{pin:t})},`${t&&"Pin"===t.__typename&&t.entityId?t.entityId:e}`)})})]})})})}function g(e){(0,r.useEffect)(()=>{(0,n.A)("MoreIdeasPreviewStory","/app/www/save/board/MoreIdeasPreviewStory/MoreIdeasPreviewStory.tsx")},[]);let t=(0,s.d4)(t=>t.desktopStories[e.storyId]),o="board_ideas_preview_detailed"===t.story_type?t:void 0;return(0,h.jsx)(f,{...e,storyKey:void 0!==o?{type:"Legacy",data:o}:null})}},814136(e,t,o){o.d(t,{A:()=>c});var i=o(61163),n=o(859471),r=o(19821),s=o(538329),a=o(284247),l=o(562615);function d({pinCount:e,height:t,size:o}){let i=(0,s.A)(),n=(0,a.A)(i.bt("+ {{ pinCount }}", "+{{ pinCount }}", "+N count overlay on pin selections", undefined, true),{pinCount:e});return(0,l.jsx)(r.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0,0,0,.2)"}},display:"flex",height:t,justifyContent:"center",children:"sm"===o?(0,l.jsx)(r.KJ,{color:"light",size:"200",weight:"bold",children:n}):(0,l.jsx)(r._Y,{color:"light",size:"600",children:n})})}function c({additionalPinCount:e,additionalPinCountSize:t="lg",pin:o,width:s,height:a,rounded:c}){return(0,n.useEffect)(()=>{(0,i.A)("PreviewPin","/app/www/save/board/PreviewPin/PreviewPin.tsx")},[]),(0,l.jsx)(r.n1,{height:a,rounding:400*!!c,wash:!0,width:s,children:o&&(0,l.jsx)(r._V,{alt:o.description,color:o.dominantColor,fit:"cover",naturalHeight:a,naturalWidth:s,src:o.imageUrl,children:!!e&&(0,l.jsx)(d,{height:a,pinCount:e,size:t})})})}},505407(e,t,o){o.d(t,{A:()=>s});var i=o(706114),n=o(998556);let r=Object.freeze({});function s(e,t){let o=n.Ay.getItem(i.OR)||r;return(e.isAuth&&o[e.id]||{})[t.id]||null}},572169(e){e.exports=function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},348888(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)({}).hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},416715(e,t,o){var i=o(896238);e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},896238(e){function t(o,i){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(o,i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/80213.en_GB-87f97de11c27a67b.mjs.map