(self.modernJsonp=self.modernJsonp||[]).push([["31856"],{63661(e,o,t){t.d(o,{A:()=>i});function i(e,o,t){let i,s,a,n=!!t?.leading,l=t?.trailing!==!1,r=t?.maxWait?Math.max(t.maxWait,o):void 0,c=null,d=0;function _(o){let t=i;return i=void 0,d=o,t&&(s=e(...t)),s}function h(e){let t=e-(a??0),i=e-d;return void 0===a||t>=o||t<0||void 0!==r&&i>=r}function g(){let e=Date.now();if(h(e))(c=null,l&&i)?_(e):i=void 0;else{let t,i,s;c=setTimeout(g,(t=e-(a??0),i=e-d,s=o-t,void 0!==r?Math.min(s,r-i):s))}}function u(){null!==c&&clearTimeout(c),c=setTimeout(g,o)}function m(...e){let t=Date.now(),l=h(t);if(i=e,a=t,l){if(null===c)return d=t,c=setTimeout(g,o),n?_(t):s;else if(void 0!==r)return u(),_(t)}return null===c&&u(),s}return m.flush=function(){if(null!==c&&i){let e=Date.now();return clearTimeout(c),c=null,_(e)}return s},m.cancel=function(){null!==c&&clearTimeout(c),d=0,i=void 0,a=void 0,c=null},m}},812917(e,o,t){t.d(o,{Ay:()=>a,S7:()=>s,ss:()=>i});let i=`
input[type="password"]::-ms-reveal  {
    display: none;
}
`,s={margin:"0 auto 22px",width:"270px"},a=`
.Tooltip_message:before, .Tooltip_message:after {
  border-style: solid;
  content: '';
  display: block;
  margin-top: -8px;
  position: absolute;
  right: 100%;
  top: 17px;
  width: 0;
}
.Tooltip_message:before {
  border-color: transparent rgba(0,0,0,0.48);
  border-width: 8px 10px 8px 0;
}
.Tooltip_message:after {
  border-color: transparent #fff;
  border-width: 8px 10px 8px 0;
  margin-right: -1px;
}
.Tooltip_mobileMessage:before, .Tooltip_message:after {
  border-style: solid;
  display: block;
  margin-top: -8px;
  position: absolute;
  right: 100%;
  top: 17px;
  width: 0;
}
.Tooltip_mobileMessage:before {
  border-color: transparent rgba(0,0,0,0.48);
  border-width: 8px 10px 8px 0;
}
.Tooltip_mobileMessage:after {
  border-color: transparent #fff;
  border-width: 8px 10px 8px 0;
  margin-right: -1px;
}
.Tooltip_wrapper {
  position: absolute;
  left: calc(100% + 12px);
  z-index: 1;
}
.Tooltip_mobileWrapper {
  margin-top: 7px;
  z-index: 1;
}

.TermsOfService__light a {
  color: rgba(255,255,255,0.9);
}
`},463778(e,o,t){t.d(o,{A:()=>a});var i=t(192866),s=t(803489);function a(e,o,t=""){if(!(o&&o.search))return"";let{message:n}=(0,s.A)(o.search),l=(0,s.A)(o.search).username||t,r="true"===(0,s.A)(o.search).multiple_accounts;return(0,i.A)({i18n:e,message:n,multipleAccounts:r,username:l})}},192866(e,o,t){t.d(o,{A:()=>r});var i=t(19821),s=t(542975),a=t(516750),n=t(562615);function l(e,o,t){return(0,n.jsx)(i.KJ,{align:t||"center",children:(0,s.vQ)(e,{username:(0,n.jsx)(i.KJ,{inline:!0,weight:"bold",children:o})})})}function r({i18n:e,message:o,multipleAccounts:t,username:i=""}){switch(o){case a.Pg:return e.bt("Your account has been deleted. We're sorry to see you go", "Your account has been deleted. We're sad to see you go", "unauthLoginPage.accountDeletedToast.message", undefined, true);case a.bE:if(t)return l(e.bt("An email has been sent with final steps to delete your account, {{username}}, and its linked accounts", "An email has been sent with final steps to delete your account, {{username}} and its linked accounts", "accountDeletedEmailToast.message.multipleAccounts", undefined, true),i);return l(e.bt("An email has been sent with final steps to delete your account, {{username}}", "An email has been sent with final steps to delete your account, {{username}}", "accountDeletedEmailToast.message.singleAccount", undefined, true),i);case a.X5:return l(t?e.bt("The account, {{username}}, and its associated linked accounts have been deactivated", "The account, {{username}}, and its associated linked accounts have been deactivated", "unauthLoginPage.deactivatedToast.message.multipleAccounts", undefined, true):e.bt("The account, {{username}}, has been deactivated", "The account, {{username}}, has been deactivated", "unauthLoginPage.deactivatedToast.message.singleAccount", undefined, true),i);case a.B5:return l(e.bt("Success! You've unlinked this business account. You are currently in {{username}}.", "Success! You've unlinked this business account. You are currently in {{username}}.", "authHomeFeedPage.unlinkAccountToast.message", undefined, true),i,"start");case a.NE:return l(e.bt("You've switched into and are currently in the account {{username}}", "You've switched into and are currently in the account {{username}}", "accountSettings.switchAccountToAccountChanges", undefined, true),i,"start");case a.UN:return e.bt("Your account is now a personal account", "Your account is now a personal account", "unauthLoginPage.unlinkAccountToast.personal.message", undefined, true);case a.cu:return e.bt("Your account is now a business account", "Your account is now a business account", "unauthLoginPage.unlinkAccountToast.business.message", undefined, true);case a.lL:return e.bt("Your linked business account was deleted", "Your Linked Business Account was deleted", "unauthLoginPage.unlinkAccountToast.business.message", undefined, true);default:return""}}},490214(e,o,t){t.d(o,{PF:()=>d,iN:()=>c,ir:()=>l,r_:()=>r});var i=t(257300),s=t(648137),a=t(376683),n=t(752159);let l="274266067164",r=(e,o)=>(o&&(0,n.OW)({event:"load_script_start",provider:"facebook"}),(0,s.A)((0,a.A)(e),"FACEBOOK").then(()=>{o&&(0,n.OW)({event:"load_script_success",provider:"facebook"}),"u">typeof window&&window.FB?(o&&(0,n.OW)({event:"initialize_library",provider:"facebook"}),window.FB.init({appId:l,status:!0,xfbml:!0,version:"v2.7"})):o?(0,n.OW)({event:"global_object_not_found",provider:"facebook"}):(0,n.PM)("pcons.non_autologin.fb.global_object_not_found")})),c=()=>new Promise(e=>{"u">typeof window&&window.FB&&window.FB.getLoginStatus(e)}),d=async(e,o)=>{await r(e,!1);let t=await c(),s=o?"dweb":"mweb";if("connected"===t.status){(0,n.PM)(`${s}.login_data_from_fb_token.connected`);let{userID:e,accessToken:o}=t.authResponse;try{let t=await (0,i.A)({url:"/v3/facebook/login_data/",data:{facebook_id:e,facebook_token:o}});if(t?.resource_response?.data){let{connected_to_gplus:e,connected_to_google:o,has_password:i}=t.resource_response.data,a=e||o;return(0,n.PM)(`${s}.login_data_from_fb_token.success`),{isGoogleConnected:a,hasPassword:i,isFBAuthOnly:!a&&!i}}(0,n.PM)(`${s}.login_data_from_fb_token.no_data`)}catch{(0,n.PM)(`${s}.login_data_from_fb_token.error`)}}return null}},376683(e,o,t){t.d(o,{A:()=>i});let i=e=>`//connect.facebook.net/${(e=>{let o=e.replace(/-/g,"_");if(o.startsWith("es"))return"es_LA";if(o.startsWith("ar"))return"ar_AR";switch(o){case"de":return"de_DE";case"fr":return"fr_FR";case"it":return"it_IT";case"ja":return"ja_JP";case"nl":return"nl_NL";case"tr":return"tr_TR";case"en_AU":return"en_US";default:return o}})(e)}/sdk.js`},562773(e,o,t){t.r(o),t.d(o,{default:()=>u});var i=t(61163),s=t(859471),a=t(19821),n=t(586733),l=t(538329),r=t(542975),c=t(752159),d=t(168079),_=t(654557),h=t(562615);let g={textAlign:"start"};function u(){(0,s.useEffect)(()=>{(0,i.A)("QRCodeLoginAppErrorBanner","/app/www/login/duplo/QRCodeLoginAppErrorBanner.tsx")},[]);let e=(0,l.A)(),{logContextEvent:o}=(0,n.o)(),t=(0,r.$w)({text:e.bt("<strong id='1'>Get the app</strong> to log in with QR code", "<strong id='1'>Get the app</strong> to log in with QR code", "mweb.qr_code_login_app_error.banner.text", undefined, true),jsxReplacements:{1:({innerHtmlStrings:e})=>(0,h.jsx)(a.KJ,{inline:!0,underline:!0,children:e})}});return(0,d.A)(()=>{(0,c.PM)("mweb.qr_code_login_app_error.banner.view"),o({event_type:13,component:15429})}),(0,h.jsx)(a.az,{children:(0,h.jsx)(_.A,{app_upsell_type:"qr-code-login-app-error-banner",componentType:15430,children:({handleOpenApp:i})=>(0,h.jsx)(a.Rp,{onTap:()=>{(0,c.PM)("mweb.qr_code_login_app_error.banner.tap"),o({event_type:102,component:15429}),i()},children:(0,h.jsxs)(a.az,{alignItems:"center",color:"infoWeak",direction:"row",display:"flex",paddingX:4,paddingY:4,rounding:400,children:[(0,h.jsx)(a.az,{marginEnd:4,children:(0,h.jsx)(a.In,{accessibilityLabel:e.bt("Pinterest", "Pinterest", "proPartnerHeader.partnerBadge.pinterestIcon", undefined, true),color:"info",icon:"pinterest",size:20})}),(0,h.jsx)(a.az,{dangerouslySetInlineStyle:{__style:g},children:(0,h.jsx)(a.KJ,{inline:!0,children:t})})]})})})})}},886611(e,o,t){t.d(o,{A:()=>eA});var i=t(61163),s=t(859471),a=t(106386),n=t(979638),l=t(19821),r=t(87524),c=t(706114),d=t(743372),_=t(63661),h=t(586733),g=t(490214),u=t(844255),m=t(971289),p=t(538329),f=t(607685),b=t(752159),w=t(168079),A=t(562615);let x={textAlign:"start"};function P(){(0,s.useEffect)(()=>{(0,i.A)("FacebookRecoverAccountBanner","/app/packages/desktopLoginModal/FacebookRecoverAccountBanner.tsx")},[]);let e=(0,p.A)(),o=(0,m.qJ)(),{isRetrievingLoginData:t,isGoogleConnected:a,hasPassword:n,isFBAuthOnly:r}=function({disableFetch:e=!1}){let{locale:o}=(0,u._8)(),t=(0,m.qJ)(),[i,a]=(0,s.useState)(!1),[n,l]=(0,s.useState)(!1),[r,c]=(0,s.useState)(!1),[d,_]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let i=async()=>{let e=await (0,g.PF)(o,t);e?(a(e.isGoogleConnected),l(e.hasPassword),c(e.isFBAuthOnly)):_(!0),p(!1)};e?p(!1):i()},[o,t,e]),d||e?{isRetrievingLoginData:h}:{isGoogleConnected:i,hasPassword:n,isFBAuthOnly:r,isRetrievingLoginData:h}}({}),{logContextEvent:c}=(0,h.o)(),[d,_]=(0,s.useState)("default"),P=o?"dweb":"mweb";return(0,w.A)(()=>{c({event_type:15393,element:10881}),(0,b.PM)("pcons.login_page.fb_recover_account_banner.view")}),(0,s.useEffect)(()=>{if(t)return;let e="default";a?e="google":n?e="email":r&&(e="fbOnly"),_(e),(0,b.PM)(`${P}.fb_recover_account_banner.view.${e}`)},[t,P,a,n,r]),(0,A.jsx)(l.az,{marginTop:o?4:void 0,padding:o?4:void 0,children:(0,A.jsx)(l.$A,{href:`${f.UU5}?lookup=true`,onTap:({dangerouslyDisableOnNavigation:e})=>{(0,b.PM)(`${P}.fb_recover_account_banner.click.${d}`),o&&e(),c({event_type:15392,element:10881})},children:(0,A.jsxs)(l.az,{alignItems:"center",color:"infoWeak",direction:"row",display:"flex",paddingX:4,paddingY:4,rounding:400,children:[(0,A.jsx)(l.az,{marginEnd:4,children:(0,A.jsx)(l.In,{accessibilityLabel:e.bt("info icon on the Facebook account recovery banner", "info icon on the facebook recover account banner", "facebook_recover_account_banner.icon", undefined, true),color:"info",icon:"circle-information",size:20})}),(({authOption:e,i18n:o,isRetrievingLoginData:t})=>{let i=o.bt("Facebook login is no longer available. Log in with an option below or ", "Facebook login is no longer available. Log in with an option below or ", "facebook_recover_account_banner.text_1", undefined, true),s=o.bt("tap to recover your account", "tap to recover your account", "facebook_recover_account_banner.text_2", undefined, true);return t?(0,A.jsx)(l.az,{alignItems:"center",direction:"column",display:"flex",marginEnd:10,width:"100%",children:(0,A.jsx)(l.y$,{color:"default",show:!0,size:"sm"})}):(t||("google"===e?i=o.bt("Facebook login is no longer available. Log in with Google or ", "Facebook login is no longer available. Log in with Google or ", "facebook_recover_account_banner_google.text", undefined, true):"email"===e?i=o.bt("Facebook login is no longer available. Log in with email or ", "Facebook login is no longer available. Log in with email or ", "facebook_recover_account_banner_email.text", undefined, true):"fbOnly"===e&&(i=o.bt("Facebook login is no longer available. ", "Facebook login is no longer available. ", "facebook_recover_account_banner_facebook.text_1", undefined, true),s=o.bt("Tap to get back into your account", "Tap to get back into your account", "facebook_recover_account_banner_facebook.text_2", undefined, true))),(0,A.jsxs)(l.az,{dangerouslySetInlineStyle:{__style:x},children:[(0,A.jsx)(l.KJ,{inline:!0,children:i}),(0,A.jsx)(l.KJ,{inline:!0,weight:"bold",children:s})]}))})({authOption:d,i18n:e,isRetrievingLoginData:t})]})})})}function k(){(0,s.useEffect)(()=>{(0,i.A)("FacebookDeprecationTextLink","/app/packages/duplo/FacebookDeprecationTextLink.tsx")},[]);let e=(0,p.A)(),{logContextEvent:o}=(0,h.o)();return(0,w.A)(()=>{(0,b.PM)("mweb.fb_deprecation_text_link.view"),o({event_type:15393,element:18307})}),(0,A.jsx)(l.az,{marginTop:3,children:(0,A.jsxs)(l.KJ,{align:"center",size:"200",children:[e.bt("Facebook login is no longer available ", "Facebook login is no longer available ", "facebook_deprecation_text_link.text_1", undefined, true),(0,A.jsx)(l.$A,{href:`${f.UU5}?lookup=true`,onTap:()=>{(0,b.PM)("mweb.fb_deprecation_text_link.click"),o({event_type:15392,element:18307})},children:(0,A.jsx)(l.KJ,{inline:!0,size:"200",underline:!0,weight:"bold",children:e.bt("Update login method", "Update login method", "facebook_deprecation_text_link.text_2", undefined, true)})})]})})}var z=t(257300),y=t(989457),v=t(567176),j=t(542975),L=t(516750),E=t(463778),S=t(173832),T=t(641467),C=t(86767),F=t(154325),B=t(601185),M=t(657171),I=t(998556),U=t(811154),O=t(706466),R=t(803489),K=t(917348),W=t(734696),J=t(999813),D=t(741383),V=t(267037),N=t(812917),G=t(920282),H=t(131094),q=t(67765),$=t(623900);function Y(e,o,t){var i;return(o="symbol"==typeof(i=function(e,o){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,o||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(o,"string"))?i:i+"")in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}class Q extends s.PureComponent{constructor(...e){super(...e),Y(this,"state",{emailFieldElement:null,shouldShowEmailSuggestion:!1}),Y(this,"handleChangeEmail",({value:e})=>{let{handleChangeEmail:o}=this.props;if(this.state.shouldShowEmailSuggestion)this.setState({shouldShowEmailSuggestion:!1});else if(e.endsWith("@")){let e=this.emailInputRef;this.setState({shouldShowEmailSuggestion:!0,emailFieldElement:e})}o&&o({value:e})}),Y(this,"handlePasswordFocus",()=>{(0,b.uq)("focus_password")}),Y(this,"handleEmailSuggestionClick",e=>{let{trackInteraction:o}=this.props;o&&o({action:"click",item:"email-suggestions",within:"login-page"}),this.setState({shouldShowEmailSuggestion:!1}),this.handleChangeEmail({value:e})}),Y(this,"passwordReset",e=>{(0,b.uq)("click_forget_password"),this.props.handlePasswordReset&&this.props.handlePasswordReset(e)}),Y(this,"handleLoginClick",()=>{(0,b.XB)({event:"start",provider:"email"}),(0,b.uq)("press_login_continue"),this.props.onLoginClick&&this.props.onLoginClick()}),Y(this,"handleSignupClick",()=>{let{onSignUpClick:e}=this.props;e&&e()})}componentDidMount(){this.handleChangeEmail({value:this.props.email})}render(){let{email:e,handleChangePassword:o,hideEmailField:t,hideLoginBtn:i,hidePasswordField:a,i18n:n,passwordValidationError:r,emailValidationError:c,emailLoginOnlyForRecoverAccount:d,validateEmailOnBlur:_,validatePasswordOnBlur:h,isSIWAError:g,isValid:u,isSsoFlow:m,onSubmit:p,password:f,requestContext:b,shouldShowSignUpButton:w,showEmailAsText:x,onForgetPasswordForFacebookRecover:P}=this.props,{emailFieldElement:k,shouldShowEmailSuggestion:z}=this.state,y=g&&r,v=n.bt("Log in", "Log in", "Label for log in button", undefined, true),j=!a;return m&&(v=n.bt("Continue with SSO", "Continue with SSO", "login.sso.continue_button.text", undefined, true),j=!1),(0,A.jsx)(l.az,{marginBottom:3,marginTop:3,children:(0,A.jsxs)("form",{autoCapitalize:"none",autoCorrect:"off",onSubmit:p,children:[!t&&x&&(0,A.jsx)(l.az,{marginBottom:5,children:(0,A.jsx)(l.KJ,{align:"center",children:e})}),!t&&!x&&(0,A.jsxs)(s.Fragment,{children:[z?(0,A.jsx)($.A,{email:e,emailFieldElement:k,handleEmailSuggestionClick:this.handleEmailSuggestionClick,showUsername:!0}):null,(0,A.jsx)(l.az,{marginTop:1,children:(0,A.jsx)(l.A_,{ref:e=>{this.emailInputRef=e},errorMessage:c,id:"email",onBlur:_,onChange:this.handleChangeEmail,placeholder:n.bt("Email", "Email", "Prompt for user to enter in email on the mobile web login page", undefined, true),size:"lg",type:"email",value:e})})]}),j?(0,A.jsxs)(l.az,{children:[(0,A.jsxs)(l.az,{marginTop:2,position:"relative",children:[b.userAgent.browserName?.includes("Edge")&&(0,A.jsx)(H.A,{unsafeCSS:N.ss}),(0,A.jsx)(l.A_,{autoComplete:"on",errorMessage:r,id:"password",onBlur:h,onChange:o,onFocus:this.handlePasswordFocus,placeholder:n.bt("Password", "Password", "Prompt for user to enter in password on the mobile web login page", undefined, true),size:"lg",type:"password",value:f})]}),d?(0,A.jsx)(l.az,{"data-test-id":"reset-password",marginTop:2,children:(0,A.jsx)(l.Rp,{onTap:()=>{P?.(this.props.email)},children:(0,A.jsx)(l.KJ,{inline:!0,size:"100",weight:"bold",children:n.bt("Forgotten your password", "Forgot your password", "pass_word_reset_page.fb_multi_auth_login.send_forgot_password_email", undefined, true)})})}):(0,A.jsx)(l.az,{"data-test-id":"reset-password",marginTop:2,children:(0,A.jsx)(l.KJ,{inline:!0,size:"100",weight:"bold",children:(0,A.jsx)(l.N_,{display:"inlineBlock",href:"/password/reset",onClick:({event:e})=>this.passwordReset(e),tapStyle:"none",underline:"hover",children:y?n.bt("Reset your password", "Reset your password", "Heading displayed when email is entered on the password reset page", undefined, true):n.bt("Forgotten your password?", "Forgot your password?", "Link to the password reset page", undefined, true)})})})]}):null,w&&(0,A.jsx)(l.az,{marginTop:3,children:(0,A.jsx)(l.$n,{color:"primary",fullWidth:!0,onClick:this.handleSignupClick,text:n.bt("Sign up with this email address", "Sign up with this email", "Label for sign up button", undefined, true),type:"submit"})}),!i&&(0,A.jsx)(l.az,{"data-test-id":"log-in-button",marginTop:4,children:(0,A.jsx)(G.A,{color:"primary",disabled:!u||w,fullWidth:!0,onClick:this.handleLoginClick,size:"md",text:v,type:"submit"},!u||w?"disabled":"enabled")})]})})}}let X=function(e){let o=(0,p.A)(),t=(0,m.M)(),i=(0,q.A)(),s=(0,d.A)(),a=(0,u._8)();return(0,A.jsx)(Q,{...e,i18n:o,isPhoneDevice:t,logContextEvent:s,requestContext:a,trackInteraction:i})};var Z=t(79906),ee=t(991289);function eo({onDismiss:e}){(0,s.useEffect)(()=>{(0,i.A)("LoginAssistanceGoogleModal","/app/www/login/duplo/LoginAssistanceGoogleModal.tsx")},[]);let o=(0,p.A)();(0,s.useEffect)(()=>{(0,b.PM)("unauth.mweb.login_assistance_google_modal.view")},[]);let t=o.bt("Having trouble logging in?", "Having trouble logging in?", "mweb.accountRecovery.loginAssistance.googleModal.heading", undefined, true);return(0,A.jsxs)(Z.Ay,{accessibilityModalLabel:t,heading:(0,A.jsxs)(l.az,{children:[(0,A.jsx)(l.az,{left:!0,marginStart:6,marginTop:-10,position:"absolute",children:(0,A.jsx)(l.K0,{accessibilityLabel:o.bt("Dismiss modal button", "Dismiss modal button", "dismiss button accessibilityLabel", undefined, true),bgColor:"transparent",icon:"close",onClick:()=>{e()},size:"sm"})}),(0,A.jsx)(l.az,{display:"flex",justifyContent:"center",marginBottom:4,marginTop:10,children:(0,A.jsx)(l.In,{accessibilityLabel:o.bt("Pinterest logo", "Pinterest logo", "Accessibility label for Pinterest icon", undefined, true),color:"primary",icon:"pinterest",size:32})}),(0,A.jsx)(l._Y,{accessibilityLevel:1,align:"center",size:"400",children:t})]}),isOpen:!0,onDismiss:e,children:[(0,A.jsx)(l.az,{marginBottom:4,marginTop:4,paddingX:12,children:(0,A.jsx)(l.KJ,{align:"center",children:o.bt("It looks as though your account is connected to Google. Log in with Google to get back into your account.", "Looks like your account is connected to Google. Log in with Google to get back into your account.", "mweb.accountRecovery.loginAssistance.googleModal.text", undefined, true)})}),(0,A.jsx)(l.az,{marginBottom:8,paddingX:14,children:(0,A.jsx)(ee.A,{container:"LoginAssistanceGoogleModal",google:!0})})]})}var et=t(760771);function ei({onTap:e}){(0,s.useEffect)(()=>{(0,i.A)("MobileMagicLinkLoginButton","/app/www/login/duplo/MobileMagicLinkLoginButton.tsx")},[]);let o=(0,p.A)(),{trackConversionUpsell:t}=(0,U.A)();return(0,w.A)(()=>{(0,b.PM)("mweb.magic_link_login_button.view")}),(0,A.jsx)(l.Rp,{accessibilityHaspopup:!0,accessibilityLabel:"Magic link login button",onTap:()=>{t({eventType:14689,element:12956}),(0,b.PM)("mweb.magic_link_login_button.click"),e()},children:(0,A.jsxs)(l.az,{alignItems:"center",borderColor:"decorative",borderWidth:"sm",color:"default",display:"flex",height:36,marginBottom:2,padding:4,position:"relative",rounding:300,width:"100%",children:[(0,A.jsx)(l.In,{accessibilityLabel:o.bt("Email icon", "Email icon", "mobileLoginForm.magicLinkButtonIcon.accessibilityLabel", undefined, true),color:"default",icon:"gmail",inline:!0,size:"18"}),(0,A.jsx)(l.az,{marginEnd:"auto",marginStart:"auto",children:(0,A.jsx)(l.KJ,{align:"center",size:"200",weight:"bold",children:o.bt("Email login link", "Email login link", "unauth.loginForm.magicLinkLoginButton", undefined, true)})})]})})}var es=t(562773),ea=t(623120),en=t(457315),el=t(199725),er=t(986716),ec=t(270018);function ed({email:e,emailValidationError:o,handleChangeEmail:t,handleShowMagicLinkForm:a,isValid:r,loginOptions:c,validateEmailOnBlur:d,renderLoginButtons:_,showToast:h,signupOptions:g}){(0,s.useEffect)(()=>{(0,i.A)("LoginFormMagicLink","/app/www/pages/duplo/LoginFormMagicLink.tsx")},[]);let u=(0,p.A)(),m=(0,n.Zp)(),f=(0,n.zy)(),[w,x]=(0,s.useState)("EMAIL_INPUT"),{checkEmailBounce:P}=(0,el.A)(e,"magic_link_email_send"),[k,y]=(0,s.useState)(""),[L,E]=(0,s.useState)(!1),T=u.bt("Sorry, this doesn't look like a valid email address", "Sorry, this doesn't look like a valid email", "mweb.mobile_login_form.magic_link_email_input.invalid_email_error", undefined, true),C=async()=>{try{(0,b.PM)("mweb.mobile_login_form.magic_link_email_send.request"),await (0,z.A)({url:"/v3/users/magic_link/",method:"POST",data:{email:e}}),x("CHECK_EMAIL"),(0,b.PM)("mweb.mobile_login_form.magic_link_email_send.success")}catch(t){let o=(0,en.A)(t,"api_error_code");(0,b.PM)(`mweb.mobile_login_form.magic_link_email_send.error.${o}`),o===S.gE?y((0,j.vQ)(u.bt("This email address isn’t associated with a Pinterest account. Please try again or {{ signUpLink }}.", "This email isn’t associated with a Pinterest account. Please try again or {{ signUpLink }}.", "error.mobile_login_form_magic_link.no_user", undefined, true),{signUpLink:(0,A.jsx)(l.az,{display:"inlineBlock",children:(0,A.jsx)(l.Rp,{onTap:()=>{(0,b.PM)("mweb.mobile_login_form.magic_link_no_user.sign_up.click"),m("/signup/step1/",{state:{email:e,next:(0,R.A)(f.search).next}})},children:(0,A.jsx)(l.KJ,{inline:!0,underline:!0,children:u.bt("sign up", "sign up", "loginFormMagicLink.signUpLink", undefined, true)})})})})):o===S.l4?(h(({hideToast:e})=>(0,A.jsx)(v.A,{duration:5e3,onHide:e,text:u.bt("Magic link isn’t supported for accounts using two-factor authentication. Try another login method", "Magic link isn’t supported for accounts using two-factor authentication. Try another login method", "error.mobile_login_form_magic_link.mfa_not_supported", undefined, true)})),a(!1)):y((0,en.A)(t,"message")??u.bt("Something went wrong on our end. Please try again.", "Something went wrong on our end, please try again", "error.mobile_login_form_magic_link.generic", undefined, true))}},F=async()=>{(0,b.PM)("mweb.mobile_login_form.magic_link.continue_click"),(e&&(0,er.Ay)(e)||(y(T),E(!0),(0,b.PM)("mweb.mobile_login_form.magic_link_email_input.regex_error"),0))&&(C(),P(()=>{h(({hideToast:e})=>(0,A.jsx)(v.A,{duration:5e3,onHide:e,text:u.bt("Your email may have bounced. Please try another login method.", "Your email may have bounced. Please try another login method.", "error.mobile_login_form_magic_link.email_bounced", undefined, true)}))}))},B=async()=>{try{(0,b.PM)("mweb.mobile_login_form.magic_link_resend_email.request"),await (0,z.A)({url:"/v3/users/magic_link/",method:"POST",data:{email:e}}),(0,b.PM)("mweb.mobile_login_form.magic_link_resend_email.success"),h(({hideToast:e})=>(0,A.jsx)(v.A,{duration:5e3,onHide:e,text:u.bt("Email sent!", "Email sent!", "success.mobile_login_form_magic_link.resend_email", undefined, true),type:"success"}))}catch(o){let e=(0,en.A)(o,"api_error_code");(0,b.PM)(`mweb.mobile_login_form.magic_link_resend_email.error.${e}`),h(({hideToast:e})=>(0,A.jsx)(v.A,{duration:5e3,onHide:e,text:(0,en.A)(o,"message")??u.bt("Something went wrong. Please try again.", "Something went wrong. Please try again.", "error.mobile_login_form_magic_link.resend_email", undefined, true),type:"error"}))}};return(0,A.jsxs)(l.az,{children:[(0,A.jsx)(ec.default,{disableRedirect:!0,onTouch:()=>{"EMAIL_INPUT"===w?a(!1):"CHECK_EMAIL"===w?x("EMAIL_INPUT"):"BACK_TO_LOGIN"===w&&x("CHECK_EMAIL")}}),(0,A.jsx)(l.az,{marginBottom:6,children:(0,A.jsx)(l.so,{alignItems:"center",justifyContent:"center",children:(0,A.jsx)(l._Y,{accessibilityLevel:1,overflow:"normal",size:"500",children:(()=>{switch(w){case"EMAIL_INPUT":return u.bt("Email a login link", "Email a login link", "loginFormMagicLink.emailInput.heading", undefined, true);case"CHECK_EMAIL":return u.bt("Check your email", "Check your email", "loginFormMagicLink.checkEmail.heading", undefined, true);default:return u.bt("Log in to Pinterest", "Log in to Pinterest", "loginFormMagicLink.default.heading", undefined, true)}})()})})}),(0,A.jsx)(l.az,{paddingX:4,children:(()=>{switch(w){case"EMAIL_INPUT":return(0,A.jsxs)(l.az,{children:[(0,A.jsx)(l.az,{marginBottom:2,marginEnd:5,marginStart:5,children:(0,A.jsx)(l.KJ,{align:"center",size:"200",children:u.bt("Use a one-time link to log in without a password", "Use a one-time link to log in without a password", "loginFormMagicLink.emailInput.subtext", undefined, true)})}),(0,A.jsxs)(l.az,{marginTop:3,children:[(0,A.jsx)(l.A_,{errorMessage:k||o,id:"email",onBlur:d,onChange:({value:e})=>{t({value:e}),y(""),E(!1)},placeholder:u.bt("Email address", "Email", "loginFormMagicLink.emailInput.placeholder", undefined, true),size:"lg",type:"email",value:e}),(0,A.jsx)(l.az,{marginBottom:4,marginTop:4,children:(0,A.jsx)(l.$n,{color:"primary",disabled:L||!r,fullWidth:!0,onClick:F,size:"md",text:u.bt("Send link", "Send link", "loginFormMagicLink.emailInput.submitButton", undefined, true)})}),_({isDividerOnTop:!0})]})]});case"CHECK_EMAIL":return(0,A.jsxs)(l.az,{marginBottom:3,children:[(0,A.jsx)(l.az,{marginBottom:2,marginEnd:5,marginStart:5,children:(0,A.jsx)(l.KJ,{align:"center",size:"200",children:(0,j.vQ)(u.bt("The login link was sent to {{ email }}", "The login link was sent to {{ email }}", "loginFormMagicLink.checkEmail.message", undefined, true),{email:e})})}),(0,A.jsx)(l.az,{marginBottom:4,marginTop:4,children:(0,A.jsx)(l.$n,{color:"secondary",fullWidth:!0,onClick:B,size:"md",text:u.bt("Resend link", "Resend link", "loginFormMagicLink.checkEmail.resendButton", undefined, true)})}),_({isDividerOnTop:!0,customLoginOption:(0,A.jsx)(l.az,{marginBottom:2,children:(0,A.jsx)(ea.A,{onClick:()=>x("BACK_TO_LOGIN")})})})]});case"BACK_TO_LOGIN":return(0,A.jsx)(l.az,{marginTop:3,children:c});default:return null}})()}),g]})}var e_=t(376602);let eh=function({href:e,state:o,onClick:t,children:i}){let{state:s}=(0,n.zy)(),a=(0,e_.A)({href:{pathname:e,state:{...s,...o}}});return(0,A.jsx)(l.N_,{href:e,onClick:({event:e,dangerouslyDisableOnNavigation:o})=>{o(),t(),a({event:e})},children:i})};var eg=t(36217),eu=t(871481),em=t(403317),ep=t(439449);function ef(e,o,t){var i;return(o="symbol"==typeof(i=function(e,o){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,o||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(o,"string"))?i:i+"")in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}let eb=e=>(0,R.A)(e.search).next||e.state&&e.state.next||"/";class ew extends s.PureComponent{constructor(...e){let o;super(...e),ef(this,"state",{apiErrorCode:0,email:(o=this.props.location).state&&o.state.email||"",isLoading:!1,isValid:!1,isSsoFlow:!1,password:"",recaptchaV3Token:"default",emailValidationError:"",passwordValidationError:"",optOutFromPersonalizedForm:!1,shouldShowSignUpButton:!1,hasKeychainErrorShown:!0,showLoginRateLimitedModal:!1,showLoginAssistanceGoogleModal:!1,isSsoEmail:!1,exchangeCodeToTokenUrl:"",existingUserSso:!1,existingUserIsSso:!1,ssoAuthorizationUri:"",showInfoBanner:!1,infoBannerMessage:"",showQRAppErrorBanner:!1,showMagicLinkForm:!1}),ef(this,"clearPersonalizedLoginFromEmail",e=>{let{navigate:o,location:t}=this.props;if(t.state&&t.state.userInfo){let{userInfo:i,...s}=t.state;o(e?"/":"/login",{replace:!0,state:s})}}),ef(this,"onLoginClick",()=>{this.trackButtonTap(30),this.props.emailLoginOnlyForRecoverAccount&&this.props.logContextEvent({event_type:15392,component:15214,element:30})}),ef(this,"onSignUpClick",()=>{let{navigate:e,location:o,isAppFactoryOAuth:t,attributionLabel:i,trackConversionUpsell:s}=this.props;this.trackButtonTap(31),s({eventType:14688,component:14215,upsellReason:i,incrementUpsellReasonCounter:!1}),e("/signup/step1/",{state:{email:this.state.email,password:this.state.password,isSignUpFromLoginError:!0,...o.state,isAppFactoryOAuth:t,attributionLabel:i}})}),ef(this,"trackButtonTap",e=>{let{isAuthenticated:o,isLimitedLoginUser:t,logContextEvent:i,trackConversionUpsell:s}=this.props;i({view_type:9,element:e,event_type:102,aux_data:{...o?{login_state:t?T.A.LIMITED:T.A.DEFAULT}:{}}}),s({eventType:14689,element:e})}),ef(this,"handleNotYouClick",()=>{this.clearPersonalizedLoginFromEmail(),this.trackButtonTap(10879),this.setState({email:"",optOutFromPersonalizedForm:!0}),(0,b.uq)("click_change_signin_account")}),ef(this,"handleNoAccountClick",()=>{let{attributionLabel:e,trackConversionUpsell:o}=this.props;this.clearPersonalizedLoginFromEmail(!0),this.trackButtonTap(10880),o({eventType:14688,component:14215,upsellReason:e,incrementUpsellReasonCounter:!1,viewType:10,viewParameter:47}),(0,b.uq)("click_toggle_signup")}),ef(this,"handlePasswordReset",()=>{let{navigate:e,logContextEvent:o,attributionLabel:t}=this.props,{email:i}=this.state;this.trackButtonTap(10881);let s=(0,W.fb)(i,this.emailValidators());i&&!s&&(o({event_type:51,view_type:9,view_parameter:63}),(0,z.A)({url:"/v3/users/forgot_password/",method:"POST",data:{username_or_email:i,type:"reset"}}).then(()=>{e("/password/reset/sent/",{replace:!0,state:{destinationEmail:i,fromLogin:!0,attributionLabel:t}}),this.setState({apiErrorCode:0})}))}),ef(this,"validateEmail",async({showTooltip:e})=>{let{email:o}=this.state,t=(0,W.fb)(o,this.emailValidators()),i=!t&&!this.state.passwordValidationError;i&&this.checkIfUserIsSso({isEmailPasswordValid:i}),e||i?this.setState({emailValidationError:t,isValid:i}):this.setState({isValid:i})}),ef(this,"checkIfUserIsSso",async({hasInitialEmail:e,isEmailPasswordValid:o})=>{let{email:t}=this.state,{verifySsoUser:i}=this.props,s=o??this.state.isValid,{isSso:a,existingUser:n,existingUserIsSso:l,authorizationUri:r,exchangeCodeToTokenUrl:c}=await i(t),d=!!(a&&(!n||l));this.setState({exchangeCodeToTokenUrl:c??"",isSsoEmail:a,isSsoFlow:d,existingUserSso:!!n,existingUserIsSso:!!l,ssoAuthorizationUri:r??"",isValid:!!d&&!!e||s})}),ef(this,"debouncedCheckIfSsoUser",(0,_.A)(async()=>{let{email:e}=this.state;(0,W.fb)(e,this.emailValidators())||this.checkIfUserIsSso({hasInitialEmail:!1})},300)),ef(this,"validatePassword",e=>{let{password:o}=this.state,t=(0,W.fb)(o,[(0,W.mg)({message:this.props.i18n.bt("The password you entered is incorrect.", "The password you entered is incorrect.", "Password validation error", undefined, true)})]),i=!t&&!this.state.emailValidationError;e||i?this.setState({passwordValidationError:t,isValid:i}):this.setState({isValid:i})}),ef(this,"validateEmailOnBlur",()=>{setTimeout(()=>{this.validateEmail({showTooltip:!0})},0)}),ef(this,"validatePasswordOnBlur",()=>{let{password:e}=this.state;e&&setTimeout(()=>{this.validatePassword(!0)},0)}),ef(this,"emailValidators",()=>[(0,W.Ps)({message:this.props.i18n.bt("Not a valid email address.", "Not a valid email.", "Email field validation error message", undefined, true)}),(0,W.mg)({message:this.props.i18n.bt("You missed a bit! Don't forget to add your email address.", "You missed a spot! Don't forget to add your email.", "Email validation error", undefined, true)})]),ef(this,"getSoftBannedErrorMsg",()=>{let{i18n:e}=this.props;return(0,A.jsx)(l.KJ,{color:"error",size:"200",children:(0,j.vQ)(e.bt("We noticed some strange activity on your account. {{ resetPasswordLink }} or log in with Facebook or Google to get back into your account.", "We noticed some strange activity on your account. {{ resetPasswordLink }} or log in with Facebook or Google to get back into your account.", "duplo.loginForm.softBanned.errorMessage", undefined, true),{resetPasswordLink:(0,A.jsx)(l.az,{display:"inlineBlock",children:(0,A.jsx)(l.Rp,{onTap:this.handlePasswordReset,children:(0,A.jsx)(l.KJ,{inline:!0,underline:!0,children:e.bt("Reset your password", "Reset your password", "duplo.loginForm.SoftBanned.passwordReset", undefined, true)},"err_reset_link")})})})},"err_text")}),ef(this,"handleChangeEmail",({value:e})=>{this.setState({email:e,shouldShowSignUpButton:!1,hasKeychainErrorShown:!0,isSsoEmail:!1,isSsoFlow:!1,showInfoBanner:!1},()=>{this.validateEmail({}),this.debouncedCheckIfSsoUser()})}),ef(this,"handleChangePassword",({value:e})=>this.setState({password:e,hasKeychainErrorShown:!0},this.validatePassword)),ef(this,"handleLoginFailure",e=>{if(e.isArkoseChallengeRequired)return void this.setState({isLoading:!1});let{showToast:o,i18n:t,checkExperiment:i}=this.props,{email:s}=this.state,a=e.api_error_code===S.WT||e.api_error_code===S.k8,n={},l=e.api_error_code===S.Ty||e.message?{passwordValidationError:e.message}:{};if(a)l={passwordValidationError:this.getSoftBannedErrorMsg()};else if(e.api_error_code===S.WG){(0,b.PM)("unauth.mweb.login_form.error.invalid_password_google_user");let e=i("mweb_unauth_assist_google_connected_users",{dangerouslySkipActivation:!0}).group.includes("banner");e&&(n={showInfoBanner:!0,infoBannerMessage:t.bt("It looks as though your account is connected to Google. Use Google button to log in", "Looks like your account is connected to Google. Use Google button to log in", "mweb.unauth.loginForm.badPassword.googleConnected.bannerMessage", undefined, true)}),l={passwordValidationError:t.bt("The password you entered is incorrect.", "The password you entered is incorrect.", "mweb.unauth.loginForm.badPassword.googleConnected.passwordError", undefined, true),showLoginAssistanceGoogleModal:!e}}else e.api_error_code===S.h8&&e.message?(o(({hideToast:o})=>(0,A.jsx)(v.A,{onHide:o,text:e.message||""})),l={}):e.api_error_code===S.Um?l=s?{emailValidationError:e.message,shouldShowSignUpButton:!0}:{emailValidationError:e.message}:null!==e.api_error_code&&void 0!==e.api_error_code&&S.oI.includes(e.api_error_code)&&(l={emailValidationError:"",showLoginRateLimitedModal:!0});this.setState({isLoading:!1,apiErrorCode:e.api_error_code||0,...l,...n}),(0,M.x6)(e=>this.setState({recaptchaV3Token:e}),()=>{},M.pW)}),ef(this,"handleLogin",e=>{let{fingerprintData:o}=this.props;o&&!o.current.submitTriggeredTime&&(o.current.submitTriggeredTime=performance.now()),e&&e.preventDefault();let{navigate:t,location:i,login:s,showToast:a,isAuthenticated:n,isLimitedLoginUser:l,isSwitchAccount:r,noImmediateRedirect:c,attributionLabel:d}=this.props,{email:_,password:h,recaptchaV3Token:g}=this.state,{authenticateWithSso:u}=this.props,{isSsoEmail:m,exchangeCodeToTokenUrl:p,existingUserSso:f,existingUserIsSso:w,ssoAuthorizationUri:x}=this.state;if(m){if(!f)return void this.props.navigate("/signup/step1/",{state:{email:this.state.email,isSignUpFromLoginError:!1,...i.state,attributionLabel:d}});else if(w){this.trackButtonTap(14367),u({callbacks:{success:e=>{let{authCode:o,state:a}=e;_&&o&&(this.setState({isLoading:!0}),s({sso_user_email:_,sso_auth_code:o,sso_state:a},t,eb(i),{isSwitchAccount:r,recaptchaV3Token:g,noImmediateRedirect:c,component:"LoginFormClassComponent",container:this.props.container},{event_type:7534,view_type:9,view_parameter:63,aux_data:{...n?{login_state:l?T.A.LIMITED:T.A.DEFAULT}:{},signup_login_method:C.A.SSO,upsell_reason:d}}).catch(e=>{(0,b.PM)("unauth.mweb.login.sso.login.error",{code:e.api_error_code,message:e.message}),this.handleLoginFailure(e)}))},error:e=>{(0,b.PM)("unauth.mweb.login.sso.autheticateWithSso.error",{code:e.api_error_code,message:e.message}),this.setState({isLoading:!1}),e.message&&a(({hideToast:o})=>(0,A.jsx)(v.A,{onHide:o,text:e.message||""}))}},exchangeCodeToTokenUrl:p,isLogin:!0,modalUrl:x??""});return}}s({username_or_email:_,password:h},t,eb(i),{isSwitchAccount:r,recaptchaV3Token:g,noImmediateRedirect:c,fingerprintData:o,component:"LoginFormClassComponent",container:this.props.container},{event_type:7534,view_type:9,view_parameter:63,aux_data:{...n?{login_state:l?T.A.LIMITED:T.A.DEFAULT}:{},signup_login_method:C.A.EMAIL,upsell_reason:d}}).catch(e=>this.handleLoginFailure(e)),this.setState({isLoading:!0})}),ef(this,"handleShowMagicLinkForm",e=>{this.setState({showMagicLinkForm:e??!0})}),ef(this,"renderPersonalizedLogin",(e,o)=>{let{isAppFactoryOAuth:t,location:i,noImmediateRedirect:a,attributionLabel:n,emailLoginOnlyForRecoverAccount:r,onForgetPasswordForFacebookRecover:c,lookedupEmail:d}=this.props,{emailValidationError:_,passwordValidationError:h,isSsoFlow:g,isValid:u,password:m,shouldShowSignUpButton:p}=this.state,{connectedToFacebook:f,connectedToGoogle:b,email:w,firstName:x,hasPassword:P,avatarSrc:k}={connectedToFacebook:e.connected_to_facebook,connectedToGoogle:e.connected_to_google||!!e.gplus_url,email:e.email,firstName:e.first_name,hasPassword:e.has_password,avatarSrc:e.image_medium_url||e.medium_image_url||""},z=!!i.state&&!!i.state.userInfo,v=!P&&!f&&!b,L=P||v,E=b||v,S=L&&(f||v||E)&&!g,T=x?(0,j.vQ)(this.props.i18n.bt("Welcome back, {{name}}!", "Welcome back, {{name}}!", "Heading on personalized login page, followed by user's name", undefined, true),{name:x}):this.props.i18n.bt("Welcome back!", "Welcome back!", "Welcome message on user login page", undefined, true),C=()=>L&&(0,A.jsxs)(s.Fragment,{children:[(0,A.jsx)(X,{email:(w??"")||(d??""),emailLoginOnlyForRecoverAccount:r,emailValidationError:_,handleChangeEmail:this.handleChangeEmail,handleChangePassword:this.handleChangePassword,handlePasswordReset:this.handlePasswordReset,hideEmailField:!1,isSsoFlow:g,isValid:u,onForgetPasswordForFacebookRecover:c,onLoginClick:this.onLoginClick,onSignUpClick:this.onSignUpClick,onSubmit:this.handleLogin,password:m,passwordValidationError:h,shouldShowSignUpButton:p,showEmailAsText:!0,validateEmailOnBlur:this.validateEmailOnBlur,validatePasswordOnBlur:this.validatePasswordOnBlur}),o&&this.renderMagicLinkButton()]});return(0,A.jsxs)(s.Fragment,{children:[z&&(0,A.jsx)(ec.default,{}),(0,A.jsxs)(s.Fragment,{children:[(0,A.jsxs)(l.az,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginBottom:L?-3:5,marginTop:5,children:[(0,A.jsx)(l.so,{alignItems:"stretch",justifyContent:"center",children:(0,A.jsx)(l._Y,{accessibilityLevel:1,overflow:"normal",size:"400",children:T})}),(0,A.jsx)(l.az,{marginBottom:3,marginTop:3,children:(0,A.jsx)(y.eu,{name:x||"",size:"lg",src:k})}),!L&&(0,A.jsx)(l.az,{children:(0,A.jsx)(l.KJ,{align:"center",children:w})})]}),(0,A.jsxs)(l.az,{marginBottom:6,marginEnd:"auto",marginStart:"auto",marginTop:3,maxWidth:400,children:[C(),S&&(0,A.jsx)(l.az,{marginBottom:3,marginTop:3,children:(0,A.jsx)(l.KJ,{align:"center",size:"100",weight:"bold",children:this.props.i18n.bt("Or", "OR", "Separator for email login button and social login button", undefined, true)})}),!g&&(0,A.jsx)(ee.A,{attributionLabel:n,container:"LoginFormClassComponent",google:E,line:v,next:eb(i),noImmediateRedirect:a,phoneNumber:!0})]})]}),(0,A.jsxs)(l.az,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"center",marginTop:2,children:[(0,A.jsxs)(l.az,{alignItems:"start","data-test-id":"login-switch-account",direction:"row",display:"flex",justifyContent:"center",wrap:!0,children:[(0,A.jsx)(l.az,{marginEnd:1,children:(0,A.jsx)(l.KJ,{align:"center",inline:!0,children:this.props.i18n.bt("Not you?", "Not you?", "Short message on the bottom of the login modal that prompts a user to log in to a different account", undefined, true)})}),(0,A.jsx)(l.KJ,{color:"default",inline:!0,weight:"bold",children:(0,A.jsx)(eh,{href:`/login/${i.search||""}`,onClick:this.handleNotYouClick,children:this.props.i18n.bt("Log in with a different account", "Log in with a different account", "Short message on the bottom of the login modal that prompts a user to log in to a different account", undefined, true)})})]}),(0,A.jsxs)(l.az,{display:"flex",justifyContent:"center",marginTop:4,children:[(0,A.jsx)(l.az,{"data-test-id":"signup-modal-personalized",marginEnd:1,children:(0,A.jsx)(l.KJ,{children:this.props.i18n.bt("No account?", "No Account?", "Prompt for signing up", undefined, true)})}),(0,A.jsx)(l.KJ,{color:"default",weight:"bold",children:(0,A.jsx)(eh,{href:"/signup/step1/",onClick:this.handleNoAccountClick,state:{...i.state,isAppFactoryOAuth:t,attributionLabel:n},children:this.props.i18n.bt("Sign up", "Sign up", "Prompt for signing up", undefined, true)})})]})]})]})}),ef(this,"renderLoginButtons",({isDividerOnTop:e,customLoginOption:o})=>{if(this.state.isSsoFlow)return null;let{isAppFactoryOAuth:t,isBeforeHydration:i,location:s,noImmediateRedirect:a,attributionLabel:n,i18n:r}=this.props,d=(0,I.y1)().getItem(c.ZH),_=(0,A.jsx)(ee.A,{apple:!i&&!!d||t,attributionLabel:n,container:"LoginFormClassComponent",google:!0,line:!0,next:eb(s),noImmediateRedirect:a,phoneNumber:!0}),h=(0,A.jsx)(l.az,{marginBottom:2*!!e,marginTop:2*!e,children:(0,A.jsx)(l.KJ,{align:"center",size:"200",weight:"bold",children:r.bt("Or", "OR", "Separator for email login button and social login button", undefined, true)})});return e?(0,A.jsxs)(l.az,{children:[h,o,_]}):(0,A.jsxs)(l.az,{children:[o,_,h]})}),ef(this,"renderMagicLinkButton",()=>(0,A.jsx)(l.az,{"data-test-id":"magic-link-login-button",marginTop:2,children:(0,A.jsx)(ei,{onTap:()=>this.handleShowMagicLinkForm(!0)})})),ef(this,"renderInfoBanner",()=>{let{infoBannerMessage:e}=this.state,{i18n:o}=this.props;return(0,A.jsxs)(l.az,{alignItems:"center",color:"infoWeak",direction:"row",display:"flex",paddingX:4,paddingY:4,rounding:400,children:[(0,A.jsx)(l.az,{marginEnd:4,children:(0,A.jsx)(l.In,{accessibilityLabel:o.bt("Info icon on the login form info banner", "Info icon on the login form info banner", "mweb.unauth.loginForm.infoBanner.icon", undefined, true),color:"info",icon:"circle-information",size:20})}),(0,A.jsx)(l.KJ,{inline:!0,children:e})]})})}componentDidMount(){let{navigate:e,location:o,showToast:t}=this.props;if(o.state&&o.state.shouldShowAccountExistsToast&&(t(({hideToast:e})=>(0,A.jsx)(v.A,{onHide:e,text:this.props.i18n.bt("Looks like you already have a Pinterest account. Please log in.", "Looks like you already have a Pinterest account. Please log in.", "Toast showing that a user already has a Pinterest account and can login normally", undefined, true)})),o.state)){let{shouldShowAccountExistsToast:t,...i}=o.state;e("/login/",{replace:!0,state:i})}(0,R.A)(o.search).message===L.Pg&&t(({hideToast:e})=>(0,A.jsx)(v.A,{duration:1e4,onHide:e,text:(0,E.A)(this.props.i18n,o)}));let i=()=>{(0,M.x6)(e=>this.setState({recaptchaV3Token:e}),()=>{},M.pW)};if(i(),setInterval(i,M.oX),o.state&&o.state.keychainiOSAutologinError){let e=o.state.keychainiOSAutologinError,t=e.code,i=t===S.Um?{emailValidationError:e.message}:{passwordValidationError:e.message};this.setState({apiErrorCode:t,hasKeychainErrorShown:!1,...i})}o.state?.userInfo?.email&&this.checkIfUserIsSso({hasInitialEmail:!0})}static getDerivedStateFromProps(e,o){let{isAuthenticated:t,isLimitedLoginUser:i,location:s,loggedOutUserInfo:a,viewingUser:n,navigate:l}=e;return(0,R.A)(s.search).show_qr_app_error?(l("/login/",{replace:!0}),{showQRAppErrorBanner:!0}):s.state&&s.state.userInfo?{email:s.state.userInfo.email}:t||!a||o.optOutFromPersonalizedForm?i&&n&&!o.optOutFromPersonalizedForm?{email:n.email}:null:{email:a.email}}render(){let{isLimitedLoginUser:e,location:o,loggedOutUserInfo:t,isAppFactoryOAuth:i,viewingUser:a,showPLPBanner:n,plpBannerPin:r,i18n:c,hasSenderContext:d,showKeychainError:_,attributionLabel:h,checkExperiment:g,emailLoginOnlyForRecoverAccount:u,onForgetPasswordForFacebookRecover:m,lookedupEmail:p,isLoadingFingerprintContext:f,showToast:b}=this.props,w=g("mweb_unauth_magic_link_login").anyEnabled,x=o.state&&o.state.shouldShowLoginBelow||!1,{apiErrorCode:z,email:y,emailValidationError:v,passwordValidationError:j,isLoading:L,isSsoFlow:E,isValid:T,optOutFromPersonalizedForm:C,password:F,shouldShowSignUpButton:B,hasKeychainErrorShown:M,showLoginRateLimitedModal:I,showLoginAssistanceGoogleModal:U,showInfoBanner:O,infoBannerMessage:K,showQRAppErrorBanner:W,showMagicLinkForm:D}=this.state,V=e?a:t;o.state&&o.state.userInfo&&(V=o.state.userInfo);let N=g("mweb_unauth_deprecation_fb_banner_iteration").anyEnabled,G=z>0&&z===S.f7,H=e=>(0,A.jsxs)(s.Fragment,{children:[!x&&!u&&this.renderLoginButtons({isDividerOnTop:x}),(0,A.jsx)(X,{email:y||(p??""),emailLoginOnlyForRecoverAccount:u??!1,emailValidationError:v,handleChangeEmail:this.handleChangeEmail,handleChangePassword:this.handleChangePassword,handlePasswordReset:this.handlePasswordReset,isSIWAError:G,isSsoFlow:E,isValid:T,onForgetPasswordForFacebookRecover:m,onLoginClick:this.onLoginClick,onSignUpClick:this.onSignUpClick,onSubmit:this.handleLogin,password:F,passwordValidationError:j,shouldShowSignUpButton:B,validateEmailOnBlur:this.validateEmailOnBlur,validatePasswordOnBlur:this.validatePasswordOnBlur}),e&&w&&this.renderMagicLinkButton(),x&&!u&&this.renderLoginButtons({isDividerOnTop:x})]}),q=(0,A.jsxs)(l.az,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"center",marginTop:2,children:[(0,A.jsxs)(l.so,{alignItems:"stretch",justifyContent:"center",children:[(0,A.jsx)(l.az,{"data-test-id":"signup-link",marginEnd:1,children:(0,A.jsx)(l.KJ,{children:c.bt("No account?", "No Account?", "Prompt for signing up", undefined, true)})}),(0,A.jsx)(l.KJ,{color:"default",weight:"bold",children:(0,A.jsx)(eh,{href:"/signup/step1/",onClick:this.handleNoAccountClick,state:{email:y,isAppFactoryOAuth:i,next:(0,R.A)(o.search).next,attributionLabel:h},children:c.bt("Sign up", "Sign up", "Prompt for signing up", undefined, true)})})]}),!i&&(0,A.jsx)(em.A,{})]});if(D)return(0,A.jsx)(ed,{email:y,emailValidationError:v,handleChangeEmail:this.handleChangeEmail,handleShowMagicLinkForm:this.handleShowMagicLinkForm,isValid:T,loginOptions:H(!1),renderLoginButtons:this.renderLoginButtons,showToast:b,signupOptions:q,validateEmailOnBlur:this.validateEmailOnBlur});let $=(0,A.jsxs)(s.Fragment,{children:[(N||w)&&!D&&!u&&(0,A.jsx)(l.az,{marginBottom:6,marginTop:6,children:(0,A.jsx)(l.so,{alignItems:"stretch",justifyContent:"center",children:(0,A.jsx)(l._Y,{accessibilityLevel:1,overflow:"normal",size:"500",children:c.bt("Log in to Pinterest", "Log in to Pinterest", "loginForm.header.title", undefined, true)})})}),(0,A.jsxs)(l.az,{"data-test-id":"duplo-login-form",marginBottom:6,marginEnd:"auto",marginStart:"auto",marginTop:3,maxWidth:400,children:[H(!0),N&&!u&&(0,A.jsx)(k,{})]}),!u&&q]});return _?(0,A.jsxs)(s.Fragment,{children:[(0,A.jsxs)(l.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(230, 0, 35, 0.08)",transition:"transform 400ms ease-in-out",transform:M?"translateY(-120%)":"translateY(0%)"}},display:"flex",height:52,justifyContent:"center",children:[(0,A.jsx)(l.nW,{accessibilityLabel:c.bt("Workflow status problem accessibility label", "Workflow status problem accessibility label", "mweb.unauth.keychain_autologin.login_page.error_message.icon", undefined, true),type:"problem"}),(0,A.jsx)(l.az,{marginStart:2,children:(0,A.jsx)(l.KJ,{color:"default",children:c.bt("Sorry, we couldn't log you in", "Oops! We couldn't log you in", "mweb.unauth.keychain_autologin.login_page.error_message", undefined, true)})})]}),(0,A.jsxs)(l.az,{paddingX:4*!!n,children:[V&&!C?this.renderPersonalizedLogin(V,w):$,(L||f)&&(0,A.jsx)(J.A,{})]})]}):(0,A.jsxs)(s.Fragment,{children:[I&&(0,A.jsx)(et.A,{onDismiss:()=>this.setState({showLoginRateLimitedModal:!1})}),U&&(0,A.jsx)(eo,{onDismiss:()=>this.setState({showLoginAssistanceGoogleModal:!1})}),!u&&!N&&(0,A.jsx)(P,{}),W&&(0,A.jsx)(es.default,{}),O&&K&&this.renderInfoBanner(),(d||n&&r)&&(0,A.jsx)(ep.A,{pin:d?void 0:r??void 0}),(0,A.jsxs)(l.az,{paddingX:4*!!n,children:[V&&!C?this.renderPersonalizedLogin(V,w):$,(L||f)&&(0,A.jsx)(J.A,{})]})]})}}function eA(e){(0,s.useEffect)(()=>{(0,i.A)("LoginForm","/app/www/pages/duplo/LoginForm.tsx")},[]);let o=(0,p.A)(),t=(0,n.Zp)(),l=(0,n.zy)(),c=(0,a.wA)(),_=(0,eg.v)(),{showToast:h}=(0,O.CG)(),{isAuthenticated:g,loggedOutUserInfo:m}=(0,a.d4)(e=>e.session),f=(0,eu.Eo)(),b=(0,d.A)(),x=(0,K.A)(),{trackConversionUpsell:P}=(0,U.A)(),k=(0,u._8)(),{authenticateWithSso:z,verifySsoUser:y}=(0,F.Ay)(),{checkExperiment:v}=(0,B.A)(),j=(0,D.AT)(),L=(j?.data?.upsellData?.mwebSocialContextExpGroup??"").startsWith("enabled"),{fingerprintData:E,setupFingerprintSdks:S,isLoadingFingerprintContext:T}=(0,r.e)()??{isLoadingFingerprintContext:!1};return(0,w.A)(()=>{S?.()}),(0,A.jsx)(ew,{...e,attributionLabel:l.state?.attributionLabel,authenticateWithSso:z,checkExperiment:v,dispatch:c,fingerprintData:E,hasSenderContext:L,i18n:o,isAuthenticated:g,isBeforeHydration:x,isLimitedLoginUser:(0,V.b1)(f),isLoadingFingerprintContext:T,location:l,logContextEvent:b,loggedOutUserInfo:m,login:_,navigate:t,requestContext:k,showToast:h,trackConversionUpsell:P,verifySsoUser:y,viewingUser:f})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/31856.en_GB-b84fe03ae529e39c.mjs.map