(self.modernJsonp=self.modernJsonp||[]).push([["82401"],{669456(e,t,a){a.d(t,{B:()=>l,J:()=>d});var n=a(61163),i=a(859471),r=a(979638),o=a(562615);let s=(0,i.createContext)(!0);function l({children:e}){(0,i.useEffect)(()=>{(0,n.A)("InitialPageContext","/app/packages/InitialPageContext.tsx")},[]);let t=(0,r.zy)(),a=(0,i.useRef)(t).current===t;return(0,o.jsx)(s,{value:a,children:e})}function d(){return(0,i.use)(s)}},290204(e,t,a){a.d(t,{A:()=>b});var n=a(859471),i=a(979638),r=a(706114),o=a(401691),s=a(143539),l=a(115795),d=a(768583),c=a(601185),u=a(998556),_=a(484409),p=a(476084),h=a(420818),m=a(803489),g=a(971289),f=a(741383);function b({pageUniqueKey:e,containerPage:t}){let a=(0,s.C)(),b=(0,g.qJ)(),w=(0,i.zy)(),{checkExperiment:y}=(0,c.A)(),{isPaid:A,isSocial:v,isDirect:x,isSEO:j}=(0,d.A)(),S=(0,f.ik)(),I=S?.data?.inviter,P=(0,_.V2)(),z=(0,u.y1)(),T=JSON.parse(P.getItem(o.$y)??"[]"),E=b&&y("dweb_navigational_on_land").anyEnabled,C=b&&"enabled_paid"===y("dweb_navigational_on_land").group,B=b&&"enabled_social"===y("dweb_navigational_on_land").group,M=b&&"enabled_seo_direct"===y("dweb_navigational_on_land").group,R=b&&(y("migration_upsell_manager_redux").anyEnabled||y("migration_upsell_manager_redux_dweb").anyEnabled||y("migration_upsell_manager_redux_dweb_global").anyEnabled),k=(0,p.A)(),N=b&&a&&!P.getItem(o.RR)&&T.length+1>=0&&!T.includes(e)&&v&&(0,l.mg)(w),L=b&&"31"===(0,m.A)(w?.search).utm_source&&(0,l.iK)(w)&&y("dweb_email_referred_board_page_upsell_experiment").anyEnabled;(0,n.useEffect)(()=>{if(R)k((0,h.op)(e,t));else if(a&&!P.getItem(o.RR)){let n=C&&A||B&&v||M&&(x||j)||L;(T.length+1>=4||n&&T.length+1>=0)&&!T.includes(e)?(a.showDesktopSignupModal({signupFlow:{type:"login"},attributionLabel:`navigation_${t}`,container:t,reason:"UPSELL_LOGIN_OR_SIGNUP",isWashBlocking:!!L}),P.setItem(o.RR,"true"),P.removeItem(o.$y),z.setItem(r.jB,0)):N||P.setItem(o.$y,JSON.stringify([...new Set([...T,e])]))}},[e,t,4,a,P,z,k,R,E,x,j,A,v,C,B,M,T,L,N,y]),(0,n.useEffect)(()=>{if(!N||!I)return;R&&k((0,h.cM)(I,t));let e=[];if(y("ce_dweb_unauth_splp_blocking_no_delay").anyEnabled)if(R)k((0,h.is)(t));else{let{showDesktopSignupModal:e}=a;e({signupFlow:{type:"signup"},attributionLabel:`delay_${t}`,container:t,reason:"UPSELL_LOGIN_OR_SIGNUP"}),P.setItem(o.RR,"true")}else if(y("ce_dweb_unauth_splp_blocking_3s").anyEnabled){let n=setTimeout(()=>{if(R)k((0,h.is)(t));else{let{showDesktopSignupModal:e}=a;e({signupFlow:{type:"signup"},attributionLabel:`delay_${t}`,container:t,reason:"UPSELL_LOGIN_OR_SIGNUP"}),P.setItem(o.RR,"true")}},3e3);e.push(n)}else if(y("ce_dweb_unauth_splp_blocking").anyEnabled){let n=setTimeout(()=>{if(R)k((0,h.is)(t));else{let{showDesktopSignupModal:e}=a;e({signupFlow:{type:"signup"},attributionLabel:`delay_${t}`,container:t,reason:"UPSELL_LOGIN_OR_SIGNUP"}),P.setItem(o.RR,"true")}},6e3);e.push(n)}return()=>{e.forEach(e=>clearTimeout(e))}},[I,N,R,k,t]),(0,n.useEffect)(()=>{if(!N||!I)return;let e=!1,n=()=>{e||(requestAnimationFrame(()=>{(()=>{let{scrollY:e}=window;if(e>1){if(R)k((0,h.Y0)(t));else if(y("ce_dweb_unauth_splp_blocking").anyEnabled||y("ce_dweb_unauth_splp_blocking_no_delay").anyEnabled||y("ce_dweb_unauth_splp_blocking_3s").anyEnabled){let{showDesktopSignupModal:e}=a;e({signupFlow:{type:"signup"},attributionLabel:`scroll_${t}`,container:t,reason:"UPSELL_LOGIN_OR_SIGNUP"}),P.setItem(o.RR,"true")}}})(),e=!1}),e=!0)};return window.addEventListener("scroll",n,{passive:!0}),()=>{window.removeEventListener("scroll",n)}},[I,N,R,k,t])}},850462(e,t,a){a.d(t,{A:()=>r});var n=a(257300),i=a(803489);let r=(e=()=>{})=>{let t=(0,i.A)(window.location.search),{invite_code:a}=t;if(!a)return void e(t);let r=encodeURIComponent(encodeURIComponent(a));(0,n.A)({url:"/v3/invite_code/attribution/land/",method:"POST",data:{invite_code:r}})}},58276(e,t,a){a.d(t,{A:()=>n});let n=(0,a(859471).createContext)(null)},621654(e,t,a){a.d(t,{A:()=>n});let n=(0,a(859471).createContext)(null)},91760(e,t,a){a.d(t,{A:()=>M});var n=a(61163),i=a(859471),r=a(445205),o=a(999459),s=a(17775),l=a(1807),d=a(323510),c=a(961105),u=a(88894),_=a(472723),p=a(749566),h=a(851116),m=a(366199),g=a(54240),f=a(161235),b=a(186707),w=a(504452),y=a(449344),A=a(844255),v=a(639650),x=a(81920),j=a(562615);let S=["initial_app_load","client_route_push"],I=(0,s.lo)("PwtSurface"),P="NavigationComplete",z="VisuallyComplete",T=()=>{(0,u.Kz)()},E=e=>{if(e.metricConfig.constraints.every(t=>e.constraintMap[t])){let t=Math.max(...e.metricConfig.constraints.map(t=>e.constraintMap[t]));return((e,t)=>{let{metricConfig:{metricId:a,pwtStaticContext:n,annotateExperiments:i},annotations:r,binaryAnnotations:s,constraintMap:d,startTime:_,imageTimings:p,spans:h,traceId:g}=e;(0,w.A)(`Report_PWT_Complete_${(0,o.u5)(a)}`,_,t);let f=(0,c.I)({annotateExperiments:[...i??[]],annotations:r,binaryAnnotations:s,constraintMap:d,endTime:t,imageTimings:p,metricId:a,pwtMeasures:(0,y.vs)(),pwtStaticContext:n,startTime:_,traceId:g,spans:h});try{var b;let e;b=String(f.binaryAnnotationMap["metricId.surface"].value),e=performance.getEntriesByType("resource").filter(e=>e.name.includes("i.pinimg")).reduce((e,t)=>{let a=t.name.replace(".jpg","").split("/");return{[a[a.length-1]]:{downloadSize:t.name.split("/")[3].split("x")[0]},...e}},{}),[...Array.from(document.getElementsByTagName("img")).map(t=>{let a=t.src.replace(".jpg","").split("/"),n=a[a.length-1];if(e[n]){let a=(0,m.d2)(t)?.width||1,i=parseInt(e[n].downloadSize??"0",10);return{fileName:n,renderedSize:a,downloadedSize:i,ratio:i/a}}return{fileName:n,renderedSize:1,downloadedSize:1,ratio:1}}),...Array.from(document.querySelectorAll('div[role="img"]')).map(t=>{let a=t.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),n=a[a.length-1];if(e[n]&&t instanceof HTMLDivElement){let a=(0,m.d2)(t)?.width||1,i=parseInt(e[n].downloadSize??"0",10);return{fileName:n,renderedSize:a,downloadedSize:i,ratio:i/a}}return{fileName:n,renderedSize:1,downloadedSize:1,ratio:1}})].forEach(e=>{let{ratio:t,fileName:a,downloadedSize:n}=e;e.ratio>1.05&&(0,l.DM)(`checkImageRatio.${b}`,{count:Math.round(10*t)/10,tags:{fileName:`${n}_${a}`}})})}catch(e){(0,l.vV)("image_ratio_check_error",{error:e})}return(0,u.Kz)(),{...e,result:f,status:"DONE"}})(e,t)}return I(`Remaining constraints: ${e.metricConfig.constraints.filter(t=>!e.constraintMap[t]).join(", ")}`),e},C=(e,t)=>{let{constraint:a,time:n}=t,i=(0,o.u5)(e.metricConfig.metricId);return f.A?e.metricConfig.constraints.find(e=>e===a)?e.constraintMap[a]?(I(`constraint "${a}" is already complete.`),(0,l.vV)("duplicated_constraint_complete",{constraint:a,action:i}),e):(I(`marking constraint "${a}" as complete ${n||performance.now()}`),n?(0,b.A)(`constraint_${a}_is_complete`,n):(0,b.A)(`constraint_${a}_is_complete`),E({...e,constraintMap:{...e.constraintMap,[a]:n||f.A.now()}})):(I(`marked constraint "${a}" is not a required constraint.`),e):((0,l.vV)("missing_window_performance",{action:i}),e)},B=new Set;function M({children:e,...t}){let a,s;(0,i.useEffect)(()=>{(0,n.A)("PwtSurface","/app/packages/pwt-logger/PwtSurface.tsx")},[]);let c=(0,p.A)(),m=(e=>{if(!e)return"initial_app_load";switch(e.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}})(c),b=t.measureGridVisuallyComplete?["web_masonry_v2"]:[],w=[...t.annotateExperiments??[],...b],{context:y}=(({surface:e,constraints:t,segment:a,measureGridVisuallyComplete:n,annotateExperiments:s,customEnabledNavigationTypes:d,navigationInfo:{clientNavigation:c,navigationType:p},sampleRate:m})=>{var b;let w,y=(0,i.useRef)("NOT_SET"),j=(0,h.A)(),{getState:M,dispatch:R}=(b={status:"DISABLED",metricConfig:null},w=(0,i.useRef)(b),{getState:()=>w.current,dispatch:e=>{w.current=((e,t)=>{if(I("dispatch action",t),"INIT_ROUTE"===t.type)return((e,t)=>{let{metricConfig:a,startTime:n,isSampled:i,disablePWTLogging:r}=t;if(r||"TIMING"!==e.status||n===e.startTime||T(),!a)return{status:"DISABLED",metricConfig:null};let s=(0,o.u5)(a.metricId);if("TIMING"===e.status&&e.startTime===n&&e.constraintMap[P])return(0,l.vV)("duplicated_init_route_action",{action:s}),e;if(!r){let e=(0,v.q)();(0,l.DM)(`handler.${s}`,{tags:{handler:e}});let t=void 0!==a.metricId.isAuthenticated&&{tags:{isAuth:a.metricId.isAuthenticated}}||void 0;"Other"===a.pwtStaticContext.browserName&&!1===a.metricId.isAuthenticated&&"initial_app_load"===a.metricId.navigationType?((0,l.DM)(`TIMING.${s}`,{tags:{userAgent:window?.navigator?.userAgent}}),(0,l.DM)(`TIMING.sampled.${s}`,{tags:{userAgent:window?.navigator?.userAgent},sampleRate:.03})):((0,l.DM)(`TIMING.${s}`),(0,l.DM)(`TIMING.sampled.${s}`,{sampleRate:.03})),(0,_.S)({resultLog:`TIMING.${s}`,annotateExperiments:a.annotateExperiments||[],getExperimentGroup:a.pwtStaticContext.getExperimentGroup,options:t})}return C({traceId:(0,u.lo)()||(0,u.Ay)("initial_app_load"===a.metricId.navigationType,a.pwtStaticContext.getServerData()?.trace_id),status:"TIMING",metricConfig:a,startTime:n,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:i,spans:[]},{constraint:P,disablePWTLogging:r})})(e,t.payload);if("TIMING"!==e.status)return I(`ignoring action due to invalid state ${e.status}`,t),e;switch(t.type){case"ABORT":T();let a={type:"ABORT",reason:t.reason};return{...e,status:"DONE",result:a};case"ANNOTATE":let{name:n}=t.payload;if(!f.A)return e;let i=f.A.now();return I(`adding annotation {${n}: ${i}}`),{...e,annotations:{...e.annotations,...{[n]:i}}};case"BINARY_ANNOTATE":let{name:r,value:s,annotationType:d}=t.payload;return I(`adding binary annotation {${r}: ${s}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,...{[r]:{value:s,type:d}}}};case"MARK_CONSTRAINT_COMPLETE":return C(e,t.payload);case"REMOVE_CONSTRAINT":return((e,t)=>{if(!f.A){let t=(0,o.u5)(e.metricConfig.metricId);(0,l.vV)("missing_window_performance",{action:t})}I(`removing constraint "${t}"`);let a=e.metricConfig.constraints.filter(e=>e!==t),{[t]:n,...i}=e.constraintMap;return E({...e,constraintMap:i,metricConfig:{...e.metricConfig,constraints:a}})})(e,t.payload);case"SET_SEGMENT":var c=t.payload;if(!f.A){let t=(0,o.u5)(e.metricConfig.metricId);(0,l.vV)("missing_window_performance",{action:t})}I(`updating pwt segment to "${c}"`);let p={...e.metricConfig.metricId,segment:c};return{...e,metricConfig:{...e.metricConfig,metricId:p}};case"SET_VISUALLY_COMPLETE_RESULT":{let{payload:{imageTimings:a}}=t;if(0===a.length)return T(),{...e,status:"DONE",result:{type:"ABORT",reason:"visuallyComplete_noImages"}};let n=Math.max(...a.map(e=>e.responseEnd||0));return C({...e,imageTimings:a},{constraint:z,time:n})}case"ADD_SUBSPAN":let{startTime:h}=e,{payload:{name:m,startTime:b,endTime:w,annotations:y,binaryAnnotations:A,parentId:x}}=t;return{...e,spans:[...e.spans,{name:m,id:(0,g.A)(),startTime:b||h,endTime:w,annotationMap:{...y},binaryAnnotationMap:{...A},parentId:x}]};case"START_SUBSPAN":return{...e,spans:[...e.spans,{name:t.payload.name,id:(0,g.A)(),startTime:f.A?f.A.now():0,endTime:1/0,annotationMap:{...t.payload.annotations},binaryAnnotationMap:{...t.payload.binaryAnnotations},parentId:t.payload.parentId}]};case"STOP_SUBSPAN":let j=e.spans.findIndex(e=>e.name===t.payload.name);return j>-1?(e.spans[j].endTime=f.A?f.A.now():0,t.payload.annotations&&(e.spans[j].annotationMap={...e.spans[j].annotationMap,...t.payload.annotations}),t.payload.binaryAnnotations&&(e.spans[j].binaryAnnotationMap={...e.spans[j].binaryAnnotationMap,...t.payload.binaryAnnotations})):(0,l.vV)("invalid_subspan_stop_name",{name:t.payload.name}),e;default:let S=(0,o.u5)(e.metricConfig.metricId);return(0,l.vV)("invalid_pwt_surface_action",{action:S}),e}})(w.current,e)}}),k=(0,A._8)();if(y.current!==c&&(y.current=c,j)){let{isAuthenticated:i}=j,r=e&&p&&(d||S).includes(p)?{metricId:{type:"surface",surface:e,navigationType:p,isAuthenticated:i,segment:a},annotateExperiments:s,constraints:[P,...t||[],...n?[z]:[]],pwtStaticContext:j}:null;(0,x.GV)("webapp.pwt_surface.init_route",{tags:{surface:e,navigationType:p,isAuthenticated:i}});let o=!B.has(c);R({type:"INIT_ROUTE",payload:{metricConfig:r,startTime:c?c.time:0,isSampled:!m||Math.random()<m,disablePWTLogging:!o}}),o&&B.add(c)}let N=M();if((0,i.useEffect)(()=>()=>{B.delete(c)},[c]),(0,i.useEffect)(()=>{let e=e=>{R({type:"ABORT",reason:e})};r.A.onSessionPause(e);let t=window.innerHeight,a=window.innerWidth,n=()=>{let e=Math.abs(window.innerHeight-t),i=Math.abs(window.innerWidth-a),r=window.innerHeight!==t,o=window.innerWidth!==a,s={handler:(0,v.q)(),deviceType:j?.deviceType??"unknown",isAuthenticated:j?.isAuthenticated??"unknown",platform:k.userAgent.platform??"unknown"};((0,x.GV)("webapp.PwtLogger.handleResize",{sampleRate:1,tags:{...s,heightChanged:r,widthChanged:o}}),r&&(0,x.uI)("webapp.PwtLogger.resizeHeightDelta",e,{sampleRate:1,tags:s}),o&&(0,x.uI)("webapp.PwtLogger.resizeWidthDelta",i,{sampleRate:1,tags:s}),window.removeEventListener("resize",n),(j?.deviceType!=="phone"||(o||!r||!(e<=150))&&(r||o))&&(j?.deviceType!=="desktop"||r||o))?R({type:"ABORT",reason:"windowResized"}):(0,x.GV)("webapp.PwtLogger.skipResizeAbort",{sampleRate:1,tags:{...s,heightChanged:r,widthChanged:o}})};return window.addEventListener("resize",n),()=>{let t=M();I("handling unmount",t),"TIMING"===t.status&&T(),r.A.removePauseListener(e),window.removeEventListener("resize",n)}},[]),"TIMING"!==N.status||!N.constraintMap[P])return{state:N,context:null};let{startTime:L,metricConfig:O}=N;return{state:N,context:{abort:e=>R({type:"ABORT",reason:e}),addAnnotation:e=>R({type:"ANNOTATE",payload:{name:e}}),addBinaryAnnotation:(e,t,a)=>R({type:"BINARY_ANNOTATE",payload:{name:e,value:t,annotationType:a}}),addSubspan:(e,t,a,n={},i={},r=null)=>R({type:"ADD_SUBSPAN",payload:{name:e,startTime:t,endTime:a,annotations:n,binaryAnnotations:i,parentId:r}}),getId:()=>L,getMetricId:()=>O.metricId,markConstraintComplete:e=>R({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:e,time:f.A?f.A.now():0}}),removeConstraint:e=>R({type:"REMOVE_CONSTRAINT",payload:e}),setSegment:e=>R({type:"SET_SEGMENT",payload:e}),setVisuallyCompleteResult:O.constraints.includes(z)?e=>R({type:"SET_VISUALLY_COMPLETE_RESULT",payload:e}):null,startSubspan:(e,t={},a={},n=null)=>R({type:"START_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:a,parentId:n}}),stopSubspan:(e,t={},a={},n=null)=>R({type:"STOP_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:a,parentId:n}})}}})({...t,annotateExperiments:w,navigationInfo:{navigationType:m,clientNavigation:c}});return s=!!(a=(0,d.Y)()),(0,i.useEffect)(()=>{if(s){let e=a?.getMetricId(),t=e?(0,o.u5)(e):null;(0,l.vV)("nested_pwt_surface",{action:t})}},[s]),(0,j.jsx)(d.n,{value:y,children:e})}},323510(e,t,a){a.d(t,{Y:()=>i,n:()=>n});let{Provider:n,getMaybe:i}=(0,a(987628).A)("pwtSurfaceContext")},749566(e,t,a){a.d(t,{A:()=>r});var n=a(859471),i=a(58276);function r(){return(0,n.use)(i.A)}},851116(e,t,a){a.d(t,{A:()=>r});var n=a(859471),i=a(621654);function r(){return(0,n.use)(i.A)}},12525(e,t,a){a.d(t,{A:()=>f});var n=a(61163),i=a(859471),r=a(979638),o=a(586733),s=a(693154),l=a(91760),d=a(803489),c=a(236503),u=a(189851),_=a(938380),p=a(763922),h=a(354818),m=a(562615);function g({boardData:e,refreshBoardData:t}){(0,i.useEffect)(()=>{(0,n.A)("BoardPageContainer","/app/www/save/board/BoardPageContainer/BoardPageContainer.tsx")},[]);let a=e?.id,o=(0,u.oW)()(a??"")||null,{search:s,state:g}=(0,r.zy)();(0,p.A)();let f=g?.newBoard,b=(0,c.bh)(e?.sensitivity),w=f&&!b&&e?.should_show_more_ideas?_.a.jumpstartBoard:null,y=(0,d.A)(s);return(0,m.jsx)(l.A,{measureGridVisuallyComplete:!0,surface:"board",children:(0,m.jsx)(h.A,{board:o??e,initialModalType:w,refreshBoardData:t,showPulsar:!!y.showPulsar})})}function f({boardData:e,refreshBoardData:t}){(0,i.useEffect)(()=>{(0,n.A)("BoardPageAuthDesktop","/app/www/BoardPage/BoardPageAuthDesktop.tsx")},[]);let a=(0,s.A)(),{username:l}=(0,r.g)(),d=a.isAuth&&a.username===l?3069:3070,{logContextEvent:c}=(0,o.o)();return(0,i.useEffect)(()=>{e&&c({aux_data:{board_id:e.id,board_pin_count:e.pin_count},component:178,event_type:13,view_type:5,view_parameter:d})},[e,c,d]),(0,m.jsx)(g,{boardData:e,refreshBoardData:t})}},72040(e,t,a){a.d(t,{A:()=>_});var n=a(61163),i=a(859471),r=a(19821),o=a(538329),s=a(562615);let l=new r.rk(1),d=new r.K5([l]),c=new r.K5([d]);function u(){return(0,s.jsx)(r.az,{dangerouslySetInlineStyle:{__style:{background:"linear-gradient(181deg, rgba(0, 0, 0, 0.50) 0.8%, rgba(0, 0, 0, 0.20) 50.98%, rgba(0, 0, 0, 0.50) 99.19%)"}},height:"100%",left:!0,position:"absolute",width:"100%",zIndex:d})}function _({board:e}){(0,i.useEffect)(()=>{(0,n.A)("MobileBoardHeaderImage","/app/www/board/Header/MobileBoardHeaderImage/MobileBoardHeaderImage.tsx")},[]);let t=(0,o.A)(),{featured_board_metadata:a,name:d}=e,{board_subtitle:_}=a||{},p=e.header?.large_image_url||"";return(0,s.jsx)(r.az,{"data-test-id":"board-header-image-container",marginBottom:0,marginEnd:-2,marginStart:-2,width:"calc(100% + 16px",children:(0,s.jsxs)(r.n1,{height:250,width:"100%",children:[(0,s.jsx)(u,{}),(0,s.jsx)(r.az,{height:"100%",left:!0,position:"absolute",width:"100%",zIndex:l,children:(0,s.jsx)(r._V,{alt:t.bt("Board header image", "Board Header Image", "board.header.mobileBoardHeaderImage", undefined, true),fit:"cover",naturalHeight:312,naturalWidth:472,role:"presentation",src:p})}),(0,s.jsx)(r.az,{display:"flex",height:"100%",paddingX:4,paddingY:3,position:"relative",zIndex:c,children:(0,s.jsxs)(r.so,{dataTestId:"board-name-container",direction:"column",justifyContent:"end",children:[_&&(0,s.jsx)(r.az,{marginBottom:2,children:(0,s.jsx)(r.KJ,{color:"light",weight:"bold",children:_})}),(0,s.jsx)(r._Y,{accessibilityLevel:1,color:"light",size:"600",children:d})]})})]})})}},709514(e,t,a){a.d(t,{U:()=>l,o:()=>s});var n=a(859471),i=a(987628),r=a(562615);let{Provider:o,get:s}=(0,i.A)("Session");function l({children:e}){let[t,a]=(0,n.useState)(void 0),i=(0,n.useMemo)(()=>({unauthBoardInvite:t,setUnauthBoardInvite:a}),[t]);return(0,r.jsx)(o,{value:i,children:e})}},986836(e,t,a){a.d(t,{$3:()=>eU,Ay:()=>e$,Xl:()=>eO});var n=a(61163),i=a(859471),r=a(106386),o=a(979638),s=a(19821),l=a(706114),d=a(586733),c=a(290204),u=a(296221),_=a(932369),p=a(807882),h=a(567176),m=a(662449),g=a(538329),f=a(123576),b=a(669456),w=a(850462),y=a(214429),A=a(768583),v=a(91760),x=a(851116),j=a(844255),S=a(703574),I=a(75840),P=a(430705),z=a(618243),T=a(998556),E=a(284966),C=a(319571),B=a(67765),M=a(706466),R=a(803489),k=a(971289),N=a(168079),L=a(720575),O=a(666728),U=a(131094),$=a(160587),G=a(900885),D=a(562615);let H="BoardPageSkeletonLoader__",V=()=>((0,i.useEffect)(()=>{(0,n.A)("BoardPageSkeletonLoader","/app/www/board/duplo/BoardPageSkeletonLoader.tsx")},[]),(0,D.jsxs)(i.Fragment,{children:[(0,D.jsx)(U.A,{unsafeCSS:[{name:`${H}board_title`,width:280,height:51},{name:`${H}profile_pic`,width:51,height:51}].map(({name:e,width:t,height:a})=>(0,G.A)({name:e,width:t,height:a})).join("")}),(0,D.jsxs)(s.az,{paddingX:2,paddingY:3,children:[(0,D.jsxs)(s.az,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginBottom:6,children:[(0,D.jsx)(s.az,{children:(0,D.jsx)("div",{className:`${H}board_title`})}),(0,D.jsx)(s.az,{children:(0,D.jsx)("div",{className:`${H}profile_pic`})})]}),(0,D.jsx)($.A,{})]})]}));var F=a(224215),W=a(743372),J=a(457315),K=a(989457),Y=a(693154),q=a(393320),X=a(542975),Q=a(427471),Z=a(81920);let ee=e=>{let t=(0,g.A)(),{user:a,invitedByUser:n,inviterFirstName:i}=e;return(0,D.jsxs)(s.az,{alignItems:"center",borderColor:"decorative",borderWidth:"sm",direction:"row",display:"flex",marginBottom:3,marginEnd:-1,marginStart:-1,paddingX:4,paddingY:4,rounding:500,width:"100%",children:[(0,D.jsx)(s.az,{borderColor:"decorative",borderWidth:"lg",dangerouslySetInlineStyle:{__style:{borderColor:"#ffffff",zIndex:-1}},marginTop:-3,rounding:"circle",children:(0,D.jsx)(s.az,{height:34,width:34,children:(0,D.jsx)(K.eu,{color:a?.avatar_color_index,name:a?a.username:"",src:a?a.image_medium_url??"":""})})}),(0,D.jsx)(s.az,{borderColor:"decorative",borderWidth:"lg",dangerouslySetInlineStyle:{__style:{borderColor:"#ffffff",zIndex:-2}},marginStart:-3,marginTop:3,rounding:"circle",children:(0,D.jsx)(s.az,{height:34,width:34,children:(0,D.jsx)(K.eu,{color:n?.avatar_color_index,name:n?n.username:"",src:n?n.image_medium_url??"":""})})}),(0,D.jsxs)(s.az,{marginStart:4,children:[(0,D.jsx)(s.KJ,{weight:"bold",children:t.bt("You're in!", "You're in!", "Text showing that a user has accepted the board invite and is now a part of the board", undefined, true)}),(0,D.jsx)(s.KJ,{children:(0,X.vQ)(t.bt("Start collaborating with {{ invitedByUserName }} on this board", "Start collaborating with {{ invitedByUserName }} on this board", " - ", undefined, true),{invitedByUserName:i})})]})]})};function et({boardId:e,inviteCode:t,inviterFirstName:a,invitedByUser:r,isSeamlessLanding:o,onAccept:s,user:l}){(0,i.useEffect)(()=>{(0,n.A)("GroupBoardAcceptBanner","/app/www/board/duplo/GroupBoardAcceptBanner.tsx")},[]);let{showToast:d}=(0,M.CG)(),c=(0,g.A)(),[u,_]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{s&&Q.A.create("BoardInviteResource",{board_id:e,invited_user_id:l&&l.id,invite_code:t}).callGet().then(()=>{let e=s();e&&e.then(()=>{_(!0),o&&(0,Z.GV)("mweb.social.group_board.seamless.accepted")}).catch(e=>{d(({hideToast:t})=>(0,D.jsx)(h.A,{onHide:t,text:e.message||c.bt("Sorry, something went wrong…", "Oops! Something went wrong…", "Error during board page accepting", undefined, true),type:"error"}))})}).catch(e=>{d(({hideToast:t})=>(0,D.jsx)(h.A,{onHide:t,text:e.message||c.bt("Sorry, something went wrong…", "Oops! Something went wrong…", "Error during board page accepting", undefined, true),type:"error"}))})},[]),u?(0,D.jsx)(ee,{user:l,inviterFirstName:a,invitedByUser:r}):null}let ea=e=>!!(0,R.A)(e.search).accept_invite;var en=a(709514),ei=a(750237),er=a(550552),eo=a(226150),es=a(204398),el=a(955170),ed=a(793613),ec=a(503993),eu=a(871481),e_=a(275439);function ep({inviteCreationDatetime:e,invitedByUser:t,inviterFirstName:a,onAccept:n,onDismiss:i,loginModal:r,isMwebUnauthBoardInviteLanding:l,setShowLoginModal:d,showLoginModal:c}){let u=(0,g.A)(),_=(0,q.A)(),p=(0,o.zy)(),{showToast:h}=(0,M.CG)(),m=`/${t?.username||""}`,f=(0,eo.A)(),b=(0,k.qJ)(),w=f({fn:({event:e})=>{e.stopPropagation&&e.stopPropagation(),i()},modalHeader:(0,er.b9)({firstName:a,i18n:u}),nextLocation:(0,er.zh)(p)}),y=f({fn:({event:e})=>{e.stopPropagation&&e.stopPropagation(),n(),b||c||l||h(({hideToast:e})=>(0,D.jsx)(K.y8,{duration:4e3,onHide:e,text:u.bt("You're in! Save Pins, plan with collaborators and more!", "You're in! Save Pins, plan with collaborators, and more!", "GroupBoardInviteBanner.handleAcceptButtonClick.acceptInviteToastForAuthUser", undefined, true)}))},modalHeader:(0,er.b9)({firstName:a,i18n:u}),nextLocation:(0,er.zh)(p)});return(0,D.jsxs)(s.az,{alignItems:"start",color:"default",display:"flex",elevation:"shadowFloating",marginBottom:2,marginTop:2,maxWidth:400,padding:6,rounding:600,children:[b&&c&&r,(0,D.jsx)(s.az,{marginEnd:2,children:(0,D.jsx)(K.Z7,{collaborators:[{name:a,src:(t instanceof ei.A?t.image_large_url:t?.image_medium_url)||void 0,color:t instanceof ei.A?t.avatar_color_index:void 0}],href:m,role:"link",size:"md"})}),(0,D.jsxs)(s.az,{marginBottom:0,children:[(0,D.jsx)(s.KJ,{color:"default",weight:"normal",children:(0,X.vQ)(u.bt("{{ name }} invited you to collaborate on this board {{age}}", "{{ name }} invited you to collaborate on this board {{age}}", "mweb.board.inviteCard.inviteCopy", undefined, true),{name:(0,D.jsx)(s.KJ,{inline:!0,weight:"bold",children:(0,D.jsx)(s.N_,{display:"inlineBlock",href:m,tapStyle:"none",underline:"hover",children:t?.full_name||""})}),age:(0,D.jsx)(s.KJ,{color:"subtle",inline:!0,children:e&&_(e,!0)})})}),(0,D.jsxs)(s.so,{alignItems:"stretch",justifyContent:"start",children:[(0,D.jsx)(s.az,{display:"inlineBlock",marginEnd:2,marginTop:2,children:(0,D.jsx)(s.$n,{color:"secondary",fullWidth:!0,onClick:w,size:"lg",text:u.bt("Decline", "Decline", "decline board collaborator invite or request", undefined, true)})}),(0,D.jsx)(s.az,{display:"inlineBlock",marginTop:2,children:(0,D.jsx)(s.$n,{color:"primary",fullWidth:!0,onClick:b&&d&&r?()=>d(!0):y,size:"lg",text:u.bt("Accept", "Accept", "accept board invite", undefined, true)})})]})]})]})}function eh({boardId:e}){let t=(0,o.zy)(),{inviter_first_name:n,board_collab_inviter:r,board_url:l,invite_code:d,sender:c,inviter_user_id:u}=(0,R.A)(t.search),[_,p]=(0,i.useState)(!!(n&&l)),[h,m]=(0,i.useState)(!1),f=(0,o.Zp)(),b=(0,g.A)(),w=u??c,y=(0,k.qJ)(),{setUnauthBoardInvite:A}=(0,en.o)(),v=(0,e_.A)(),x=v?.invite?.sender,j=y&&!!x&&d&&r,S=n||x?.first_name||"",I=(0,i.lazy)(()=>Promise.all([a.e("91796"),a.e("18324"),a.e("52670")]).then(a.bind(a,944059)));if((j||!y&&d&&r&&u)&&!_&&p(!0),!_)return null;let P=(0,X.vQ)(b.bt("Log in to accept {{ firstName }}'s board invitation", "Log in to accept {{ firstName }}'s board invite", "GroupBoardInviteBanner.login.firstName", undefined, true),{firstName:S}).join(""),z=(0,D.jsxs)(s.az,{height:"100%",width:"100%",children:[(0,D.jsx)(s.Wd,{zIndex:new s.rk(10001),children:(0,D.jsx)(s.az,{alignItems:"center",display:"flex",height:"100%",paddingY:12,position:"fixed",width:"100%",children:(0,D.jsx)(I,{container:"limited_login",customLoginTagline:P,customSignupTagline:P,handleCloseButtonClick:()=>m(!1),nextUrlParam:`${t.pathname}${t.search}&accept_invite=True`,showCloseIcon:!0,signupFlow:{type:"login"},signupSource:"boardInvite"})})}),(0,D.jsx)(s.az,{alignItems:"center",color:"washDark",display:"flex",height:"100%",left:!0,opacity:70,position:"fixed",top:!0,width:"100%",zIndex:new s.rk(1e4)})]});return y?(0,D.jsx)(ep,{invitedByUser:x,inviterFirstName:S,loginModal:z,onAccept:()=>{m(!0)},onDismiss:()=>p(!1),setShowLoginModal:m,showLoginModal:h}):(0,D.jsx)(ep,{invitedByUser:x,inviterFirstName:S,isMwebUnauthBoardInviteLanding:!0,onAccept:async()=>{let a=`/invited/${t.search}&board_id=${e}&inviter_first_name=${x?.first_name||""}`;A({inviterId:w,boardId:e,hasAcceptedInvite:!1}),f(a)},onDismiss:()=>p(!1)})}function em({boardId:e,boardImageRep:t,boardName:a}){let n=(0,o.zy)(),l=(0,r.wA)(),d=(0,Y.A)(),c=d.isAuth?d.id:void 0,{invite_code:u,seamless:_}=(0,R.A)(n.search),p=(0,ed.b)({board:e,invited_user:c??""}),h=(0,eu.DF)()(c??""),m=(0,W.A)(),f=(0,k.qJ)(),b=(0,g.A)(),{showToast:w}=(0,M.CG)(),y=(0,i.useRef)(!1),[A,v]=(0,i.useState)(!1);(0,I.A)({name:"BoardInvitesResource",options:{current_user:!0,field_set_key:"news"}});let x=(0,r.d4)(({invites:e})=>e[p]?.created_at||void 0),j=(0,P.A)({name:"BoardInviteResource",options:{field_set_key:"boardEdit",board_id:e,invite_code:u,invited_user_id:c}}),S=(0,r.d4)(t=>{let a=(0,ec.A)(t)[e];return a?t.invites[a]:void 0}),z=(0,r.d4)(({users:e,invites:t})=>Object.keys(t).reduce((a,n)=>{let i=t[n];return i&&(a[n]=e[i.invited_by_user]),a},{})[p]),{unauthBoardInvite:T,setUnauthBoardInvite:E}=(0,en.o)(),{boardId:C,inviterId:B,hasAcceptedInvite:L}=T||{},O=C&&B&&!L,U=C&&B&&L;if((0,N.A)(()=>{O&&h&&(async()=>{y.current=!0;try{await l((0,el.sw)(e,h,m)),E({boardId:e,inviterId:B||"",hasAcceptedInvite:!0}),await j.refresh(),w(({hideToast:e})=>(0,D.jsx)(K.y8,{duration:5e3,onHide:e,text:(0,D.jsx)(s.KJ,{children:(0,X.vQ)(b.bt("You can now collaborate on {{boardName}}!", "You can now collaborate on {{boardName}}!", "mweb_group_board_invite_banner.acceptInviteToast", undefined, true),{boardName:(0,D.jsx)(s.KJ,{inline:!0,weight:"bold",children:a})})}),thumbnail:{image:(0,D.jsx)(s._V,{alt:"",fit:"cover",naturalHeight:1,naturalWidth:1,src:t})}}))}catch(e){w(({hideToast:t})=>(0,D.jsx)(K.y8,{onHide:t,text:(0,J.A)(e,"message")??"",type:"error"}))}finally{y.current=!1}})()}),!S||!z||!h||S&&U)return null;let $=z.first_name,G=()=>(v(!0),l((0,el.sw)(e,h,m)));return ea(n)?(f&&w(({hideToast:e})=>(0,D.jsx)(K.y8,{duration:5e3,onHide:e,text:b.bt("You're in! Save Pins, plan with collaborators and more!", "You're in! Save Pins, plan with collaborators, and more!", "GroupBoardInviteBanner.handleAcceptButtonClick.acceptInviteToastForAuthUser", undefined, true)})),(0,D.jsx)(et,{boardId:e,inviteCode:u,invitedByUser:z,inviterFirstName:$||"",isSeamlessLanding:!!_,onAccept:G,user:h})):!y.current&&!A&&!!S&&(0,D.jsx)(ep,{inviteCreationDatetime:x,invitedByUser:z,inviterFirstName:$||"",onAccept:()=>{G()},onDismiss:()=>l((0,es.i0)(e,c??"",m))})}let eg=({isAuthenticated:e,boardId:t,boardImageRep:a,boardName:r})=>((0,i.useEffect)(()=>{(0,n.A)("GroupBoardInviteBanner","/app/www/board/duplo/GroupBoardInviteBanner.tsx")},[]),e)?(0,D.jsx)(em,{boardId:t,boardImageRep:a,boardName:r}):(0,D.jsx)(eh,{boardId:t});var ef=a(369757),eb=a(504490);function ew({handleGoBack:e,hideSensitivityScreen:t,sensitivityScreenAuxData:a}){(0,i.useEffect)(()=>{(0,n.A)("SensitivityScreen","/app/www/board/duplo/SensitivityScreen.tsx")},[]);let r=(0,g.A)(),o=(0,W.A)();return(0,i.useEffect)(()=>{o({component:13860,event_type:13,view_type:5,aux_data:a})},[o]),(0,D.jsx)(s.az,{dangerouslySetInlineStyle:{__style:{background:"rgba(0,0,0,0.8)",paddingTop:260}},display:"flex",height:"100%",justifyContent:"center",position:"fixed",top:!0,width:"100%",zIndex:new s.rk(1),children:(0,D.jsxs)(s.so,{alignItems:"center",direction:"column",gap:{row:0,column:8},maxWidth:500,children:[(0,D.jsx)(s._Y,{align:"center",color:"light",children:r.bt("This board may contain sensitive content", "This board may contain sensitive content", "board.sensitivityScreen.heading", undefined, true)}),(0,D.jsxs)(s.so,{gap:{row:6,column:0},children:[(0,D.jsx)(s.$n,{color:"primary",onClick:e,size:"lg",text:r.bt("Go back", "Go back", "board.sensitivityScreen.backButton", undefined, true)}),(0,D.jsx)(s.$n,{color:"tertiary",onClick:t,size:"lg",text:r.bt("View anyway", "View anyway", "board.sensitivityScreen.viewButton", undefined, true)})]}),(0,D.jsx)(s.az,{padding:4,children:(0,D.jsx)(s.KJ,{align:"center",color:"inverse",overflow:"normal",size:"200",children:(0,X.vQ)(r.bt("If you see anything that violates our {{communityGuidelines}}, please report it to us by clicking the '...' button at the bottom of any Pin", "If you see anything that violates our {{communityGuidelines}}, please report it to us by clicking the \"...\" button at the bottom of any Pin", "board.sensitivityScreen.text", undefined, true),{communityGuidelines:(0,D.jsx)(s.N_,{href:"https://policy.pinterest.com/en/community-guidelines",target:"blank",children:(0,D.jsx)(s.KJ,{color:"inverse",inline:!0,size:"200",underline:!0,children:r.bt("Community Guidelines", "Community Guidelines", "board.sensitivityScreen.communityGuidelines", undefined, true)})})})})})]})})}var ey=a(977779),eA=a(58037),ev=a(72040),ex=a(960516),ej=a(522232),eS=a(736972),eI=a(672404),eP=a(519298),ez=a(654657),eT=a(610850),eE=a(270018);function eC(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let eB=(0,i.lazy)(()=>Promise.all([a.e("95748"),a.e("57425")]).then(a.bind(a,19439))),eM=(0,i.lazy)(()=>a.e("85138").then(a.bind(a,403367))),eR=({boardId:e,children:t,hasFixedHeader:a,viewParameter:n})=>(0,D.jsx)(eS.I,{children:(0,D.jsx)(L.A,{objectIdStr:e,viewParameter:n,viewType:5,children:(0,D.jsx)(C.A,{objectId:e,view:5,viewParameter:n,children:(0,D.jsx)(y.default,{dataLayoutShiftBoundaryId:"BoardPageContainer",hasFixedHeader:a,children:t})})})}),ek=({board:e,blockedByMe:t,children:a,experience:n,isAuthenticated:_,isBoardPreviewMode:p,isSeoBot:h,location:f,setBoardPreviewMode:w,stickyHeaderRef:y,username:v})=>{let x=(0,o.Zp)(),j=(0,b.J)(),S=(0,g.A)(),I=(0,eo.A)(),[P,E]=(0,i.useState)(!1),[C,M]=(0,i.useState)(!1),{logContextEvent:L}=(0,d.o)(),U=(0,B.A)(),$=(0,r.wA)(),{canUseNativeApp:G}=(0,r.d4)(({session:e})=>e),{id:H,name:V,access:F,owner:W,sensitivity:J,privacy:K,pin_count:Y,section_count:q,sensitivity_screen:X,collaborated_by_me:Q,image_cover_url:ee,collaborator_permissions_setting:et}=e,en=(0,k.qJ)(),ei=(0,k.M)(),er=(0,k.wI)(),el=(0,eb.A)(!!Q),ed={board_id:H,reason:X?.reason||""},{slug:ec}=(0,o.g)(),{isDirect:eu}=(0,A.A)(),{previous:e_,forward:ep}=(0,m.qD)(),eh=0===e_.length&&0===ep.length;(0,N.A)(()=>{j&&eh&&eu&&!_&&(en?(0,Z.GV)("unauth.entry_channel.direct.landing_page.board_page.dweb",{sampleRate:1}):(0,Z.GV)("unauth.entry_channel.direct.landing_page.board_page.mweb",{sampleRate:1}))}),(0,N.A)(()=>{_||((e,t)=>{let[a]=(0,T.y1)().getItem(l.o8)??[];if(!(a&&a.path===t.pathname)&&!t.state?.isFromNavFooterPage){let a=e.cover_pin,n=a?.pin_id,i=e.cover_images,r=a&&a.image_signature||null,o=i&&i["222x"]||null;(0,eI.kh)(t.pathname,r,n,o,"board")}})(e,f)}),(0,c.A)({pageUniqueKey:H,containerPage:"board_page"});let em=()=>{I({fn:e=>{e&&e.stopPropagation&&e.stopPropagation(),M(!0),U({action:"click",item:"main-share-button"})}})()};(0,i.useEffect)(()=>{"t"===(0,R.A)(f.search).open_share&&em()},[]),(0,i.useEffect)(()=>(_&&$((0,ez.bP)()),()=>{_&&$((0,ez.iZ)())}),[$,_]);let eS=(F||[]).includes("write"),eT=(0,ef.A)(W?.id),eC=(0,ej.bh)(J),ek=el||eT,eN="secret"===K,eL=!_&&!h,eO=!ek&&!eL,{hasApplicableLawForCountry:eU}=(0,eP.Ay)(),e$=en&&eL,eG=ek||eO||eU,eD=!en&&(_||!G||eL),eH=!!eG&&e$,eV=(0,i.useRef)(null),[eF,eW]=(0,i.useState)(!1);(0,N.A)(()=>{L({aux_data:{board_id:H,board_pin_count:Y??0,board_section_count:q??0},component:178,event_type:13,view_parameter:eT?3069:3070,view_type:5})});let[eJ,eK]=(0,i.useState)(!eT&&!el&&!!X?.show_warning),eY=eT?3069:3070,eq=!en&&!eN,eX=!eq&&!e$&&!eN,{featured_board_metadata:eQ}=e,{has_expanded_sections:eZ}=eQ||{},e0=!!eZ&&eT&&!!w,e1=e.header?.large_image_url||null,e5=_&&!eS;return(0,D.jsxs)(eR,{boardId:H,hasFixedHeader:eD,viewParameter:eY,children:[n&&(0,D.jsx)(u.b5,{placementId:1000251}),(0,D.jsx)(u.Vj,{customFooterHeight:eT||el?72:0,experience:n}),(0,D.jsx)(u.aR,{experience:n}),(0,D.jsxs)(s.az,{dangerouslySetInlineStyle:{__style:eJ?{filter:"blur(20px)"}:{}},children:[en&&!eL&&(0,D.jsx)(s.az,{paddingX:2,children:(0,D.jsx)(eE.default,{color:"default",fallbackUrl:`/${v}/`,padding:3,size:"lg"})}),eD&&(0,D.jsx)(eA.A,{blockedByMe:t,board:e,canEdit:eS,isBoardPreviewMode:p,isOwnerOrCollaborator:ek,isSensitive:eC,isSeoBot:h,onShowAbout:()=>{},openSendBoardModal:em,setBoardPreviewMode:w,shareButtonRef:eV,shouldUseFallbackUrl:ea(f),showFollowOption:e5,showOverflowMenuMobile:!!eG,showReportOption:eO,showShareButtonMobile:eq,showShareOptionInOverflowMenu:eX,showSwitchPreviewMode:e0,slug:ec,stickyHeaderRef:y,username:v,viewParameter:eY}),(ei||er)&&!!e1&&(0,D.jsx)(ev.A,{board:e}),(0,D.jsx)(s.so,{justifyContent:"center",children:(0,D.jsx)(eg,{boardId:H,boardImageRep:ee??"",boardName:V??"",isAuthenticated:_})}),(_||eL)&&(0,D.jsxs)(i.Fragment,{children:[(0,D.jsx)(z.A,{children:(0,D.jsx)(eB,{component:13216,element:72,hideContactsSuggestions:!_,isOpen:C,objectId:String(H),objectType:2,onDismiss:e=>{e&&e.stopPropagation&&e.stopPropagation(),M(!1)},sendShareSurface:5,viewParameter:eY,viewType:5})}),P&&(0,D.jsx)(ex.A,{boardCollabPermissionsSetting:eT?et:null,isOpen:P,objectId:H,objectType:2,onDismiss:()=>E(!1)})]}),(0,D.jsx)(ey.A,{blockedByMe:t,board:e,getUnauthDesktopBoardActions:()=>(0,D.jsxs)(s.so,{gap:2,children:[(0,D.jsxs)(s.az,{ref:eV,alignContent:"center",alignItems:"center","data-test-id":"share-board-button",direction:"row",display:"flex",justifyContent:"center",marginBottom:2,children:[(0,D.jsx)(s.K0,{accessibilityLabel:S.bt("Share", "Share", "BoardHeader.SendBoardButton", undefined, true),bgColor:e1?"default":"transparent",icon:"share",onClick:()=>{U({action:"click",item:"main-share-button"}),eW(!0)},selected:eF,size:"lg",tooltip:{text:S.bt("Share", "Share", "BoardHeader.SendBoardButton", undefined, true)}}),(0,D.jsx)(u.X$,{anchors:{4020:eV.current},idealDirection:"down",onAnchorTouch:"complete",placementId:1000251,scrollToDismiss:!0}),eF&&(0,D.jsx)(z.A,{children:(0,D.jsx)(eM,{anchor:eV.current,component:13216,objectId:H,objectType:2,onDismiss:()=>eW(!1),sendShareSurface:5,title:S.bt("Send this board", "Send this board", "Sharesheet.ShareSocialBar", undefined, true),viewType:5})})]}),eH&&(0,D.jsx)(s.az,{children:(0,D.jsx)(O.A,{bgColor:e1?"white":"transparent",board:e,hideShare:!eX,iconSize:"lg",isOwnerOrCollaborator:ek,isSensitive:eC,onShowAbout:()=>{},openSendBoardModal:em,showAboutRecommendationOption:!1,showReportOption:eO,slug:ec,username:v,viewParameter:eY,viewType:578})})]}),isAuthenticated:_,isBoardPreviewMode:p,isSeoBot:h,setInviteCollaboratorsModalIsOpen:E,viewParameter:eY,children:a})]}),eJ&&(0,D.jsx)(s.az,{marginStart:-2,children:(0,D.jsx)(ew,{handleGoBack:()=>{L({event_type:101,component:13860,element:73,view_type:5,aux_data:ed}),j||x("/",{replace:!0}),x(-1)},hideSensitivityScreen:()=>{$((0,es.oj)(H)),L({event_type:101,component:13860,element:12448,view_type:5,aux_data:ed}),eK(!1)},sensitivityScreenAuxData:ed})})]})};class eN extends i.Component{constructor(...e){super(...e),eC(this,"stickyHeaderRef",(0,i.createRef)()),eC(this,"logScrollEvent",(0,E.A)(()=>{let e=this.props.board?this.props.board.id:0;this.props.logContextEvent({event_type:110,view_type:5,view_parameter:3070,aux_data:{unauth_page_board_id:e}})},300))}componentDidMount(){let{board:e,dispatch:t,isAuthenticated:a,isViewerBoardOwner:n,isViewerCollaborator:i,isSeoBot:r,location:o}=this.props;if(e){let a="other";n?a="own":i&&(a="collaborator"),t((0,_.xL)([1000251],r,{board_id:e.id,board_ownership:a}))}(0,w.A)(),a?(0,R.A)(o.search).seamless&&(0,Z.GV)("mweb.social.group_board.seamless.land"):((0,eI.Dx)({key:l.Vb,lastVisitedPage:o.pathname}),window.addEventListener("scroll",this.logScrollEvent)),this.stickyHeaderRef&&this.stickyHeaderRef.current&&f.A.addObstruction("top",this.stickyHeaderRef.current)}componentWillUnmount(){this.props.isAuthenticated||window.removeEventListener("scroll",this.logScrollEvent),this.stickyHeaderRef&&this.stickyHeaderRef.current&&f.A.removeObstruction("top",this.stickyHeaderRef.current)}render(){let{board:e,children:t,experience:a,i18n:n,isAuthenticated:i,isBoardPreviewMode:r,isSeoBot:o,location:l,setBoardPreviewMode:d,user:c}=this.props;return e&&c?(0,D.jsx)(ek,{blockedByMe:c.blocked_by_me,board:e,experience:a,isAuthenticated:i,isBoardPreviewMode:r,isSeoBot:o,location:l,setBoardPreviewMode:d,stickyHeaderRef:this.stickyHeaderRef,username:c.username??"",children:t}):(0,D.jsx)(s.az,{column:12,paddingY:2,children:i?(0,D.jsx)(s.y$,{accessibilityLabel:n.bt("Loading feed", "Loading feed", " - ", undefined, true),show:!0}):(0,D.jsx)(V,{})})}}let eL=({boardId:e})=>{let{slug:t,username:a}=(0,o.g)();return(0,I.A)({name:"BoardInvitesResource",options:{...e?{board_id:e}:{username:a,slug:t},status_filters:"new,contact_request_not_approved",sort:"viewer_first",include_inactive:!0}}),null};function eO({isBoardPreviewMode:e,children:t,setIsBoardPreviewMode:a}){(0,i.useEffect)(()=>{(0,n.A)("BoardPageContainer","/app/www/board/duplo/BoardPageContainer.tsx")},[]);let s=(0,g.A)(),l=(0,x.A)(),c=(0,o.zy)(),{slug:u,username:_}=(0,o.g)(),h=(0,r.wA)(),{logContextEvent:m}=(0,d.o)(),{isAuthenticated:f,isBot:b}=(0,j._8)(),w=`/${_}/${(0,F.E)(u)}/`,y=(0,r.d4)(e=>(0,eT.A)(e)[w]),A=y?.owner,S=(0,p.A)({id:1000251}),I=(0,ef.A)(y?.owner?.id),P=(0,eb.A)(!!y?.collaborated_by_me);return(0,D.jsxs)(i.Fragment,{children:[y&&(y.access||[]).includes("write")&&(0,D.jsx)(eL,{boardId:y.id}),(0,D.jsx)(v.A,{measureGridVisuallyComplete:!0,surface:"board",children:(0,D.jsx)(eN,{board:y,dispatch:h,experience:S,i18n:s,isAuthenticated:f,isBoardPreviewMode:e,isSeoBot:b,isViewerBoardOwner:I,isViewerCollaborator:P,location:c,logContextEvent:m,pwtStaticContext:l,setBoardPreviewMode:a,user:A,children:t})})]})}function eU({children:e}){(0,i.useEffect)(()=>{(0,n.A)("BoardPageContainer","/app/www/board/duplo/BoardPageContainer.tsx")},[]);let t=(0,g.A)(),{isAuthenticated:a,isBot:r}=(0,j._8)(),s=(0,o.zy)(),{slug:l,username:d}=(0,o.g)(),{showToast:c}=(0,M.CG)(),{error:u}=(0,P.A)({name:"BoardResource",options:(({username:e,field_set_key:t,slug:a,getPageMetadata:n,invite_code:i})=>({field_set_key:t||"profile_grid_item",is_mobile_fork:!0,username:e,slug:a,get_page_metadata:n,invite_code:i}))({username:decodeURIComponent(d),slug:(0,F.k)(l)})}),_=u&&a&&{pathname:s.pathname.match(/\/[^\/]*\//g),search:s.search},p=(0,P.A)(r?null:{name:"UserResource",options:{field_set_key:"profile",username:decodeURIComponent(d)}}),m=!r&&(0,S.A)(p);return!a&&u?(0,D.jsx)(o.C5,{replace:!0,state:{showError:!0},to:"/ideas/"}):_?(c(({hideToast:e})=>(0,D.jsx)(h.A,{duration:7e3,onHide:e,text:a?t.bt("We couldn't find that Pinner's board but here are some of their other boards!", "We couldn't find that Pinner's board but here are some of their other boards!", "Error text when a user attempts to go to a board that doesn't exist or they don't have access to", undefined, true):t.bt("We can't find that board. Please log in and give it another try!", "We can't find that board. Please log in and give it another try!", "Error text when a user attempts to go to a board that doesn't exist or they don't have access to", undefined, true),type:"error"})),(0,D.jsx)(o.C5,{replace:!0,to:_})):m?(0,D.jsx)(o.C5,{replace:!0,to:m}):e}function e$({children:e}){return(0,i.useEffect)(()=>{(0,n.A)("BoardPageContainer","/app/www/board/duplo/BoardPageContainer.tsx")},[]),(0,D.jsx)(eU,{children:(0,D.jsx)(eO,{children:e})})}},750237(e,t,a){a.d(t,{A:()=>g});var n=a(61163),i=a(859471),r=a(106386),o=a(19821),s=a(743372),l=a(989457),d=a(538329),c=a(542975),u=a(466245),_=a(964273),p=a(987093),h=a(610593),m=a(562615);function g({isSelf:e,showVerified:t=!1,user:a={},onFollowChange:g}){(0,i.useEffect)(()=>{(0,n.A)("User","/app/www/common/User/User.tsx")},[]);let[f,b]=(0,i.useState)(a.explicitly_followed_by_me||!1),[w,y]=(0,i.useState)(!1),A=(0,r.wA)(),v=(0,d.A)(),x=(0,s.A)(),j=()=>{y(!1),A((0,p.X2)(a.id,null,x)),b(!1),g&&g(a,!1)},{verified_identity:S,full_name:I,is_verified_merchant:P,is_private_profile:z,explicitly_followed_by_me:T,username:E}=a,C=S?.verified,B=a.image_medium_url||a.image_small_url;return(0,m.jsxs)(o.az,{alignItems:"center","aria-label":v.bt("User", "User", "FollowersModal.User.card", undefined, true),direction:"row",display:"flex",marginEnd:-1,marginStart:-1,paddingY:1,role:"group",children:[w&&(0,m.jsx)(_.A,{firstName:I??"",handleUnfollowUser:j,onDismiss:()=>{y(!1)}}),(0,m.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{wordBreak:"break-word"}},flex:"grow",paddingX:1,children:(0,m.jsx)(o.$A,{href:`/${E}/`,children:(0,m.jsxs)(o.so,{alignItems:"center",gap:{row:2,column:0},justifyContent:"start",children:[(0,m.jsx)(o.az,{width:50,children:(0,m.jsx)(l.eu,{accessibilityLabel:v.bt("User profile picture", "User profile picture", "FollowersModal.User.profilePicture", undefined, true),color:a?.avatar_color_index,name:(0,c.vQ)(v.bt("Avatar for {{ fullName }}", "Avatar for {{ fullName }}", "avatar.name", undefined, true),{fullName:I}).join(" "),size:"fit",src:B??""})}),(0,m.jsx)(o._Y,{accessibilityLevel:3,size:"300",children:(0,m.jsx)(o.KJ,{inline:!0,lineClamp:3,size:"300",weight:"bold",children:t&&(P||C)?(0,m.jsx)(h.A,{badgeSize:"sm",badgeSpacing:2,fullName:I??"",isVerifiedIdentity:C,isVerifiedMerchant:P}):I})}),z&&(0,m.jsx)(o.az,{children:(0,m.jsx)(o.In,{accessibilityLabel:v.bt("private icon", "private icon", "privateProfileHeaderAuthDesktop.privateIcon", undefined, true),icon:"lock",inline:!0})})]})})}),(0,m.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},paddingX:1,children:(!z||T)&&(0,m.jsx)(u.A,{followEventType:45,id:a.id,isFollowed:f,isUserMe:!!e,onFollow:e=>{A((0,p.e6)(e,null,x)),b(!0),g&&g(a,!0)},onUnfollow:()=>{z?y(!0):j()},pinKey:null,textType:"FollowUnfollow",unfollowEventType:46,viewType:4})})]})}},964273(e,t,a){a.d(t,{A:()=>u});var n=a(61163),i=a(859471),r=a(19821),o=a(79906),s=a(538329),l=a(542975),d=a(971289),c=a(562615);function u({onDismiss:e,firstName:t,handleUnfollowUser:a}){(0,i.useEffect)(()=>{(0,n.A)("UnfollowUser","/app/www/profile/UserProfileHeader/ModalContents/UnfollowUser.tsx")},[]);let u=(0,s.A)(),_=(0,d.qJ)(),p=(0,l.vQ)(u.bt("Unfollow {{ firstName }}?", "Unfollow {{ firstName }}?", "unfollowUser.modal.header", undefined, true),{firstName:t}).join(""),h=u.bt("You will no longer be able to view their profile, Pins, boards, followers or following lists. They will not be notified.", "You will no longer be able to view their profile, Pins, boards, followers or following lists. They will not be notified.", "unFollowUser.modal.description", undefined, true),m=u.bt("Cancel", "Cancel", "unfollowUser.modal.cancel", undefined, true),g=u.bt("Unfollow", "Unfollow", "unfollowUser.modal.button.unfollow", undefined, true);return _?(0,c.jsx)(o.Ay,{accessibilityModalLabel:p,footer:(0,c.jsxs)(r.az,{alignItems:"center",display:"flex",justifyContent:"end",marginEnd:-1,marginStart:-1,children:[(0,c.jsx)(r.az,{padding:1,children:(0,c.jsx)(r.$n,{fullWidth:!0,onClick:e,size:"lg",text:m})}),(0,c.jsx)(r.az,{padding:1,children:(0,c.jsx)(r.$n,{color:"primary",fullWidth:!0,onClick:a,size:"lg",text:g})})]}),heading:p,onDismiss:e,role:"alertdialog",size:"md",children:(0,c.jsx)(r.az,{"data-test-id":"unfollow-text",marginEnd:6,marginStart:6,children:(0,c.jsx)(r.KJ,{children:h})})}):(0,c.jsxs)(o.Ay,{accessibilityModalLabel:p,mobileHideCloseIcon:!0,onDismiss:e,type:"unFollow_button",children:[(0,c.jsx)(r.az,{alignItems:"center",display:"flex",paddingX:3,paddingY:5,children:(0,c.jsx)(r._Y,{accessibilityLevel:1,size:"600",children:p})}),(0,c.jsx)(r.az,{marginBottom:4,marginEnd:4,marginStart:4,children:(0,c.jsx)(r.KJ,{children:h})}),(0,c.jsxs)(r.az,{alignItems:"center",display:"flex",justifyContent:"center",marginBottom:8,children:[(0,c.jsx)(r.az,{padding:1,children:(0,c.jsx)(r.$n,{fullWidth:!0,onClick:e,size:"md",text:m})}),(0,c.jsx)(r.az,{padding:1,children:(0,c.jsx)(r.$n,{color:"primary",fullWidth:!0,onClick:a,size:"md",text:g})})]})]})}},253176(e,t,a){function n(e,t){return{type:"SET_LOCATION_TO_ERROR_MAP_ENTRY",payload:{pathname:e,renderError:t}}}function i(e){return{type:"UNSET_LOCATION_TO_ERROR_MAP_ENTRY",payload:{pathname:e}}}a.d(t,{C:()=>i,V:()=>n})},987093(e,t,a){a.d(t,{AD:()=>h,X2:()=>u,e6:()=>d,sN:()=>c,x2:()=>_});var n=a(257300),i=a(974694);function r(e,t){return(0,n.A)({url:"/v3/users/{followee}/follow/",urlParams:{followee:e},method:"PUT",data:t?{invite_code:t}:{}})}function o(e){return(0,n.A)({url:"/v3/users/{followee}/follow/",urlParams:{followee:e},method:"DELETE"})}let s=(e,t,a,n)=>{let r=t().session?.userId;e((0,i.pV)(a,n)),r&&e((0,i.yX)(r,n))},l=(e,t,a,n)=>{s(e,t,a,!n)};function d(e,t=null,a,n,i){return(o,d)=>{s(o,d,e,!0),r(e,i).then(()=>{a({event_type:45,object_id_str:e,aux_data:t?{pin_id:t}:void 0,clientTrackingParams:n??void 0})}).catch(()=>{l(o,d,e,!0)})}}function c(e,t=null,a,n,i){return async(o,d)=>{s(o,d,e,!0);try{await r(e,i),a({event_type:45,object_id_str:e,aux_data:t?{pin_id:t}:void 0,clientTrackingParams:n??void 0})}catch(t){throw l(o,d,e,!0),t}}}function u(e,t=null,a,n){return(i,r)=>{s(i,r,e,!1),o(e).then(()=>{a({event_type:46,object_id_str:e,aux_data:t?{pin_id:t}:void 0,clientTrackingParams:n??void 0})}).catch(()=>{l(i,r,e,!1)})}}function _(e,t=null,a,n){return async(i,r)=>{s(i,r,e,!1);try{await o(e),a({event_type:46,object_id_str:e,aux_data:t?{pin_id:t}:void 0,clientTrackingParams:n??void 0})}catch(t){throw l(i,r,e,!1),t}}}let p=(e,t)=>({type:"USER_BULK_FOLLOW",payload:{ids:e,value:t}}),h=e=>t=>{e.length>0&&((0,n.A)({url:"/v3/users/follow/",method:"PUT",data:{followee_ids:e}}).catch(()=>t(p(e,!1))),t(p(e,!0)))}},763922(e,t,a){a.d(t,{A:()=>l});var n=a(859471),i=a(106386),r=a(979638),o=a(850462),s=a(253176);function l(){let e=(0,i.wA)(),t=(0,r.Zp)(),{pathname:a}=(0,r.zy)(),l=(0,i.d4)(({ui:e})=>e.mainComponent.locationToErrorMap);(0,n.useEffect)(()=>{(0,o.A)();let n=a.split("/"),i=`/${n[1]}/`;l[a]&&(e((0,s.V)(i,l[a])),t(i,{replace:!0}))},[])}},275439(e,t,a){a.d(t,{A:()=>c});var n=a(859471),i=a(979638),r=a(115795),o=a(675201),s=a(31913),l=a(401147),d=a(685858);let c=e=>{let t=(0,d.d)(),a=(0,i.zy)(),[c]=(0,n.useState)(a),u=a.pathname===c.pathname&&a.search===c.search&&((0,r.ZX)(a)&&((0,r.mg)(a)&&"pin"||(0,r.iK)(a)&&"board"||(0,o.A)(a)&&"profile")||null)||null,[_,p]=(0,n.useState)(null),{isLoaded:h,data:m}=(0,s.A)(!e&&t&&u?{url:"/v3/invite_code/{invite_code}/",params:{invite_code:t,fields:l.ff}}:null);return(0,n.useEffect)(()=>{h&&m&&p(m??null)},[h,m]),t&&u?{invite:_,pageType:u}:null}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/82401.en_GB-e3fc38525c7b1b87.mjs.map