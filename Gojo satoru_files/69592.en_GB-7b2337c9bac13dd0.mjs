(self.modernJsonp=self.modernJsonp||[]).push([["69592"],{383091(e,t,r){var o={"./HI.tsx":["794329",9,"75298"],"./KR":["980603",9,"65896"],"./RO.tsx":["123173",9,"87462"],"./ENUK.tsx":["130753",9,"85914"],"./TL.tsx":["873052",9,"73037"],"./HU":["557805",9,"12222"],"./UA.tsx":["868414",9,"72147"],"./ID.tsx":["696976",9,"71520"],"./ID":["696976",9,"71520"],"./NL":["376890",9,"17351"],"./ZHCN.tsx":["786341",9,"46118"],"./consts":["835508",9,"83381"],"./ZHCN":["786341",9,"46118"],"./SV":["273271",9,"20188"],"./ESMX.tsx":["662487",9,"62108"],"./TL":["873052",9,"73037"],"./PL.tsx":["564336",9,"20201"],"./TH.tsx":["605432",9,"26977"],"./HI":["794329",9,"75298"],"./types.ts":["575051",7,"18808"],"./IT":["446387",9,"32080"],"./SK":["848934",9,"87083"],"./RU":["860147",9,"35216"],"./SK.tsx":["848934",9,"87083"],"./ZHTW":["457633",9,"58330"],"./ESMX":["662487",9,"62108"],"./DA.tsx":["602637",9,"20574"],"./NL.tsx":["376890",9,"17351"],"./JP.tsx":["799706",9,"35591"],"./KR.tsx":["980603",9,"65896"],"./FR":["652968",9,"22257"],"./TR.tsx":["415998",9,"37811"],"./FR.tsx":["652968",9,"22257"],"./index.tsx":["968246",9],"./NO":["727033",9,"41954"],"./DE.tsx":["220881",9,"68522"],"./PTPT":["143508",9,"14517"],"./MS.tsx":["721464",9,"44193"],"./ESAR":["924165",9,"83974"],"./localeToFilename":["440286",9],"./HU.tsx":["557805",9,"12222"],"./RO":["123173",9,"87462"],"./PL":["564336",9,"20201"],"./TR":["415998",9,"37811"],"./DE":["220881",9,"68522"],"./ESES":["636916",9,"89205"],"./ESES.tsx":["636916",9,"89205"],"./VT.tsx":["739482",9,"84263"],"./TH":["605432",9,"26977"],"./DA":["602637",9,"20574"],"./PTBR.tsx":["552552",9,"14097"],"./ZHTW.tsx":["457633",9,"58330"],"./":["968246",9],"./ENUS":["355337",9,"23410"],"./JP":["799706",9,"35591"],"./PTBR":["552552",9,"14097"],"./CZ":["48619",9,"67128"],"./NO.tsx":["727033",9,"41954"],"./PTPT.tsx":["143508",9,"14517"],"./CZ.tsx":["48619",9,"67128"],"./SV.tsx":["273271",9,"20188"],"./UA":["868414",9,"72147"],"./ESAR.tsx":["924165",9,"83974"],"./VT":["739482",9,"84263"],"./index":["968246",9],"./GR.tsx":["849847",9,"71516"],"./IT.tsx":["446387",9,"32080"],"./localeToFilename.ts":["440286",9],"./ENUS.tsx":["355337",9,"23410"],"./ENUK":["130753",9,"85914"],"./FI":["436723",9,"70192"],"./FI.tsx":["436723",9,"70192"],"./consts.ts":["835508",9,"83381"],"./types":["575051",7,"18808"],"./GR":["849847",9,"71516"],"./RU.tsx":["860147",9,"35216"],"./MS":["721464",9,"44193"]};function n(e){if(!r.o(o,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=o[e],n=t[0];return Promise.all(t.slice(2).map(r.e)).then(function(){return r.t(n,16|t[1])})}n.keys=()=>Object.keys(o),n.id=383091,e.exports=n},731035(e,t,r){var o=r(335959),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return o.isMemo(e)?a:s[e.$$typeof]||n}s[o.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[o.Memo]=a;var d=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,r,o){if("string"!=typeof r){if(m){var n=p(r);n&&n!==m&&e(t,n,o)}var a=c(r);u&&(a=a.concat(u(r)));for(var s=l(t),g=l(r),f=0;f<a.length;++f){var _=a[f];if(!i[_]&&!(o&&o[_])&&!(g&&g[_])&&!(s&&s[_])){var y=h(r,_);try{d(t,_,y)}catch(e){}}}}return t}},195843(e,t){var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,n=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,d=r?Symbol.for("react.context"):60110,c=r?Symbol.for("react.async_mode"):60111,u=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,f=r?Symbol.for("react.lazy"):60116,_=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,x=r?Symbol.for("react.scope"):60119;function P(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case c:case u:case i:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case d:case h:case f:case g:case l:return e;default:return t}}case n:return t}}}function w(e){return P(e)===u}t.AsyncMode=c,t.ConcurrentMode=u,t.ContextConsumer=d,t.ContextProvider=l,t.Element=o,t.ForwardRef=h,t.Fragment=i,t.Lazy=f,t.Memo=g,t.Portal=n,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||P(e)===c},t.isConcurrentMode=w,t.isContextConsumer=function(e){return P(e)===d},t.isContextProvider=function(e){return P(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return P(e)===h},t.isFragment=function(e){return P(e)===i},t.isLazy=function(e){return P(e)===f},t.isMemo=function(e){return P(e)===g},t.isPortal=function(e){return P(e)===n},t.isProfiler=function(e){return P(e)===s},t.isStrictMode=function(e){return P(e)===a},t.isSuspense=function(e){return P(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===u||e===s||e===a||e===p||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===g||e.$$typeof===l||e.$$typeof===d||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===_)},t.typeOf=P},335959(e,t,r){e.exports=r(195843)},333062(e,t,r){r.d(t,{C:()=>u,a:()=>c});var o=r(859471),n=r(987628),i=r(296221),a=r(406661),s=r(844255),l=r(562615);let{Provider:d,get:c}=(0,n.A)("PinRep");function u({children:e}){let{isAuthenticated:t}=(0,s._8)(),{experience:r}=(0,a.A)(1000069),[n,c]=(0,o.useState)(!0),[u,h]=(0,o.useState)(!1),[p,m]=(0,o.useState)(null),[g,f]=(0,o.useState)(null),_=(0,i.Du)(1000069);(0,o.useEffect)(()=>{t?(r&&(!r||r?.experience_id===500417&&r?.display_data.hide_footer)?_.viewExperience(1000069,500417):c(!1),h(!0)):c(!1)},[r]);let y=(0,o.useMemo)(()=>({hasSimplifiedPinGridExpLoaded:u,hidePinRepFooter:n,setUseCaseFeedOriginalPinId:f,setUseCaseFeedRepinId:m,useCaseFeedOriginalPinId:g,useCaseFeedRepinId:p}),[u,n,f,m,g,p]);return(0,l.jsx)(d,{value:y,children:e})}},474171(e,t,r){r.d(t,{A:()=>l});var o=r(61163),n=r(859471),i=r(19821),a=r(538329),s=r(562615);function l({children:e,onClick:t,isSelected:r}){(0,n.useEffect)(()=>{(0,o.A)("BulkEditPinWrapper","/app/common/react/components/save/board/BulkEditPinWrapper/BulkEditPinWrapper.tsx")},[]);let l=(0,a.A)(),d=r?l.bt("Drag and drop selected item", "Drag and drop selected item", "BulkEditPinWrapper.tapArea.selectedAccessibilityLabel", undefined, true):l.bt("Drag and drop deselected item", "Drag and drop deselected item", "BulkEditPinWrapper.tapArea.deselectedAccessibilityLabel", undefined, true),c=l.bt("Selectable Pin", "Selectable Pin", "BulkEditPinWrapper.groupAccessibilityLabel", undefined, true);return(0,s.jsxs)(i.az,{"aria-label":c,position:"relative",role:"group",children:[(0,s.jsx)(i.az,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,s.jsx)(i.Rp,{accessibilityLabel:d,fullHeight:!0,fullWidth:!0,onTap:({event:e})=>{e.preventDefault(),e.stopPropagation(),t()},rounding:200})}),(0,s.jsx)(i.az,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},children:e})]})}},207088(e,t,r){r.d(t,{A:()=>n});let o="u">typeof window&&window.performance&&window.performance.now?()=>window.performance.now():()=>Date.now();function n({window:e,duration:t,run:r}){let n=o(),i=0,a=null,s=()=>{let l=o()-n,d=l-i;if(t===1/0)r(0,l,d);else{let e=l/t;if(e>=1)return void r(1,l,d);r(e,l,d)}i=l,a=e.requestAnimationFrame(s)};return{start:()=>{a=e.requestAnimationFrame(s)},cancel:()=>{a&&(e.cancelAnimationFrame(a),a=null)}}}},894124(e,t,r){r.d(t,{A:()=>h});var o=r(61163),n=r(859471),i=r(19821),a=r(207088),s=r(911127),l=r(584342),d=r(562615);function c(e,t,r){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends n.Component{constructor(...e){super(...e),c(this,"state",{visible:!1}),c(this,"setRef",e=>{this.element||(this.element=e,e?.addEventListener("dragover",this.handleDragOver),e?.addEventListener("dragleave",this.handleDragLeave))}),c(this,"handleDragOver",()=>{let{placement:e}=this.props;if(!this.scrollAnimationManager){let t="top"===e?-1:1;this.scrollAnimationManager=(0,a.A)({window,duration:1/0,run:(e,r,o)=>{window.scrollTo(0,window.scrollY+(r<500?.8:1.2000000000000002)*t*o)}}),this.scrollAnimationManager.start()}}),c(this,"handleDragLeave",()=>{this.scrollAnimationManager&&this.scrollAnimationManager.cancel()}),c(this,"element",null),c(this,"visibleTimeout",null)}componentDidMount(){this.visibleTimeout=window.setTimeout(()=>this.setState({visible:!0}),500)}componentWillUnmount(){let e=this.element;e&&(e.removeEventListener("dragover",this.handleDragOver),e.removeEventListener("dragleave",this.handleDragLeave)),this.scrollAnimationManager&&this.scrollAnimationManager.cancel(),this.visibleTimeout&&window.clearTimeout(this.visibleTimeout)}render(){let{height:e,placement:t}=this.props,{visible:r}=this.state;return(0,d.jsx)(i.az,{bottom:"bottom"===t,dangerouslySetInlineStyle:{__style:{zIndex:0x1000037,visibility:r?"visible":"hidden"}},height:e,left:!0,position:"fixed",right:!0,top:"top"===t,children:(0,d.jsx)("div",{ref:this.setRef,style:{width:"100%",height:"100%"}})})}}function h({noStickyHeader:e}){(0,n.useEffect)(()=>{(0,o.A)("DragScrollManager","/app/packages/dragDrop/DragScrollManager.tsx")},[]);let t=e?0:l.Wk;return(0,d.jsx)(s.A,{children:(0,d.jsx)(i.Wd,{children:(0,d.jsxs)(i.az,{children:[(0,d.jsx)(u,{height:120+t,placement:"top"}),(0,d.jsx)(u,{height:120,placement:"bottom"})]})})})}},857954(e,t,r){r.d(t,{A:()=>d,x:()=>s});var o=r(859471),n=r(410778),i=r(650083),a=r(562615);let s={Pin:"pin",Board:"board",Section:"section",CarouselItem:"carouselitem",Cutout:"cutout",CartingRetailer:"cartingretailer"};class l extends o.Component{render(){let{accessibilityControls:e,accessibilitySelected:t,children:r,connectDragSource:o,connectDropTarget:n,id:i,isDragging:s,isDraggingInternal:l,isDropTargetOnly:d,role:c}=this.props,u=n((0,a.jsx)("div",{ref:e=>{this.targetEl=e},"aria-controls":e,"aria-selected":t,id:i,role:c,style:{opacity:s||l?0:1},children:r}));return d?u:o(u)}}let d=(0,i.compose)((0,n.DropTarget)(e=>e.type,{hover:({index:e,onDragHover:t},r,o)=>{t(e,function(e,t){let r=t.targetEl;if(!(r&&r instanceof HTMLElement))return null;let{x:o,y:n}=e.getClientOffset(),{left:i,right:a,top:s,bottom:l,width:d,height:c}=r.getBoundingClientRect();return{positionRelativeToCenter:{x:o-(i+a)/2,y:n-(s+l)/2},boundingBox:{width:d,height:c}}}(r,o))}},e=>({connectDropTarget:e.dropTarget()})),(0,n.DragSource)(e=>e.type,{beginDrag:({index:e,onDragBegin:t})=>(t(e),{index:e}),endDrag:({onDragEnd:e},t)=>e(t.didDrop())},(e,t)=>({connectDragSource:e.dragSource(),isDraggingInternal:t.internalMonitor.registry.dragSources.size>0&&t.isDragging()})))(l)},840200(e,t,r){r.d(t,{A:()=>a});var o=r(410778),n=r(650083),i=r(172228);let a=e=>t=>(0,n.compose)(i.A,(0,o.DropTarget)(e,{},(e,t)=>({connectDropTarget:e.dropTarget(),isDragWithinBounds:t.isOver()})))(t)},364107(e,t,r){function o(e,t,r,n=0){if(-1===t||-1===r||t===r)return e;let i=r+n,a=t+n;if(i<0||i>=e.length||a<0||a>=e.length)return e;let s=[...e],l=s[a],d=a<i?1:-1;for(let t=a;t!==i;t+=d)s[t]=e[t+d];return s[i]=l,s}r.d(t,{A:()=>o})},570090(e,t,r){r.d(t,{A:()=>a});var o=r(106386);let n=[1000069,1000075],i={};function a(){var e;return e=(0,o.d4)(({experiences:e})=>e),n.forEach(t=>{e[t]&&(void 0===i[t]||i[t].id!==e[t].id)&&(i[t]=e[t])}),i}},968246(e,t,r){r.r(t),r.d(t,{default:()=>c});var o=r(859471),n=r(19821),i=r(538329),a=r(844255),s=r(170052),l=r(440286),d=r(562615);function c({height:e,onCtaDidLoad:t,width:c}){let u=(0,i.A)(),[h,p]=(0,o.useState)(null),{locale:m}=(0,a._8)(),g=(0,l.default)(m);(0,o.useEffect)(()=>{g&&"none"!==g&&p((0,o.lazy)(()=>r(383091)(`./${g}`)))},[g]),(0,o.useEffect)(()=>{h&&t()},[h]);let f=u.bt("Open the Pinterest app, then go to the search bar and tap the camera icon located in the search bar to scan the Pincode", "Open Pinterest app, then go to the search bar, then tap the camera icon located in the search bar to scan the Pincode", "PincodeCTA.instruction", undefined, true),_=(0,d.jsx)(n.KJ,{align:"center",children:f});return"none"===g?_:h?(0,d.jsx)(s.A,{fallback:_,children:(0,d.jsx)(h,{height:e,title:f,width:c})}):(0,d.jsx)(n.y$,{accessibilityLabel:u.bt("Loading Pincode call to action", "Loading Pincode Call to Action", "PincodeCTA.loading", undefined, true),show:!0})}},440286(e,t,r){function o(e){switch(e.toUpperCase()){case"CS-CZ":return"CZ";case"DA-DK":return"DA";case"DE":return"DE";case"EL-GR":return"GR";case"EN-GB":return"ENUK";case"EN-US":return"ENUS";case"ES-ES":return"ESES";case"ES-MX":case"ES-419":return"ESMX";case"ES-AR":return"ESAR";case"FI-FI":return"FI";case"FR":return"FR";case"HI-IN":return"HI";case"HU-HU":return"HU";case"ID-ID":return"ID";case"IT":return"IT";case"JA":return"JP";case"KO-KR":return"KR";case"MS-MY":return"MS";case"NL":return"NL";case"NB-NO":return"NO";case"PL-PL":return"PL";case"PT-BR":return"PTBR";case"PT-PT":return"PTPT";case"RO-RO":return"RO";case"RU-RU":return"RU";case"SK-SK":return"SK";case"SV-SE":return"SV";case"TH-TH":return"TH";case"TL-PH":return"TL";case"TR":return"TR";case"UK-UA":return"UA";case"VI-VN":return"VT";case"ZH-CN":return"ZHCN";case"ZH-TW":return"ZHTW";default:return"none"}}r.r(t),r.d(t,{default:()=>o})},698669(e,t,r){r.d(t,{A:()=>w});var o=r(61163),n=r(859471),i=r(19821),a=r(586733),s=r(538329);function l(e){return new Promise((t,r)=>{let o=new XMLHttpRequest;o.ontimeout=r,o.onreadystatechange=()=>{if(4!==o.readyState)return;if(200!==o.status)return void r();let e=new FileReader;e.onloadend=()=>{let{result:o}=e;"string"==typeof o?t(o.split(/,/)[1]):r()},e.readAsDataURL(o.response)},o.open("GET",e,!0),o.timeout=3e4,o.responseType="blob",o.send()})}function d(e,t){return new Promise((r,o)=>{let n=document.createElement("div");n.innerHTML=e.innerHTML,(function e(t,r){if(!(t instanceof Element))return Promise.resolve(t);if(t instanceof window.SVGImageElement){let e=t.href.baseVal;if(e.startsWith("data:"))return Promise.resolve();let o=r?r(e):e;return Promise.resolve(o).then(l).then(e=>`data:${function(e){let t=e.match(/\.([^\.\/]*?)$/);switch(t&&t[1]){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";default:return""}}(o)};base64,${e}`).then(e=>new Promise((r,o)=>{t.onerror=o,t.href.baseVal=e,window.requestAnimationFrame(r)}))}return Promise.all(Array.from(t.childNodes).map(t=>e(t,r)))})(n,t).then(()=>{let t=new Image;t.onload=()=>{window.requestAnimationFrame(()=>r(t))},t.onerror=o;let i=n&&n.querySelector("svg");i&&(/^[0-9]+$/.test(i.getAttribute("width")||"")||i.setAttribute("width",`${e.scrollWidth}`),/^[0-9]+$/.test(i.getAttribute("height")||"")||i.setAttribute("height",`${e.scrollHeight}`));let a=n.innerHTML.replace(/(xmlns="[^"]+"[^>]*)\ xmlns="[^"]+"/,"$1");t.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(a.trim())}`})})}var c=r(968246),u=r(562615);function h({getThumbnailImageSrcSet:e,images:t,onTouch:r}){(0,n.useEffect)(()=>{(0,o.A)("PincodeHeroImagePicker","/app/www/pincode/PincodeHeroImagePicker.tsx")},[]);let a=(0,s.A)();return(0,u.jsx)(i.az,{display:"flex",justifyContent:"start",maxHeight:328,overflow:"auto",padding:1,wrap:!0,children:["logo"].concat(t).map((t,o)=>(0,u.jsx)(i.az,{padding:1,children:(0,u.jsx)(i.pp,{children:(0,u.jsx)(i.Rp,{fullWidth:!1,onTap:()=>r("logo"===t?"logo":o-1),rounding:200,children:(0,u.jsx)(i.n1,{height:85,rounding:"circle",width:85,children:"logo"===t?(0,u.jsx)(i.In,{accessibilityLabel:"Pinterest logo",color:"primary",icon:"pinterest",size:85}):t.url&&(0,u.jsx)(i._V,{alt:a.bt("Pincode hero image", "Pincode Hero Image", "accessibility label for the Pincode hero image", undefined, true),color:t.dominant_color||"#b5b5b5",fit:"cover",naturalHeight:t.height??1,naturalWidth:t.width??1,src:t.url,srcSet:e&&e(t.url??"")})})})})},"logo"===t?t:t.url))})}var p=r(430705);let m=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(`
  <svg xmlns="http://www.w3.org/2000/svg" width="222" height="222" x="0" y="0" viewBox="0 0 222 222">
    <path d="M0 111c0 47 29.3 87.2 70.6 103.4-1-8.8-2-22.3.3-32l13-55s-3.4-6.7-3.4-16.5c0-15.6 9-27 20-27 9.6 0 14.2 7 14.2 15.5 0 9.6-6 23.8-9.2 37-2.7 11 5.5 20 16.4 20 19.7 0 35-20.7 35-50.8 0-26.5-19.2-45-46.5-45-31.5 0-50 23.6-50 48 0 9.6 3.6 19.8 8.2 25.4 1 1.2 1 2 .7 3.3l-3 12.5c-.5 2-1.6 2.5-3.8 1.5-13.8-6.4-22.5-26.7-22.5-43 0-35 25.6-67 73.5-67 38.5 0 68.4 27.3 68.4 64 0 38.2-24.2 69-57.7 69-11.3 0-21.8-5.8-25.4-12.7L92 188c-2.6 9.6-9.3 21.7-14 29 10.5 3.3 21.6 5 33 5 61.3 0 111-49.7 111-111S172.3 0 111 0 0 49.7 0 111z" fill="var(--base-color-red-300)" fill-rule="evenodd" />
  </svg>`.trim())}`;function g(e,t,r){return`
    <image id="image"
      x="${100+300*("right"===t)}"
      y="${100+300*("bottom"===r)}"
      width="${600/("row"===t?1:2)}"
      height="${600/("column"===r?1:2)}"
      href="${e}"
      preserveAspectRatio="xMidYMid slice"
    />`}class f extends n.Component{constructor(...e){var t,r,o;super(...e),t="handleFetchChange",r=()=>{let{pincodeImageResource:e,onFetchingChange:t}=this.props;t(e.isFetching)},(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in this?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r}componentDidMount(){(0,o.A)("PincodeMainImage","/app/www/pincode/PincodeMainImage.tsx");let{pincodeImageResource:e}=this.props;e.isFetching||this.handleFetchChange()}componentDidUpdate(e){this.props.pincodeImageResource.isFetching!==e.pincodeImageResource.isFetching&&this.handleFetchChange()}render(){let e,{className:t,imageUrls:r,size:o,pincodeImageResource:{data:n,isLoaded:a}}=this.props;return(0,u.jsxs)(i.so,{alignItems:"center",height:o,justifyContent:"center",width:o,children:[a&&!!n&&(0,u.jsx)("div",{className:t,dangerouslySetInnerHTML:{__html:(e=function(e){switch(e.length){case 0:case 1:return;case 2:return[g(e[0],"left","column"),g(e[1],"right","column")].join("");case 3:return[g(e[0],"left","column"),g(e[1],"right","top"),g(e[2],"right","bottom")].join("");default:return[g(e[0],"left","top"),g(e[1],"right","top"),g(e[2],"left","bottom"),g(e[3],"right","bottom")].join("")}}(r))?n.replace(/<image[^>]*>/,e):n},style:{width:o,height:o}}),(0,u.jsx)(i.y$,{accessibilityLabel:this.props.i18n.bt("Loading Pincode image", "Loading Pincode Image", "accessibility label for loading the Pincode image", undefined, true),show:!n})]})}}function _(e){(0,n.useEffect)(()=>{(0,o.A)("PincodeMainImage","/app/www/pincode/PincodeMainImage.tsx")},[]);let t=(0,s.A)(),r=(0,p.A)({name:"ApiResource",options:{url:"/v3/pincode/image/",data:{object_id:e.id,hero_image_url:e.imageUrls[0]||m}}});return(0,u.jsx)(f,{...e,i18n:t,pincodeImageResource:r})}function y(e,t,r){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let b="pincodeMain",x="pincodeCTA";class P extends n.PureComponent{constructor(...e){super(...e),y(this,"state",{ctaIsLoaded:!1,errorFlyoutIsOpen:!1,isDownloading:!1,isFetchingPincodeImage:!1,isPickingHeroImage:!1,pickedImageIndex:0}),y(this,"getCustomHeroImages",()=>{let{images:e,customizable:t}=this.props,{pickedImageIndex:r}=this.state;if(!t)return e;let o="logo"!==r&&e[r];return o?[o]:[]}),y(this,"normalizeUrl",e=>{let{getMainImageURL:t}=this.props;return(t||(e=>e))(e).replace(/^https:\/\/[^\/]{2,}\.pinimg.com\//,"https://i.pinimg.com/")}),y(this,"handleFetchChange",e=>{this.setState({isFetchingPincodeImage:e})}),y(this,"handleCancelButtonClick",()=>this.setState({isPickingHeroImage:!1})),y(this,"handleEditButtonClick",()=>this.setState({isPickingHeroImage:!0})),y(this,"handleSelectImage",e=>this.setState({isPickingHeroImage:!1,pickedImageIndex:e})),y(this,"downloadPincodeImage",()=>{let{previewNode:e}=this,{ctaIsLoaded:t,isFetchingPincodeImage:r,isDownloading:o}=this.state;if(!e||!t||r||o)return;let n=e.querySelector(`.${b}`),i=e.querySelector(`.${x}`);if(!n||!i)return;let{getDownloadImageURL:a,id:s,logContextEvent:l}=this.props;l({event_type:7078,component:13141,object_id_str:s}),this.setState({isDownloading:!0}),Promise.all([d(n,a),d(i)]).then(e=>{let[t,r]=e;return((e,t)=>{let r=document.createElement("canvas");r.width=3544,r.height=3544;let o=Math.round(.1*r.width),n=Math.round(.05*r.width),i=r.width-2*o,a=r.width-2*n,s=r.height-i,[l,d]=t.width/t.height>a/s?[a,a/t.width*t.height]:[s/t.height*t.width,s],c=r.getContext("2d");return c&&(c.fillStyle="#fff",c.fillRect(0,0,r.width,r.height),c.drawImage(e,o,0,i,i),c.drawImage(t,(r.width-l)/2,i+(r.height-i-d)/2,l,d)),r})(t,r)}).then(e=>{var t;return t=`pincode_${this.props.id}.png`,new Promise((r,o)=>{new Promise((t,r)=>{if(e.toBlob)return void e.toBlob(t);let o="";try{o=e.toDataURL("image/png")}catch(e){r()}let n=window.atob(o.split(",")[1]),{length:i}=n,a=new Uint8Array(i);for(let e=0;e<i;e+=1)a[e]=n.charCodeAt(e);t(new window.Blob([a],{type:"image/png"}))}).then(e=>window.URL.createObjectURL(e)).then(e=>{let o=document.createElement("a");o.download=t,o.href=e,o.style.display="none",window.document.body.appendChild(o),window.requestAnimationFrame(()=>{let t=()=>{window.requestAnimationFrame(()=>{window.URL.revokeObjectURL(e),o.removeAttribute("href"),o.removeEventListener("click",t),window.document.body.removeChild(o),r()})};o.addEventListener("click",t),o.click()})}).catch(o)})}).then(()=>{this.setState({isDownloading:!1})}).catch(()=>{this.setState({errorFlyoutIsOpen:!0})})})}render(){let{id:e,isLoadingImages:t,images:r,getThumbnailImageSrcSet:o,customizable:n}=this.props,{ctaIsLoaded:a,errorFlyoutIsOpen:s,isFetchingPincodeImage:l,isDownloading:d,isPickingHeroImage:p}=this.state;return p?(0,u.jsx)(i.az,{color:"default",padding:4,rounding:200,width:350,children:(0,u.jsxs)(i.az,{children:[(0,u.jsx)(i.az,{paddingY:1,children:(0,u.jsx)(i._Y,{lineClamp:1,size:"600",children:this.props.i18n.bt("Change image", "Change Image", "Title of the Pincode hero image picker modal", undefined, true)})}),(0,u.jsx)(i.cG,{}),(0,u.jsx)(h,{getThumbnailImageSrcSet:o,images:r,onTouch:this.handleSelectImage}),(0,u.jsx)(i.az,{padding:1,children:(0,u.jsx)(i.$n,{fullWidth:!0,onClick:this.handleCancelButtonClick,text:this.props.i18n.bt("Cancel", "Cancel", "Button to dismiss Pincode hero image picker", undefined, true)})})]})}):(0,u.jsx)(i.az,{color:"default",marginBottom:4,paddingX:4,rounding:200,width:350,children:(0,u.jsxs)(i.az,{children:[(0,u.jsx)(i.az,{ref:e=>{this.previewNode=e},children:(0,u.jsxs)(i.az,{alignItems:"center",color:"default",direction:"column",display:"flex",height:320,justifyContent:"center",width:"100%",children:[t?(0,u.jsx)(i.so,{alignItems:"center",height:230,justifyContent:"center",width:"100%",children:(0,u.jsx)(i.y$,{accessibilityLabel:this.props.i18n.bt("Loading", "Loading", "accessibility label for loading spinner", undefined, true),show:!0})}):(0,u.jsx)(_,{className:b,id:e,imageUrls:this.getCustomHeroImages().map(e=>this.normalizeUrl(e.url??"")),onFetchingChange:this.handleFetchChange,size:230}),(0,u.jsx)(i.az,{alignItems:"center",display:"flex",justifyContent:"center",marginBottom:7,marginTop:2,children:(0,u.jsx)("div",{className:x,children:(0,u.jsx)(c.default,{height:78,onCtaDidLoad:()=>this.setState({ctaIsLoaded:!0}),width:300})})})]})}),(0,u.jsxs)(i.az,{marginTop:2,padding:1,children:[n&&r.length>0&&(0,u.jsx)(i.az,{paddingY:1,children:(0,u.jsx)(i.$n,{fullWidth:!0,onClick:this.handleEditButtonClick,text:this.props.i18n.bt("Change image", "Change Image", "Button to pick Pincode hero image", undefined, true)})}),a&&(0,u.jsxs)(i.az,{paddingY:1,children:[(0,u.jsx)(i.az,{ref:e=>{this.downloadButton=e},children:(0,u.jsx)(i.$n,{color:"primary",disabled:t||l||d,fullWidth:!0,onClick:this.downloadPincodeImage,text:this.props.i18n.bt("Download Pincode", "Download Pincode", "Button to download the Pincode image", undefined, true)})}),s&&(0,u.jsx)(i.AM,{anchor:this.downloadButton,idealDirection:"down",onDismiss:()=>this.setState({errorFlyoutIsOpen:!1}),shouldFocus:!1,size:"sm",children:(0,u.jsx)(i.az,{"data-test-id":"error-flyout-content",padding:3,children:(0,u.jsx)(i.nW,{title:this.props.i18n.bt("Oops! Your browser does not support downloading of Pincodes.", "Oops! Your browser does not support downloading Pincodes.", "Error message shown when user attempts to download Pincode on a browser not supported", undefined, true),type:"problem"})})})]})]})]})})}}function w(e){(0,n.useEffect)(()=>{(0,o.A)("PincodeGenerator","/app/www/pincode/PincodeGenerator.tsx")},[]);let{logContextEvent:t}=(0,a.o)(),r=(0,s.A)();return(0,u.jsx)(P,{...e,i18n:r,logContextEvent:t})}},662066(e,t,r){r.d(t,{A:()=>c});var o=r(61163),n=r(859471),i=r(19821),a=r(586733),s=r(79906),l=r(538329),d=r(562615);function c({children:e,objectId:t,onHide:r}){(0,n.useEffect)(()=>{(0,o.A)("PincodeModal","/app/www/pincode/PincodeModal.tsx")},[]);let{logContextEvent:c}=(0,a.o)(),u=(0,l.A)(),h={component:13141,object_id_str:t};return(0,n.useEffect)(()=>{c({event_type:6359})},[t]),(0,d.jsx)(s.Ay,{accessibilityModalLabel:u.bt("Pincode", "Pincode", "pincode.pincodemodal.label", undefined, true),heading:u.bt("Pincode", "Pincode", "pincode.pincodemodal.heading", undefined, true),onDismiss:()=>{r(),c({event_type:6358,...h})},size:"sm",children:(0,d.jsx)(i.so,{alignItems:"stretch",justifyContent:"center",children:e})})}},839625(e,t,r){r.d(t,{A:()=>C});var o=r(61163),n=r(859471),i=r(170052),a=r(430705),s=r(698669),l=r(562615);let d="474x",c=e=>t=>t.replace(/pinimg\.com\/\d+x\d*\//,`pinimg.com/${e}/`),u=e=>["236x",d,"736x"].map((t,r)=>`${c(t)(e)} ${r+1}x`).join(", ");function h({boardId:e,customizable:t}){(0,n.useEffect)(()=>{(0,o.A)("BoardPincodeGenerator","/app/www/pincode/BoardPincodeGenerator.tsx")},[]);let r=(0,a.A)({name:"BoardFeedResource",options:{board_id:e,field_set_key:"images_only_item",filter_section_pins:!1,page_size:t?60:4}}),i=!r.isLoaded,h=(r.data||[]).filter(({type:e})=>"pin"===e).map(({images:e})=>e["236x"]);return(0,l.jsx)(s.A,{customizable:t,getDownloadImageURL:c("1200x"),getMainImageURL:c(d),getThumbnailImageSrcSet:u,id:e,images:h,isLoadingImages:i})}var p=r(662066),m=r(938380);let g=(0,n.lazy)(()=>Promise.all([r.e("96722"),r.e("74377"),r.e("73906")]).then(r.bind(r,301136))),f=(0,n.lazy)(()=>r.e("35226").then(r.bind(r,611553))),_=(0,n.lazy)(()=>r.e("16532").then(r.bind(r,325919))),y=(0,n.lazy)(()=>r.e("6226").then(r.bind(r,320361))),b=(0,n.lazy)(()=>r.e("26588").then(r.bind(r,12791))),x=(0,n.lazy)(()=>r.e("20557").then(r.bind(r,523196))),P=(0,n.lazy)(()=>r.e("35889").then(r.bind(r,741640))),w=(0,n.lazy)(()=>r.e("49134").then(r.bind(r,485597))),v=(0,n.lazy)(()=>r.e("63596").then(r.bind(r,707111))),A=(0,n.lazy)(()=>r.e("3524").then(r.bind(r,801135))),S=(0,n.lazy)(()=>Promise.all([r.e("55896"),r.e("31537")]).then(r.bind(r,699752))),j=(0,n.lazy)(()=>r.e("60775").then(r.bind(r,598010)));function C({actions:e,board:t,boardSection:r,bulkEditSelectedPins:a,currentModal:s,inSelectAll:d,onClearModal:c,mergeConfirmationModalProps:u}){(0,n.useEffect)(()=>{(0,o.A)("BoardModalManager","/app/www/save/board/BoardPage/ModalContents/BoardModalManager.tsx")},[]);let{completeCreateSectionAction:C,completeMoveAction:I,onBoardArchiveChange:E,onBoardDelete:T,onBoardLeave:z,onBoardSectionDelete:B,onBoardSectionSave:D,onConfirmMergeSection:M,onCopyPinsToBoard:L,onDeletePins:R,onBoardMerge:$}=e;switch(s){case m.a.boardArchiveConfirmation:return E?(0,l.jsx)(i.A,{children:(0,l.jsx)(x,{board:t,onClose:c,onConfirm:E,shouldArchive:!0})}):null;case m.a.boardUnarchiveConfirmation:return E?(0,l.jsx)(i.A,{children:(0,l.jsx)(x,{board:t,onClose:c,onConfirm:E,shouldArchive:!1})}):null;case m.a.boardEdit:return(0,l.jsx)(i.A,{children:(0,l.jsx)(y,{boardId:t.id,onBoardDelete:T,onBoardLeave:z,onClose:c})});case m.a.bulkDelete:return R?(0,l.jsx)(i.A,{children:(0,l.jsx)(w,{onClearModal:c,onCompleteBulkDelete:R,pinCountToDelete:a&&a.length||0})}):null;case m.a.bulkCopy:return L?(0,l.jsx)(i.A,{children:(0,l.jsx)(v,{currentBoardId:t.id,onClearModal:c,onCopyToBoard:L,pinCountToCopy:a&&a.length||0})}):null;case m.a.collaboratorsAndPermissions:return(0,l.jsx)(i.A,{children:(0,l.jsx)(g,{board:t,onDismiss:c})});case m.a.editSection:return r?(0,l.jsx)(i.A,{children:(0,l.jsx)(S,{board:t,boardSection:r,onClearModal:c,onDeleteSection:B,onSaveSection:D})}):null;case m.a.mergeBoard:return $?(0,l.jsx)(i.A,{children:(0,l.jsx)(b,{onCancel:c,onSubmit:$,sourceBoardId:t.id})}):null;case m.a.createSection:case m.a.moveSection:return!!a&&!!I&&(0,l.jsx)(i.A,{children:(0,l.jsx)(A,{board:t,boardSection:r,inSelectAll:!!d,onClearModal:c,onCompleteMove:I,selectedPinIds:a,showCreateOnly:s===m.a.createSection})});case m.a.sectionMergeConfirm:return u&&M?(0,l.jsx)(i.A,{children:(0,l.jsx)(j,{onCancel:c,onConfirm:M,source:u.source,target:u.target})}):null;case m.a.followers:return(0,l.jsx)(i.A,{children:(0,l.jsx)(P,{boardId:t.id,followersCount:t.follower_count??0,onDismiss:c})});case m.a.pincode:return(0,l.jsx)(p.A,{objectId:t.id,onHide:c,children:(0,l.jsx)(h,{boardId:t.id,customizable:!!t.owner?.is_partner})});case m.a.jumpstartBoard:return(0,l.jsx)(i.A,{children:(0,l.jsx)(f,{board:t,onDismiss:c})});case m.a.simpleCreateSection:return C?(0,l.jsx)(i.A,{children:(0,l.jsx)(_,{onClose:c,onSectionCreate:C,selectedBoard:t})}):null;default:return null}}},938380(e,t,r){r.d(t,{a:()=>o});let o={addOrEditDate:"addOrEditDate",boardArchiveConfirmation:"boardArchiveConfirmation",boardEdit:"boardEdit",boardUnarchiveConfirmation:"boardUnarchiveConfirmation",bulkCopy:"bulkCopy",bulkDelete:"bulkDelete",collaboratorsAndPermissions:"collaboratorsAndPermissions",createSection:"createSection",editSection:"editSection",followers:"followers",jumpstartBoard:"jumpstartBoard",mergeBoard:"mergeBoard",moveSection:"moveSection",pincode:"pincode",sectionMergeConfirm:"sectionMergeConfirm",sendBoard:"sendBoard",simpleCreateSection:"simpleCreateSection"}},241946(e,t,r){r.d(t,{A:()=>n});var o=r(108264);function n({board:e,viewer:t}){return(0,o.A)(t,e.owner?.id)?3069:3070}},47436(e,t,r){r.d(t,{A:()=>W});var o=r(61163),n=r(859471),i=r(106386),a=r(19821),s=r(333062),l=r(474171),d=r(857954),c=r(355710),u=r(937176),h=r(699613),p=r(221616);let m=e=>e?164:5,g=e=>"story"===e.type&&["recommended_searches","search_related_queries","BUBBLE_ONE_COL"].includes(e.story_type),f=(0,p.oW)(e=>e);var _=r(562615);function y(e){(0,n.useEffect)(()=>{(0,o.A)("PinItem","/app/common/react/components/save/board/BoardPinGrid/PinItem.tsx")},[]);let{allowReordering:t,auxData:r,boardSectionId:i,gridItem:a,handlePinDragBegin:s,handlePinDragEnd:p,handlePinDragHover:g,index:f,isFeaturedBoard:y,lfvExperiences:b,onBulkEditPinClick:x,source:P,target:w,viewParameter:v}=e,{inBulkEditMode:A,isCollaborator:S,isGroupBoard:j,isOwnBoard:C,isSelected:I,itemKey:{id:E}}=a,T=w===f,z=(0,h.HR)()(E),B=y?"FeaturedBoardPinGrid":A?"BulkEditMode":"BaseBoardPinGrid",D={pinKey:z?{type:"Legacy",data:z}:null,imageOnlyOption:!C&&(0,c.A)(b)?"image-only":"default",attributionOption:j?"show":"hide",pinImageCrop:"none",surface:B,slotIndex:f,viewParameter:v,viewType:m(i),auxData:r};if(!C&&!S)return(0,_.jsx)(u.A,{...D,parentPinKey:null});let M="no-selection";A&&(M=I?"selected":"deselected");let L=(0,_.jsx)(u.A,{...D,disableHover:-1!==P||A,parentPinKey:null,selectionState:M});return A&&(L=(0,_.jsx)(l.A,{isSelected:I,onClick:()=>x(E),children:L})),t&&(L=(0,_.jsx)(d.A,{index:f,isDragging:T,onDragBegin:s,onDragEnd:p,onDragHover:g,type:d.x.Pin,children:L})),L}var b=r(586733),x=r(894124),P=r(296221),w=r(257300),v=r(210909),A=r(657381),S=r(538329),j=r(538678),C=r(364107),I=r(570090),E=r(705739),T=r(618839);function z({isSection:e}){let t=(0,S.A)(),r=e?t.bt("There aren’t any Pins in this section yet", "There aren’t any Pins in this section yet", "EmptyBoard.EmptyText.section", undefined, true):t.bt("There aren’t any Pins on this board yet", "There aren’t any Pins on this board yet", "EmptyBoard.EmptyText.board", undefined, true);return(0,_.jsx)(T.A,{children:(0,_.jsx)(a.az,{"data-test-id":"empty-text",paddingY:8,children:(0,_.jsx)(a.KJ,{color:"default",size:"300",children:r})})})}function B({hasSections:e,isSection:t}){return(0,n.useEffect)(()=>{(0,o.A)("EmptyBoard","/app/www/nux/EmptyBoard.tsx")},[]),(0,_.jsx)(a.so,{alignItems:"stretch",justifyContent:"center",width:"100%",children:!t&&e?null:(0,_.jsx)(z,{isSection:t})})}var D=r(878913),M=r(204398),L=r(936751),R=r(513010),$=r(504252),F=r(805064);function k(e){(0,n.useEffect)(()=>{(0,o.A)("GridItemBuilder","/app/www/save/board/BoardPinGrid/GridItemBuilder.tsx")},[]);let{boardSectionId:t,gridItem:r,index:i,inBoardOrganizationMode:s,paddingBottom:l,renderPinItem:d,viewParameter:c}=e,{itemKey:u}=r,h=null;switch(u.type){case"story":h=(0,_.jsx)(F.A,{inBoardOrganizationMode:s,slot:i,storyId:u.id,viewParameter:c,viewType:m(t)});break;case"pin":h=(0,_.jsx)(a.az,{dangerouslySetInlineStyle:{__style:{paddingBottom:l}},children:d(r,i)});break;default:h=null}return(0,_.jsx)(a.az,{children:h},`${u.type}:${u.id}`)}let O=(0,r(840200).A)(d.x.Pin)(function(e){let{allowReordering:t,children:r,connectDropTarget:o,index:n,isDragWithinBounds:i}=e;return t&&o?o((0,_.jsx)("div",{style:{opacity:-1===n||i?1:.5},children:r})):r});var H=r(280027);function U(e,t,r){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class N extends n.Component{constructor(...e){super(...e),U(this,"state",{reorderSource:-1,reorderTarget:-1}),U(this,"anchorElementRef",(0,n.createRef)()),U(this,"masonryRef",{current:null}),U(this,"handlePinAdded",e=>{let{board:t,boardSectionId:r,dispatch:o}=this.props;e===t.id&&(o((0,M.KB)(t.id)),r&&o((0,L.A)(r)))}),U(this,"handlePinDragBegin",e=>this.setState({reorderSource:e})),U(this,"handlePinDragHover",e=>{let{reorderTarget:t}=this.state;e!==t&&this.setState({reorderTarget:e})}),U(this,"handlePinDragEnd",e=>{let{board:t,boardSectionId:r,dispatch:o,feed:n,viewParameter:i,orbacSubjectId:a}=this.props,{reorderSource:s,reorderTarget:l}=this.state;if(n&&e&&-1!==l&&-1!==s&&l!==s){let e=this.hiddenItemIndex,[d,c]=-1===e?[s,l]:[s+ +(s>=e),l+ +(l>=e)],u=(0,C.A)(n,d,c),h=n[d].id;o((0,R.kl)({feedType:r?$.A.BOARD_SECTION_PINS:$.A.BOARDFEED,feedId:r||t.id,itemType:"pin",targetItemId:n[c].id,sourceItemId:n[d].id}));let p=u.filter(e=>"pin"===e.type).map(e=>e.id),g=p.indexOf(h),f=g-1,_=g+1,y={pin:h};f>=0&&f<p.length&&(y={...y,before_pin:p[f]}),_>=0&&_<p.length&&(y={...y,after_pin:p[_]}),a&&(y={...y,orbac_subject_id:a}),(0,w.A)({url:"/v3/boards/{board}/reorder_pin/",urlParams:{board:t.id},method:"POST",data:y}).then(()=>this.props.logContextEvent({event_type:7122,object_id_str:h,view_type:m(r),view_parameter:i}))}this.setState({reorderSource:-1,reorderTarget:-1})}),U(this,"handleFetchMore",()=>{let{resource:{fetchMore:e,isAtEnd:t,isFetching:r}}=this.props;t||r||e()}),U(this,"renderPinItem",(e,t)=>{let{board:r,boardSectionId:o,lfvExperiences:n,onBulkEditPinClick:i,viewer:a,viewParameter:s}=this.props,{reorderSource:l,reorderTarget:d}=this.state,c={board_id:r.id,board_pin_count:r.pin_count},u=(0,H.A)(r);return(0,_.jsx)(y,{allowReordering:this.allowReordering,auxData:c,boardSectionId:o,gridItem:e,handlePinDragBegin:this.handlePinDragBegin,handlePinDragEnd:this.handlePinDragEnd,handlePinDragHover:this.handlePinDragHover,index:t,isFeaturedBoard:u,lfvExperiences:n,onBulkEditPinClick:i,source:l,target:d,viewer:a,viewParameter:s})})}componentDidMount(){(0,o.A)("BaseBoardPinGrid","/app/www/save/board/BoardPinGrid/BaseBoardPinGrid.tsx");let{feed:e,resource:{isFetching:t,refresh:r}}=this.props;null!==e||t||r()}componentDidUpdate(e){let{feed:t,resource:{isFetching:r,refresh:o}}=this.props;null!==t||null===e.feed||r||o()}get allowReordering(){let{board:{collaborated_by_me:e=!1},isOwnBoard:t,isPinGridSorted:r}=this.props;return!r&&(t||e)}get hiddenItemIndex(){let{denseViewSelected:e,feed:t}=this.props;return e?(t||[]).findIndex(g):-1}render(){let{bulkEditSelectedPins:e,board:t,boardSectionId:r,boardShopModuleId:o,desktopStories:i,featuredBoardStoryId:s,feed:l,feedStoryId:d,footerStoryId:c,denseViewSelected:u,hasSimplifiedPinGridExpLoaded:h,inBoardOrganizationMode:p,inSectionOrganizationMode:m,isDragWithinBounds:g,inSelectAll:y,renderFeaturedBoardsStory:b,renderFooterStory:P,renderMoreIdeas:w,renderBoardShopModule:S,boardShopModuleIndex:I,resource:{isAtEnd:E,isFetching:T,isLoaded:z},isOwnBoard:M,i18n:L}=this.props,{access:R,collaborated_by_me:$=!1,collaborator_count:F=0,section_count:H}=t,{reorderSource:U,reorderTarget:N}=this.state,{more_ideas:K}=t.featured_board_metadata||{};if(z&&l&&0===l.length)return(0,_.jsx)(B,{hasSections:!!H,isSection:!!r});let{allowReordering:W}=this,G=W&&U!==N&&-1!==U&&-1!==N,V=l||[],{hiddenItemIndex:Z}=this;-1!==Z&&(V=[...V.slice(0,Z),...V.slice(Z+1)]),G&&(V=(0,C.A)(V,U,N));let q={inBulkEditMode:p||m,inDenseView:u||!1,isGroupBoard:F>0,userCanEdit:(R||[]).includes("write"),isOwnBoard:M,isCollaborator:$},Y=!1,J=V.map(e=>(p||"story"!==e.type||i?.[e.id]?.story_type!=="board_shop_tool_module"||(Y=!0),f({...q,itemKey:e}))),X=!T&&E&&!l?.length;return(0,_.jsx)(D.P,{value:{onPinCreate:({boardId:e})=>this.handlePinAdded(e),onPinDelete:()=>Y&&this.masonryRef.current?.reflow()},children:(0,_.jsxs)(a.az,{"data-test-id":"base-board-pin-grid",minHeight:u?800:"",children:[o&&!p&&0===I&&S&&S(o,!0),(0,_.jsx)(O,{allowReordering:W,index:N,isDragWithinBounds:g,children:h&&(0,_.jsx)(j.A,{isAtEndOfFeed:E,isPlaceholderGrid:T&&!J.length,itemCount:J.length,children:(0,_.jsx)(v.default,{columnWidth:u?A.WH:void 0,getColumnSpanConfig:Y?function(e){return"story"===e.itemKey.type&&i?.[e.itemKey.id]?.story_type==="board_shop_tool_module"?3:e.itemKey.columnSpan??1}:void 0,isFetching:T,isLoadedAccessibilityLabel:J.length>0?L.bt("More Pins loaded for board", "More Pins loaded for board", "board.masonry.paginationLoaded", undefined, true):L.bt("Loaded Pins for board", "Loaded Pins for board", "board.masonry.loaded", undefined, true),isLoadingAccessibilityLabel:J.length>0?L.bt("Loading more Pins for board", "Loading more Pins for board", "board.masonry.paginationLoading", undefined, true):L.bt("Loading Pins for board", "Loading Pins for board", "board.masonry.loading", undefined, true),isLoadingStateEnabled:!X,items:J,layout:"basic",loadItems:this.handleFetchMore,masonryRef:this.masonryRef,renderItem:({data:t,itemIdx:r})=>{let{inBulkEditMode:o}=q,i="pin"===t.itemKey.type&&!!e?.includes(t.itemKey.id);return(0,_.jsx)(n.Fragment,{children:(0,_.jsx)(a.az,{ref:0===r?this.anchorElementRef:null,dangerouslySetInlineStyle:{__style:{marginBottom:u?-6:0}},children:(0,_.jsx)(k,{boardSectionId:this.props.boardSectionId,gridItem:{...t,isSelected:o&&(y?!i:i)},inBoardOrganizationMode:p,index:r,paddingBottom:6*!!this.props.denseViewSelected,renderPinItem:this.renderPinItem,viewParameter:this.props.viewParameter})})})}},`${String(u)}-${String(p)}-${String(m)}`)})}),W&&-1!==U&&(0,_.jsx)(x.A,{}),E&&!p&&o&&(I??0)>=J.length-1&&0!==I&&S&&S(o),E&&c&&P&&P(c),E&&s&&b&&b(s),!1!==K&&E&&d&&w&&w(d)]})})}}let K=(0,P.Yd)(1000182)(function(e){let{logContextEvent:t}=(0,b.o)(),r=(0,S.A)(),o=(0,E.A)(),{hasSimplifiedPinGridExpLoaded:a}=(0,s.a)(),l=(0,I.A)(),d=(0,i.d4)(e=>e.desktopStories),{board:c,boardSectionId:u,isOwnBoard:h,resource:p}=e;return(0,n.useEffect)(()=>{p.isAtEnd&&t({event_type:15145,view_type:u?164:5,view_parameter:h?3069:3070,aux_data:{board_id:c.id,board_pin_count:c.pin_count,board_section_id:u,board_section_count:c.section_count}})},[c,u,h,t,p]),(0,_.jsx)(N,{...e,desktopStories:d,hasSimplifiedPinGridExpLoaded:a,i18n:r,lfvExperiences:l,logContextEvent:t,orbacSubjectId:o})});K.displayName="BaseBoardPinGrid";let W=K},873480(e,t,r){r.d(t,{A:()=>c});var o=r(61163),n=r(859471),i=r(106386),a=r(19821),s=r(408738),l=r(562615);let d=(0,s.A)(()=>r.e("21882").then(r.bind(r,681358)),void 0,e=>681358,"app-common-react-components-FeaturedBoards-FeaturedBoardsModule",e=>["21882"]);function c({isOwnBoard:e,storyId:t}){(0,n.useEffect)(()=>{(0,o.A)("FeaturedBoardsStory","/app/www/save/board/FeaturedBoardsStory/FeaturedBoardsStory.tsx")},[]);let r=(0,i.d4)(e=>e.desktopStories[t]),s=r&&"featured_boards"===r.story_type?r:void 0;return s?(0,l.jsx)(a.az,{marginTop:3,padding:2,children:(0,l.jsx)(d,{renderAsStory:!0,slotIndex:-1,story:s,surface:"Board",viewParameter:e?3069:3070,viewType:5})}):null}},618839(e,t,r){r.d(t,{A:()=>s});var o=r(61163),n=r(859471),i=r(19821),a=r(562615);function s({children:e}){return(0,n.useEffect)(()=>{(0,o.A)("Center","/app/www/save/board/Headers/Center.tsx")},[]),(0,a.jsx)(i.so,{alignItems:"stretch",justifyContent:"center",children:e})}},211592(e,t,r){r.r(t),r.d(t,{default:()=>c});var o=r(61163),n=r(859471),i=r(106386),a=r(19821),s=r(408738),l=r(562615);let d=(0,s.A)(()=>Promise.all([r.e("78180"),r.e("91796"),r.e("80816"),r.e("63726"),r.e("21808")]).then(r.bind(r,199245)),void 0,e=>199245,"app-www-BoardMoreIdeasPage-MoreIdeasTabContentPageDefault",e=>["78180","91796","80816","63726","21808"]);function c({storyId:e}){(0,n.useEffect)(()=>{(0,o.A)("MoreIdeasFeed","/app/www/save/board/MoreIdeasFeed/MoreIdeasFeed.tsx")},[]);let t=(0,i.d4)(t=>t.desktopStories[e]);return(t&&"board_ideas_feed"===t.story_type?t:void 0)?(0,l.jsx)(a.az,{"data-test-id":"more-ideas-feed",children:(0,l.jsx)(d,{surface:"board"})}):null}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/69592.en_GB-7b2337c9bac13dd0.mjs.map